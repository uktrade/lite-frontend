parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Ytat":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];!function(t){"use strict";var n,r=function(){try{if(t.URLSearchParams&&"bar"===new t.URLSearchParams("foo=bar").get("foo"))return t.URLSearchParams}catch(n){}return null}(),e=r&&"a=1"===new r({a:1}).toString(),o=r&&"+"===new r("s=%2B").get("s"),i="__URLSearchParams__",a=!r||((n=new r).append("s"," &"),"s=+%26"===n.toString()),c=h.prototype,s=!(!t.Symbol||!t.Symbol.iterator);if(!(r&&e&&o&&a)){c.append=function(t,n){y(this[i],t,n)},c.delete=function(t){delete this[i][t]},c.get=function(t){var n=this[i];return this.has(t)?n[t][0]:null},c.getAll=function(t){var n=this[i];return this.has(t)?n[t].slice(0):[]},c.has=function(t){return d(this[i],t)},c.set=function(t,n){this[i][t]=[""+n]},c.toString=function(){var t,n,r,e,o=this[i],a=[];for(n in o)for(r=l(n),t=0,e=o[n];t<e.length;t++)a.push(r+"="+l(e[t]));return a.join("&")};var u=!!o&&r&&!e&&t.Proxy;Object.defineProperty(t,"URLSearchParams",{value:u?new Proxy(r,{construct:function(t,n){return new t(new h(n[0]).toString())}}):h});var f=t.URLSearchParams.prototype;f.polyfill=!0,f.forEach=f.forEach||function(t,n){var r=g(this.toString());Object.getOwnPropertyNames(r).forEach(function(e){r[e].forEach(function(r){t.call(n,r,e,this)},this)},this)},f.sort=f.sort||function(){var t,n,r,e=g(this.toString()),o=[];for(t in e)o.push(t);for(o.sort(),n=0;n<o.length;n++)this.delete(o[n]);for(n=0;n<o.length;n++){var i=o[n],a=e[i];for(r=0;r<a.length;r++)this.append(i,a[r])}},f.keys=f.keys||function(){var t=[];return this.forEach(function(n,r){t.push(r)}),v(t)},f.values=f.values||function(){var t=[];return this.forEach(function(n){t.push(n)}),v(t)},f.entries=f.entries||function(){var t=[];return this.forEach(function(n,r){t.push([r,n])}),v(t)},s&&(f[t.Symbol.iterator]=f[t.Symbol.iterator]||f.entries)}function h(t){((t=t||"")instanceof URLSearchParams||t instanceof h)&&(t=t.toString()),this[i]=g(t)}function l(t){var n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'\(\)~]|%20|%00/g,function(t){return n[t]})}function p(t){return t.replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/gi,function(t){return decodeURIComponent(t)})}function v(n){var r={next:function(){var t=n.shift();return{done:void 0===t,value:t}}};return s&&(r[t.Symbol.iterator]=function(){return r}),r}function g(t){var n={};if("object"==typeof t)if(S(t))for(var r=0;r<t.length;r++){var e=t[r];if(!S(e)||2!==e.length)throw new TypeError("Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements");y(n,e[0],e[1])}else for(var o in t)t.hasOwnProperty(o)&&y(n,o,t[o]);else{0===t.indexOf("?")&&(t=t.slice(1));for(var i=t.split("&"),a=0;a<i.length;a++){var c=i[a],s=c.indexOf("=");-1<s?y(n,p(c.slice(0,s)),p(c.slice(s+1))):c&&y(n,p(c),"")}}return n}function y(t,n,r){var e="string"==typeof r?r:null!=r&&"function"==typeof r.toString?r.toString():JSON.stringify(r);d(t,n)?t[n].push(e):t[n]=[e]}function S(t){return!!t&&"[object Array]"===Object.prototype.toString.call(t)}function d(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}(void 0!==t?t:"undefined"!=typeof window?window:this);
},{}],"CigZ":[function(require,module,exports) {
!function(){"use strict";if(!self.fetch){s.prototype.append=function(t,e){t=o(t),e=n(e);var r=this.map[t];r||(r=[],this.map[t]=r),r.push(e)},s.prototype.delete=function(t){delete this.map[o(t)]},s.prototype.get=function(t){var e=this.map[o(t)];return e?e[0]:null},s.prototype.getAll=function(t){return this.map[o(t)]||[]},s.prototype.has=function(t){return this.map.hasOwnProperty(o(t))},s.prototype.set=function(t,e){this.map[o(t)]=[n(e)]},s.prototype.forEach=function(t){var e=this;Object.getOwnPropertyNames(this.map).forEach(function(r){t(r,e.map[r])})};var t={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self},e=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],r=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent);h.call(u.prototype),h.call(c.prototype),self.Headers=s,self.Request=u,self.Response=c,self.fetch=function(e,o){var n;return n=u.prototype.isPrototypeOf(e)&&!o?e:new u(e,o),new fetch.Promise(function(e,o){var s=function(){return r&&!/^(get|post|head|put|delete|options)$/i.test(this.method)?(this.usingActiveXhr=!0,new ActiveXObject("Microsoft.XMLHTTP")):new XMLHttpRequest}();function i(){if(4===s.readyState){var t=1223===s.status?204:s.status;if(t<100||t>599)o(new TypeError("Network request failed"));else{var r={status:t,statusText:s.statusText,headers:p(s),url:"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0},n="response"in s?s.response:s.responseText;e(new c(n,r))}}}"cors"===n.credentials&&(s.withCredentials=!0),s.onreadystatechange=i,self.usingActiveXhr||(s.onload=i,s.onerror=function(){o(new TypeError("Network request failed"))}),s.open(n.method,n.url,!0),"responseType"in s&&t.blob&&(s.responseType="blob"),n.headers.forEach(function(t,e){e.forEach(function(e){s.setRequestHeader(t,e)})}),s.send(void 0===n._bodyInit?null:n._bodyInit)})},fetch.Promise=self.Promise,self.fetch.polyfill=!0}function o(t){if("string"!=typeof t&&(t=t.toString()),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=t.toString()),t}function s(t){this.map={};var e=this;t instanceof s?t.forEach(function(t,r){r.forEach(function(r){e.append(t,r)})}):t&&Object.getOwnPropertyNames(t).forEach(function(r){e.append(r,t[r])})}function i(t){if(t.bodyUsed)return fetch.Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(t){return new fetch.Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function f(t){var e=new FileReader;return e.readAsArrayBuffer(t),a(e)}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(t.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else{if(e)throw new Error("unsupported BodyInit type");this._bodyText=""}},t.blob?(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return fetch.Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return fetch.Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(f)},this.text=function(){var t,e,r=i(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,(e=new FileReader).readAsText(t),a(e);if(this._bodyFormData)throw new Error("could not read FormData body as text");return fetch.Promise.resolve(this._bodyText)}):this.text=function(){var t=i(this);return t||fetch.Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(function(t){return JSON.parse(t)})},this}function u(t,r){var o,n;if(r=r||{},this.url=t,this.credentials=r.credentials||"omit",this.headers=new s(r.headers),this.method=(o=r.method||"GET",n=o.toUpperCase(),e.indexOf(n)>-1?n:o),this.mode=r.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r.body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r.body)}function d(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),o=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(n))}}),e}function p(t){var e=new s;return t.getAllResponseHeaders().trim().split("\n").forEach(function(t){var r=t.trim().split(":"),o=r.shift().trim(),n=r.join(":").trim();e.append(o,n)}),e}function c(t,e){e||(e={}),this._initBody(t),this.type="default",this.url=null,this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof s?e.headers:new s(e.headers),this.url=e.url||""}}();
},{}],"la8t":[function(require,module,exports) {
var define;
var e,t,n;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t=this,n=function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function n(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach(function(t){var n,r;n=e,t=i[r=t],r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function o(e,t){for(var n=document.getElementsByClassName(e.resultsList.className),i=0;i<n.length;i++)t!==n[i]&&t!==e.inputField&&n[i].parentNode.removeChild(n[i]);e.inputField.removeAttribute("aria-activedescendant"),e.inputField.setAttribute("aria-expanded",!1)}function s(e,t,i){var r,o,s=(r=e,(o=document.createElement(r.resultsList.element)).setAttribute("id",r.resultsList.idName),o.setAttribute("aria-label",r.name),o.setAttribute("class",r.resultsList.className),o.setAttribute("role","listbox"),o.setAttribute("tabindex","-1"),r.resultsList.container&&r.resultsList.container(o),("string"==typeof r.resultsList.destination?document.querySelector(r.resultsList.destination):r.resultsList.destination()).insertAdjacentElement(r.resultsList.position,o),o);e.inputField.setAttribute("aria-expanded",!0);for(var a=function(r){var o,a,u,l,c=t.results[r];(l=(o=c,a=r,u=e,(l=document.createElement(u.resultItem.element)).setAttribute("id","".concat(u.resultItem.idName,"_").concat(a)),l.setAttribute("class",u.resultItem.className),l.setAttribute("role","option"),l.innerHTML=o.match,u.resultItem.content&&u.resultItem.content(o,l),l)).addEventListener("click",function(o){o={event:o,matches:i,input:t.input,query:t.query,results:t.results,selection:n(n({},c),{},{index:r})},e.onSelection&&e.onSelection(o)}),s.appendChild(l)},u=0;u<t.results.length;u++)a(u);return s}function a(e,t,n){e.dispatchEvent(new CustomEvent(n,{bubbles:!0,detail:t,cancelable:!0}))}function u(e,t){for(var n=[],i=function(i){function o(r){var o=(r?s[r]:s).toString();o&&((o="function"==typeof e.searchEngine?e.searchEngine(t,o):function(e,t,n){var i=n.diacritics?t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):t.toLowerCase();if("loose"===n.searchEngine){e=e.replace(/ /g,"");for(var r=[],o=0,s=0;s<i.length;s++){var a=t[s];o<e.length&&i[s]===e[o]&&(a=n.highlight?'<span class="autoComplete_highlighted">'.concat(a,"</span>"):a,o++),r.push(a)}if(o===e.length)return r.join("")}else if(i.includes(e))return e=new RegExp("".concat(e),"i").exec(t),n.highlight?t.replace(e,'<span class="autoComplete_highlighted">'.concat(e,"</span>")):t}(t,o,e))&&r?n.push({key:r,index:i,match:o,value:s}):o&&!r&&n.push({index:i,match:o,value:s}))}var s=e.data.store[i];if(e.data.key){var a,u=r(e.data.key);try{for(u.s();!(a=u.n()).done;)o(a.value)}catch(o){u.e(o)}finally{u.f()}}else o()},o=0;o<e.data.store.length;o++)i(o);return e.sort?n.sort(e.sort):n}var l,c;function d(e){!function(e){if(!(e instanceof d))throw new TypeError("Cannot call a class as a function")}(this);var t=void 0===(N=e.name)?"Search":N,n=void 0===(F=e.selector)?"#autoComplete":F,i=void 0!==(T=e.observer)&&T,r=(P=e.data).src,o=P.key,s=void 0!==(L=P.cache)&&L,a=P.store,u=P.results,l=e.query,c=void 0===(k=(S=void 0===(S=e.trigger)?{}:S).event)?["input"]:k,h=void 0!==(C=S.condition)&&C,p=void 0===(O=e.searchEngine)?"strict":O,f=void 0!==(E=e.diacritics)&&E,m=void 0===(I=e.threshold)?1:I,v=void 0===(A=e.debounce)?0:A,y=void 0===(w=(j=void 0===(j=e.resultsList)?{}:j).render)||w,b=void 0!==(x=j.container)&&x,g=j.destination,F=void 0===(N=j.position)?"afterend":N,L=void 0===(T=j.element)?"ul":T,k=void 0===(P=j.idName)?"autoComplete_list":P,C=void 0===(S=j.className)?"autoComplete_list":S,E=void 0!==(O=j.navigation)&&O,A=void 0!==(I=e.sort)&&I,w=e.placeHolder,N=void 0===(x=e.maxResults)?5:x,S=void 0!==(P=(T=void 0===(T=e.resultItem)?{}:T).content)&&P,O=void 0===(j=T.element)?"li":j,x=void 0===(I=T.idName)?"autoComplete_result":I,j=void 0===(P=T.className)?"autoComplete_result":P,I=e.noResults,P=void 0!==(T=e.highlight)&&T,T=e.feedback;e=e.onSelection;this.name=t,this.selector=n,this.observer=i,this.data={src:r,key:o,cache:s,store:a,results:u},this.query=l,this.trigger={event:c,condition:h},this.searchEngine=p,this.diacritics=f,this.threshold=m,this.debounce=v,this.resultsList={render:y,container:b,destination:g||this.selector,position:F,element:L,idName:k,className:C,navigation:E},this.sort=A,this.placeHolder=w,this.maxResults=N,this.resultItem={content:S,element:O,idName:x,className:j},this.noResults=I,this.highlight=P,this.feedback=T,this.onSelection=e,this.inputField="string"==typeof this.selector?document.querySelector(this.selector):this.selector(),this.observer?this.preInit():this.init()}return l=d,(c=[{key:"start",value:function(e,t){var i=this,r=this.data.results?this.data.results(u(this,t)):u(this,t);t={input:e,query:t,matches:r,results:r.slice(0,this.maxResults)};return a(this.inputField,t,"results"),r.length?this.resultsList.render?(r.length&&s(this,t,r),a(this.inputField,t,"rendered"),function(e,t){function i(e,i,o,u){e.preventDefault(),o?r++:r--,s(i),u.inputField.setAttribute("aria-activedescendant",i[r].id),a(e.srcElement,n(n({event:e},t),{},{selection:t.results[r]}),"navigation")}var r=-1,s=function(e){if(!e)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].removeAttribute("aria-selected"),e[t].classList.remove("autoComplete_selected")}(e),e[r=(r=r>=e.length?0:r)<0?e.length-1:r].setAttribute("aria-selected","true"),e[r].classList.add("autoComplete_selected")},u=e.resultsList.navigation||function(t){var n=document.getElementById(e.resultsList.idName);if(!n)return e.inputField.removeEventListener("keydown",u);n=n.getElementsByTagName(e.resultItem.element),27===t.keyCode?(e.inputField.value="",o(e)):40===t.keyCode||9===t.keyCode?i(t,n,!0,e):38===t.keyCode||9===t.keyCode?i(t,n,!1,e):13===t.keyCode&&(t.preventDefault(),-1<r&&n&&n[r].click())};e.inputField.autoCompleteNavigate&&e.inputField.removeEventListener("keydown",e.inputField.autoCompleteNavigate),e.inputField.autoCompleteNavigate=u,e.inputField.addEventListener("keydown",u)}(this,t),void document.addEventListener("click",function(e){return o(i,e.target)})):this.feedback(t):this.noResults?this.noResults(t,s):null}},{key:"dataStore",value:function(){var e=this;return new Promise(function(t,n){return e.data.cache&&e.data.store?t(null):new Promise(function(t,n){return"function"==typeof e.data.src?e.data.src().then(t,n):t(e.data.src)}).then(function(i){try{return e.data.store=i,a(e.inputField,e.data.store,"fetch"),t()}catch(i){return n(i)}},n)})}},{key:"compose",value:function(){var e=this;return new Promise(function(t,n){var i,r,s,a;return a=e.inputField,s=i=(a instanceof HTMLInputElement||a instanceof HTMLTextAreaElement?a.value:a.innerHTML).toLowerCase(),r=(a=e).query&&a.query.manipulate?a.query.manipulate(s):a.diacritics?s.normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):s,a=r,((s=e).trigger.condition?s.trigger.condition(a):a.length>=s.threshold&&a.replace(/ /g,"").length)?e.dataStore().then(function(t){try{return o(e),e.start(i,r),u.call(e)}catch(t){return n(t)}},n):(o(e),u.call(e));function u(){return t()}})}},{key:"init",value:function(){var e,t,n,i,r=this;(e=this).inputField.setAttribute("type","text"),e.inputField.setAttribute("role","combobox"),e.inputField.setAttribute("aria-haspopup",!0),e.inputField.setAttribute("aria-expanded",!1),e.inputField.setAttribute("aria-controls",e.resultsList.idName),e.inputField.setAttribute("aria-autocomplete","both"),this.placeHolder&&this.inputField.setAttribute("placeholder",this.placeHolder),this.hook=(t=function(){r.compose()},n=this.debounce,function(){var e=this,r=arguments;clearTimeout(i),i=setTimeout(function(){return t.apply(e,r)},n)}),this.trigger.event.forEach(function(e){r.inputField.removeEventListener(e,r.hook),r.inputField.addEventListener(e,r.hook)}),a(this.inputField,null,"init")}},{key:"preInit",value:function(){var e=this;new MutationObserver(function(t,n){var i,o=r(t);try{for(o.s();!(i=o.n()).done;)i.value,e.inputField&&(n.disconnect(),a(e.inputField,null,"connect"),e.init())}catch(t){o.e(t)}finally{o.f()}}).observe(document,{childList:!0,subtree:!0})}},{key:"unInit",value:function(){this.inputField.removeEventListener("input",this.hook),a(this.inputField,null,"unInit")}}])&&e(l.prototype,c),d},"object"==("undefined"==typeof exports?"undefined":i(exports))&&"undefined"!=typeof module?module.exports=n():"function"==typeof e&&e.amd?e(n):(t="undefined"!=typeof globalThis?globalThis:t||self).autoComplete=n();
},{}],"KWh1":[function(require,module,exports) {
"use strict";var e,t="object"==typeof Reflect?Reflect:null,n=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function r(e){console&&console.warn&&console.warn(e)}e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}module.exports=o,module.exports.once=m,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function f(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function v(e,t,n,i){var o,s,v;if(u(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),v=s[t]),void 0===v)v=s[t]=n,++e._eventsCount;else if("function"==typeof v?v=s[t]=i?[n,v]:[v,n]:i?v.unshift(n):v.push(n),(o=f(e))>0&&v.length>o&&!v.warned){v.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=v.length,r(l)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function a(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?d(i):p(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function d(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function m(e,t){return new Promise(function(n,r){function i(){void 0!==o&&e.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==t&&(o=function(n){e.removeListener(t,i),r(n)},e.once("error",o)),e.once(t,i)})}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return f(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var f=o[e];if(void 0===f)return!1;if("function"==typeof f)n(f,this,t);else{var v=f.length,l=p(f,v);for(r=0;r<v;++r)n(l[r],this,t)}return!0},o.prototype.addListener=function(e,t){return v(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return v(this,e,t,!0)},o.prototype.once=function(e,t){return u(t),this.on(e,c(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,c(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,s;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():y(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return a(this,e,!0)},o.prototype.rawListeners=function(e){return a(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]};
},{}],"xbel":[function(require,module,exports) {
"use strict";function e(e,t={},n=null){let o=new XMLHttpRequest,r=t.url,s=[];for(let l in e)s.push(`${l}=${encodeURIComponent(e[l])}`);let u=s.join("&");"get"===t.type.toLowerCase()&&(r+="?"+u),o.open(t.type,r,!0);for(let l in t.headers){let n=t.headers[l];"function"==typeof n&&(n=n(e,t)),o.setRequestHeader(l,n)}return n&&(o.onreadystatechange=n),o.send(e),o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"xeEx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("events")),t=s(require("./ajax.js"));function s(e){return e&&e.__esModule?e:{default:e}}let i={};const n=/[\\^$.*+?()[\]{}|]/g,r=RegExp(n.source),l=document.createElement("div"),h={containerTokenfield:'<div class="tokenfield tokenfield-mode-tokens">\n      <input class="tokenfield-copy-helper"\n        style="display:none;position:fixed;top:-1000px;right:1000px;"\n        tabindex="-1"\n        type="text"\n      />\n      <div class="tokenfield-set">\n        <ul></ul>\n      </div>\n      <input class="tokenfield-input" />\n      <div class="tokenfield-suggest">\n        <ul class="tokenfield-suggest-list"></ul>\n      </div>\n    </div>',containerList:'<div class="tokenfield tokenfield-mode-list">\n      <input class="tokenfield-input" />\n      <div class="tokenfield-suggest">\n        <ul class="tokenfield-suggest-list"></ul>\n      </div>\n      <div class="tokenfield-set">\n        <ul></ul>\n      </div>\n    </div>',suggestItem:'<li class="tokenfield-suggest-item"></li>',setItem:'<li class="tokenfield-set-item">\n      <span class="item-label"></span>\n      <a href="#" class="item-remove" tabindex="-1">×</a>\n      <input class="item-input" type="hidden" />\n    </li>'};function o(){return(65536*(1+Math.random())|0).toString(16)+(65536*(1+Math.random())|0).toString(16)}function m(e,t){return e.indexOf(t)>=0}function u(e){let t=[e];for(;e.parentNode;)e=e.parentNode,t.push(e);return t}function a(e){return e.nodeName?e:"string"==typeof e?document.querySelector(e):null}function d(e,t){return e.nodeName?e:(e=e.replace(/(\t|\n$)/g,""),l.innerHTML="",l.innerHTML=e,!0===t?l.childNodes:l.childNodes[0])}function c(e){if("string"==typeof e)return e;if(null===e)return"";let t=e+"";return"0"===t&&1/e==-1/0?"-0":t}function g(e){return e.key||e.keyIdentifier?e.key||String.fromCharCode(parseInt(e.keyIdentifier.substr(2),16)):null}function _(e){return(e=c(e))&&r.test(e)?e.replace(n,"\\$&"):e}function p(){return{_defaults:{focusedItem:null,cache:{},timer:null,xhr:null,suggested:!1,suggestedItems:[],setItems:[],events:{},delimiters:{}},_options:{el:null,form:!0,mode:"tokenfield",addItemOnBlur:!1,addItemsOnPaste:!1,keepItemsOrder:!0,setItems:[],items:[],newItems:!0,multiple:!0,maxItems:0,minLength:0,keys:{17:"ctrl",16:"shift",91:"meta",8:"delete",27:"esc",37:"left",38:"up",39:"right",40:"down",46:"delete",65:"select",67:"copy",88:"cut",9:"delimiter",13:"delimiter",108:"delimiter"},matchRegex:"{value}",matchFlags:"i",matchStart:!1,matchEnd:!1,delimiters:[],copyProperty:"name",copyDelimiter:", ",remote:{type:"GET",url:null,queryParam:"q",delay:300,timestampParam:"t",params:{},headers:{}},placeholder:null,inputType:"text",minChars:2,maxSuggest:10,maxSuggestWindow:10,filterSetItems:!0,filterMatchCase:!1,singleInput:!1,singleInputValue:"id",singleInputDelimiter:", ",itemLabel:"name",itemName:"items",newItemName:"items_new",itemValue:"id",newItemValue:"name",itemData:"name",validateNewItem:null}}}class f extends e.default{constructor(e={}){super();let{_defaults:t,_options:s}=p();this.id=o(),this.key=`key_${this.id}`,this._vars=Object.assign({},t),this._options=Object.assign({},s,e),this._options.keys=Object.assign({},s.keys,e.keys),this._options.remote=Object.assign({},s.remote,e.remote),this._templates=Object.assign({},h,e.templates),this._vars.setItems=this._prepareData(this.remapData(this._options.setItems||[])),this._focused=!1,this._input=null,this._form=!1,this._html={};let n=this._options;n.delimiters.forEach(e=>{this._vars.delimiters[e]=!0});let r=a(n.el);if(!r)throw new Error(`Selector: DOM Element ${n.el} not found.`);if(this.el=r,n.singleInput){let e=a(n.singleInput);this._input=e||this.el}if(this.el.tokenfield=this,null===n.placeholder&&(n.placeholder=n.el.placeholder||""),!n.form)throw new Error("Cannot create tokenfield without DOM Element.");{let e=!1;if(n.form.nodeName)e=n.form;else if(!0===n.form){let t=this.el;for(;t.parentNode;){if("FORM"===t.nodeName){e=t;break}t=t.parentNode}}else if("string"==typeof e&&!(e=document.querySelector(e)))throw new Error(`Selector: DOM Element ${n.form} not found.`);this._form=e}i[this.id]=this,this._render()}_render(){let e=this._options,t=this._html;return"tokenfield"===e.mode?t.container=d(this._templates.containerTokenfield):t.container=d(this._templates.containerList),t.suggest=t.container.querySelector(".tokenfield-suggest"),t.suggestList=t.container.querySelector(".tokenfield-suggest-list"),t.items=t.container.querySelector(".tokenfield-set > ul"),t.input=t.container.querySelector(".tokenfield-input"),t.input.setAttribute("type",e.inputType),"tokenfield"===e.mode?t.input.placeholder=this._vars.setItems.length?"":e.placeholder:t.input.placeholder=e.placeholder,t.copyHelper=t.container.querySelector(".tokenfield-copy-helper"),e.el.style.display="none",t.suggest.style.display="none",this._renderSizer(),t.container.tokenfield=this,e.el.parentElement.insertBefore(t.container,e.el),t.container.insertBefore(e.el,t.container.firstChild),this._setEvents(),this._renderItems(),"tokenfield"===e.mode&&this._resizeInput(),this}_renderSizer(){let e=this._html,t=this._getBounds(),s=window.getComputedStyle(e.container),i=parseInt(s.paddingLeft,10)+parseInt(s.paddingRight,10),n={width:"auto",height:"auto",overflow:"hidden",whiteSpace:"pre",maxWidth:t.width-i+"px",position:"fixed",top:-1e4+"px",left:1e4+"px",fontSize:s.fontSize,paddingLeft:s.paddingLeft,paddingRight:s.paddingRight};e.sizer=document.createElement("div"),e.sizer.id="tokenfield-sizer-"+this.id;for(let r in n)e.sizer.style[r]=n[r];e.container.appendChild(e.sizer)}_minimizeInput(){return this._html.input.style.width="20px",this}_refreshInput(e=!0){let t=this._vars,s=this._html;if(e&&(s.input.value=""),"tokenfield"===this._options.mode){this._resizeInput();let e=t.setItems.length?"":this._options.placeholder;s.input.setAttribute("placeholder",e)}else"list"===this._options.mode&&s.input.setAttribute("placeholder",this._options.placeholder);return this}_resizeInput(e=""){let t=this._html,s=this._getBounds(),i=window.getComputedStyle(t.container),n=parseInt(i.paddingRight,10)+parseInt(i.borderRightWidth,10),r=n+parseInt(i.paddingLeft,10)+parseInt(i.borderLeftWidth,10);if(t.sizer.innerHTML=e,t.sizer.style.maxWidth=s.width-n+"px",0===s.width)return void(t.input.style.width="100%");t.input.style.width="20px";let l=t.sizer.getBoundingClientRect(),h=t.input.getBoundingClientRect(),o=s.width-(h.left-s.left)-n;l.width>o?t.input.style.width=s.width-r-1+"px":t.input.style.width=o-1+"px"}_fetchData(e){let s=this._vars,i=this._options,n=i.remote,r=Object.assign({},i.params);for(let t in n.params)r[t]=n.params[t];n.limit&&(r[n.limit]=i.remote.limit),r[n.queryParam]=e,r[n.timestampParam]=Math.round((new Date).getTime()/1e3),s.xhr=(0,t.default)(r,i.remote,()=>{if(s.xhr&&4==s.xhr.readyState){if(200==s.xhr.status){let t=JSON.parse(s.xhr.responseText);s.cache[e]=t;let n=this._prepareData(this.remapData(t)),r=this._filterData(e,n);s.suggestedItems=i.filterSetItems?this._filterSetItems(r):r,this.showSuggestions()}else if(s.xhr.status>0)throw new Error("Error while loading remote data.");this._abortXhr()}})}remapData(e){return e}_prepareData(e){return e.map(e=>Object.assign({},e,{[this.key]:o()}))}_filterData(e,t){let s=this._options,i=s.matchRegex.replace("{value}",_(e));s.matchStart?i="^"+i:s.matchEnd&&(i+="$");let n=new RegExp(i,s.matchFlags);return t.filter(e=>n.test(e[s.itemData]))}_abortXhr(){let e=this._vars;null!==e.xhr&&(e.xhr.abort(),e.xhr=null)}_filterSetItems(e){const t=this._options.itemValue;let s=this._vars;if(!s.setItems.length)return e;let i=s.setItems.map(e=>e[t]);return e.filter(e=>-1===i.indexOf(e[t]))}_setEvents(){let e=this._vars,t=this._html;e.events.onClick=this._onClick.bind(this),e.events.onMouseDown=this._onMouseDown.bind(this),e.events.onMouseOver=this._onMouseOver.bind(this),e.events.onFocus=this._onFocus.bind(this),e.events.onResize=this._onResize.bind(this),e.events.onReset=this._onReset.bind(this),e.events.onKeyDown=this._onKeyDown.bind(this),e.events.onFocusOut=this._onFocusOut.bind(this),t.container.addEventListener("click",e.events.onClick),1===Object.keys(i).length&&(document.addEventListener("mousedown",e.events.onMouseDown),window.addEventListener("resize",e.events.onResize)),this._form&&this._form.nodeName&&this._form.addEventListener("reset",e.events.onReset),t.suggestList.addEventListener("mouseover",e.events.onMouseOver),t.input.addEventListener("focus",e.events.onFocus)}_onMouseOver(e){let t=e.target;if(t.classList.contains("tokenfield-suggest-item")){[].slice.call(this._html.suggestList.querySelectorAll(".selected")).forEach(e=>{e!==t&&e.classList.remove("selected")}),t.classList.add("selected"),this._selectItem(t.key,!1),this._refreshItemsSelection()}}_onReset(){this.setItems(this._options.setItems)}_onFocus(){let e=this._vars,t=this._html,s=this._options;t.input.removeEventListener("keydown",e.events.onKeyDown),t.input.addEventListener("keydown",e.events.onKeyDown),t.input.addEventListener("focusout",e.events.onFocusOut),s.addItemsOnPaste&&(e.events.onPaste=this._onPaste.bind(this),t.input.addEventListener("paste",e.events.onPaste)),this._focused=!0,this._html.container.classList.add("focused"),this._resizeInput(),t.input.value.trim().length>=s.minChars&&this.showSuggestions()}_onFocusOut(e){let t=this._vars,s=this._options,i=this._html;if(i.input.removeEventListener("keydown",t.events.onKeyDown),i.input.removeEventListener("focusout",t.events.onFocusOut),void 0!==t.events.onPaste&&i.input.removeEventListener("paste",t.events.onPaste),e.relatedTarget&&e.relatedTarget===i.copyHelper)return;let n=s.multiple&&!s.maxItems||!s.multiple&&!t.setItems.length||s.multiple&&s.maxItems&&t.setItems.length<s.maxItems;this._focused&&s.addItemOnBlur&&n&&this._newItem(i.input.value)?this._renderItems()._refreshInput():this._defocusItems()._renderItems(),this._focused=!1,this._html.container.classList.remove("focused")}_onMouseDown(e){let t=null;for(let s in i)if(i[s]._html.container.contains(e.target)){t=i[s];break}if(t){for(let e in i)e!==t.id&&(i[e].hideSuggestions(),i[e].blur());e.target!==t._html.input&&e.preventDefault()}else for(let s in i)i[s].hideSuggestions(),i[s].blur()}_onResize(){for(let e in i)i[e]._resizeInput(i[e]._html.input.value)}_onPaste(e){let t=this._vars,s=this._options,i=e.clipboardData.getData("text"),n=[i];if(s.delimiters.length){let e=s.delimiters.join("|"),t=new RegExp(`(${e})`,"ig");n=i.split(t)}n.map(e=>e.trim()).filter(e=>e.length>0&&e.length>=s.minLength&&void 0===t.delimiters[e]).map(e=>this._newItem(e)).length&&(setTimeout(()=>{this._renderItems()._refreshInput()._deselectItems().hideSuggestions()},1),e.preventDefault())}_onKeyDown(e){let t=this._vars,s=this._options,i=this._html;s.maxItems&&t.setItems.length>=s.maxItems&&e.preventDefault(),"tokenfield"===s.mode&&setTimeout(()=>{this._resizeInput(i.input.value)},1);let n=g(e);if(void 0!==s.keys[e.keyCode]||m(s.delimiters,n)){if(this._keyAction(e))return!0}else this._defocusItems()._refreshItems();clearTimeout(t.timer),this._abortXhr(),(!s.maxItems||t.setItems.length<s.maxItems)&&setTimeout(()=>{this._keyInput(e)},1)}_keyAction(e){this.key;let t=null,s=this._vars,i=this._options,n=this._html,r=i.keys[e.keyCode],l=n.input.value.trim(),h=g(e);m(i.delimiters,h)&&void 0===r&&(r="delimiter");let o=this._getSelectedItems();switch(o.length&&(t=o[0]),r){case"esc":this._deselectItems()._defocusItems()._renderItems().hideSuggestions();break;case"up":this._vars.suggested&&(this._selectPrevItem()._refreshItemsSelection(),e.preventDefault()),this._defocusItems()._renderItems();break;case"down":this._vars.suggested&&(this._selectNextItem()._refreshItemsSelection(),e.preventDefault()),this._defocusItems()._renderItems();break;case"left":(this.getFocusedItems().length||!n.input.selectionStart&&!n.input.selectionEnd)&&(this._focusPrevItem(e.shiftKey),e.preventDefault());break;case"right":(this.getFocusedItems().length||n.input.selectionStart===l.length)&&(this._focusNextItem(e.shiftKey),e.preventDefault());break;case"delimiter":if(this._abortXhr(),this._defocusItems(),!i.multiple&&s.setItems.length>=1)return!1;l=this.onInput(l,e),t?this._addItem(t):l.length&&(t=this._newItem(l)),t&&this._minimizeInput()._renderItems().focus()._refreshInput()._refreshSuggestions()._deselectItems(),e.preventDefault();break;case"select":if(l.length||!e.ctrlKey&&!e.metaKey)return!1;this._vars.setItems.forEach(e=>{e.focused=!0}),this._refreshItems();break;case"cut":if(!this.getFocusedItems().length||!e.ctrlKey&&!e.metaKey)return!1;this._copy()._delete(e);break;case"copy":if(!this.getFocusedItems().length||!e.ctrlKey&&!e.metaKey)return!1;this._copy();break;case"delete":{this._abortXhr();let t=this.getFocusedItems();!n.input.selectionEnd&&8===e.keyCode||n.input.selectionStart===l.length&&46===e.keyCode||t.length?this._delete(e):s.timer=setTimeout(()=>{this._keyInput(e)},i.delay);break}}return!0}_copy(){let e=this._options,t=this._html,s=this.getFocusedItems().map(t=>t[e.copyProperty]).join(e.copyDelimiter);return t.copyHelper.style.display="block",t.copyHelper.value=s,t.copyHelper.focus(),t.copyHelper.select(),document.execCommand("copy"),t.copyHelper.style.display="none",t.copyHelper.value="",t.input.focus(),this}_delete(e){let t=this._vars,s=this._options;const i=this.key;let n=this._html,r=this.getFocusedItems();return"tokenfield"===s.mode&&t.setItems.length?r.length?(r.forEach(e=>{this._removeItem(e[i])}),this._refreshSuggestions()._keyInput(e)):n.input.selectionStart||this._focusItem(t.setItems[t.setItems.length-1][i]):r.length&&(r.forEach(e=>{this._removeItem(e[i])}),this._refreshSuggestions()._keyInput(e)),this._minimizeInput()._renderItems()._refreshInput(!1),this}_keyInput(e){let t=this._vars,s=this._options,i=this._html;this._defocusItems()._refreshItems();const n=this.onInput(i.input.value.trim(),e);if("keydown"===e.type&&this.emit("input",this,n,e),n.length<s.minChars)return this.hideSuggestions(),!1;if(!s.multiple&&t.setItems.length>=1)return!1;if(void 0===t.cache[n]){if(s.remote.url)t.timer=setTimeout(()=>{this._fetchData(n)},s.delay);else if(!s.remote.url&&s.items.length){let e=this._prepareData(s.items),i=this._filterData(n,e);t.suggestedItems=s.filterSetItems?this._filterSetItems(i):i,this.showSuggestions()}}else{let e=this._prepareData(this.remapData(t.cache[n])),i=this._filterData(n,e);t.suggestedItems=s.filterSetItems?this._filterSetItems(i):i,this.showSuggestions()}return this}_onClick(e){let t=e.target;if(t.classList.contains("item-remove"))e.preventDefault(),this._removeItem(t.key)._defocusItems()._minimizeInput()._renderItems()._refreshInput(!1)._keyInput(e);else if(t.classList.contains("tokenfield-suggest-item")){let e=this._getSuggestedItem(t.key);this._addItem(e)._minimizeInput()._renderItems()._refreshInput()._refreshSuggestions()}else{let s=u(t).filter(e=>e.classList&&e.classList.contains("tokenfield-set-item"))[0];s?(this._focusItem(s.key,e.shiftKey,e.ctrlKey||e.metaKey,!0),this._refreshItems()):this._keyInput(e)}this.focus()}_selectPrevItem(){const e=this.key,t=this._options;let s=this._vars.suggestedItems,i=this._getSelectedItemIndex();return s.length?(null!==i?0===i?t.newItems?this._deselectItems():this._selectItem(s[s.length-1][e]):this._selectItem(s[i-1][e]):this._selectItem(s[s.length-1][e]),this):this}_selectNextItem(){const e=this.key,t=this._options;let s=this._vars.suggestedItems,i=this._getSelectedItemIndex();return s.length?(null!==i?i===s.length-1?t.newItems?this._deselectItems():this._selectItem(s[0][e]):this._selectItem(s[i+1][e]):this._selectItem(s[0][e]),this):this}_focusPrevItem(e=!1){const t=this.key;let s=this._vars.setItems,i=this._getFocusedItemIndex();if(!s.length)return this;if(null!==i)if(0!==i||e)if(0===i&&e){let e=this._getFocusedItemIndex(!0);this._defocusItem(s[e][t])}else this._focusItem(s[i-1][t],e,!1,!0);else this._defocusItems();else this._focusItem(s[s.length-1][t],!1,!1,!0);return this._refreshItems(),this}_focusNextItem(e=!1){const t=this.key;let s=this._vars.setItems,i=this._getFocusedItemIndex(!0);return s.length?(null!==i?i!==s.length-1||e?i===s.length-1&&e?this._focusItem(s[0][t],e):this._focusItem(s[i+1][t],e):this._defocusItems():this._focusItem(s[0][t],!1),this._refreshItems(),this):this}_getSelectedItems(){const e=this.key;let t=this._vars.setItems.map(t=>t[e]);return this._vars.suggestedItems.filter(s=>s.selected&&t.indexOf(s[e])<0)}_selectItem(e,t=!1){this._vars.suggestedItems.forEach(s=>{if(s.selected=s[this.key]===e,s.selected&&t){let e=parseInt(this._html.suggest.style.maxHeight,10);if(e){let t=this._html.suggestList.getBoundingClientRect(),i=s.el.getBoundingClientRect(),n=i.top-t.top,r=n+i.height;r>=e+this._html.suggest.scrollTop?this._html.suggest.scrollTop=r-e:n<this._html.suggest.scrollTop&&(this._html.suggest.scrollTop=n)}}})}_deselectItem(e){return this._vars.suggestedItems.every(t=>t[this.key]!==e||(t.selected=!1,!1)),this}_deselectItems(){return this._vars.suggestedItems.forEach(e=>{e.selected=!1}),this}_refreshItemsSelection(){this._vars.suggestedItems.forEach(e=>{e.selected&&e.el?e.el.classList.add("selected"):e.el&&e.el.classList.remove("selected")})}_getSelectedItemIndex(){let e=null;return this._vars.suggestedItems.every((t,s)=>!t.selected||(e=s,!1)),e}_getFocusedItemIndex(e=!1){let t=null;return this._vars.setItems.every((s,i)=>!(s.focused&&(t=i,!e))),t}_getItem(e,t=null){null===t&&(t=this.key);let s=this._filterItems(this._vars.setItems,e,t);return s.length?s[0]:null}_getSuggestedItem(e,t=null){null===t&&(t=this.key);let s=this._filterItems(this._vars.suggestedItems,e,t);return s.length?s[0]:null}_getAvailableItem(e,t=null){null===t&&(t=this.key);let s=this._filterItems(this._options.items,e,t);return s.length?s[0]:null}_filterItems(e,t,s){const i=this._options.filterMatchCase;return e.filter(e=>"string"==typeof e[s]&&"string"==typeof t?i?e[s]===t:e[s].toLowerCase()==t.toLowerCase():e[s]==t)}_removeItem(e){return this._vars.setItems.every((t,s)=>t[this.key]!==e||(this.emit("removeToken",this,t),this._vars.setItems.splice(s,1),this.emit("removedToken",this,t),this.emit("change",this),!1)),this}_addItem(e){e.focused=!1;let t=this._options;if((e.isNew&&!this._getItem(e[t.itemData],t.itemData)||!this._getItem(e[t.itemValue],t.itemValue))&&(this.emit("addToken",this,e),!this._options.maxItems||this._options.maxItems&&this._vars.setItems.length<this._options.maxItems)){e.selected=!1;let t=Object.assign({},e);this._vars.setItems.push(t),this.emit("addedToken",this,t),this.emit("change",this)}return this}getFocusedItem(){let e=this._vars.setItems.filter(e=>e.focused)[0];return e.length?e[0]:null}getFocusedItems(){return this._vars.setItems.filter(e=>e.focused)}_focusItem(e,t=!1,s=!1,i=!1){if(t){let t=null,s=null,n=null,r=this._vars.setItems.length;if(this._vars.setItems.forEach((i,r)=>{i[this.key]===e&&(n=r),null===t&&i.focused&&(t=r),i.focused&&(s=r)}),(0===n||n===r-1)&&null===t&&null===s)return;null===t&&null===s?this._vars.setItems[n].focused=!0:0!==n||s!==r-1||i?(t=Math.min(n,t),s=Math.max(n,s),this._vars.setItems.forEach((e,i)=>{e.focused=n===i||i>=t&&i<=s})):this._vars.setItems[t].focused=!1}else this._vars.setItems.forEach(t=>{t.focused=s?t[this.key]===e?!t.focused:t.focused:t[this.key]===e});return this}_defocusItem(e){return this._vars.setItems.filter(t=>{t[this.key]===e&&(t.focused=!1)})}_defocusItems(){return this._vars.setItems.forEach(e=>{e.focused=!1}),this}_newItem(e){let t=this._options;if("string"==typeof e&&(!e.length||e.length<t.minLength))return null;let s=this._getItem(e,t.itemData)||this._getSuggestedItem(e,t.itemData)||this._getAvailableItem(e,t.itemData);if(!s&&t.newItems){if("function"==typeof t.validateNewItem&&!t.validateNewItem(e))return null;s={isNew:!0,[this.key]:o(),[t.itemData]:e},this.emit("newToken",this,s)}return s?(this._addItem(s),s):null}_buildEl(e){return d(e)}_getBounds(){return this._html.container.getBoundingClientRect()}_renderItems(){let e=this._vars,t=this._options,s=this._html;return s.items.innerHTML="",e.setItems.forEach((e,t)=>{let i=this._renderItem(e,t);s.items.appendChild(i),e.el=i,e.focused?e.el.classList.add("focused"):e.el.classList.remove("focused")}),e.setItems.length>1&&"tokenfield"===t.mode?s.input.setAttribute("placeholder",""):"list"===t.mode&&s.input.setAttribute("placeholder",t.placeholder),this._input&&(this._input.value=e.setItems.map(e=>e[t.singleInputValue]).join(t.singleInputDelimiter)),this}_refreshItems(){this._vars.setItems.forEach(e=>{e.el&&(e.focused?e.el.classList.add("focused"):e.el.classList.remove("focused"))})}_renderItem(e,t){let s=this._options,i=this.renderSetItemHtml(e),n=i.querySelector(".item-label"),r=i.querySelector(".item-input"),l=i.querySelector(".item-remove"),h=s.keepItemsOrder?`[${t}]`:"[]";return i.key=e[this.key],l.key=e[this.key],r.setAttribute("name",(e.isNew?s.newItemName:s.itemName)+h),r.value=e[e.isNew?s.newItemValue:s.itemValue]||null,n.textContent=this.renderSetItemLabel(e),e.focused&&i.classList.add("focused"),i}onInput(e,t){return e}renderSetItemHtml(){return this._buildEl(this._templates.setItem)}renderSetItemLabel(e){return e[this._options.itemLabel]}renderSuggestions(e){let t=this._vars,s=this._options,i=this._html,n=this._getSelectedItemIndex();if(!e.length)return this;if(0===s.maxSuggestWindow&&(i.suggest.style.maxHeight=null),!t.suggestedItems.length)return this;s.newItems||null!==n||(e[0].selected=!0);let r=0;e.every((e,t)=>{if(t>=s.maxSuggest)return!1;let n=i.suggestList.childNodes[t],l=e.el=this.renderSuggestedItem(e);return n?n.itemValue===e[s.itemValue]?(n.key=e[this.key],e.el=n):i.suggestList.replaceChild(l,n):n||i.suggestList.appendChild(l),s.maxSuggestWindow>0&&t<s.maxSuggestWindow&&(r+=i.suggestList.childNodes[t].getBoundingClientRect().height),s.maxSuggestWindow>0&&t===s.maxSuggestWindow&&(i.suggest.style.maxHeight=r+"px"),!0});let l=i.suggestList.childElementCount-e.length;if(l>0)for(let h=l-1;h>=0;h--)i.suggestList.removeChild(i.suggestList.childNodes[e.length+h]);return this}renderSuggestedItem(e){let t=this._options,s=this._buildEl(this._templates.suggestItem);if(s.key=e[this.key],s.itemValue=e[t.itemValue],s.innerHTML=this.renderSuggestedItemContent(e),s.setAttribute("title",e[t.itemData]),e.selected&&s.classList.add("selected"),!t.filterSetItems){(this._getItem(e[t.itemValue],t.itemValue)||this._getItem(e[t.itemData],t.itemData))&&s.classList.add("set")}return s}renderSuggestedItemContent(e){return e[this._options.itemData]}_refreshSuggestions(){let e=this._vars,t=this._options;if(this._html.input.value.length<t.minChars)return this.hideSuggestions(),this;let s=this._prepareData(t.items),i=this._filterData(this._html.input.value,s);return e.suggestedItems=t.filterSetItems?this._filterSetItems(i):i,e.suggestedItems.length&&(!t.maxItems||t.maxItems&&e.setItems.length<t.maxItems)?(this.renderSuggestions(e.suggestedItems),this):(this.hideSuggestions(),this)}showSuggestions(){let e=this._vars,t=this._options;return e.suggestedItems.length?(this.emit("showSuggestions",this),(!t.maxItems||t.maxItems&&e.setItems.length<t.maxItems)&&(this._html.suggest.style.display="block",e.suggested=!0,this.renderSuggestions(e.suggestedItems)),this.emit("shownSuggestions",this)):this.hideSuggestions(),this}hideSuggestions(){return this.emit("hideSuggestions",this),this._vars.suggested=!1,this._html.suggest.style.display="none",this._html.suggestList.innerHTML="",this.emit("hiddenSuggestions",this),this}setSuggestedItems(e){if(!Array.isArray(e))throw new Error("Argument must be an array of objects.");this._options.items=e,this._refreshSuggestions()}getItems(){return this._vars.setItems.map(e=>{let t=Object.assign({},e);return delete t[this.key],delete t.el,t})}setItems(e=[]){return this._vars.setItems=[],this.addItems(e),this}addItems(e=[]){const t=this._options.itemValue;return Array.isArray(e)||(e=[e]),this._prepareData(e).forEach(e=>{(e.isNew||void 0!==e[t])&&this._addItem(e)}),this._minimizeInput()._renderItems()._refreshInput().hideSuggestions(),this}sortItems(){let e=[];[...this._html.items.childNodes].forEach(t=>{let s=this._getItem(t.key);s&&e.push(s)}),this.setItems(e)}removeItem(e){const t=this._options;"object"==typeof e&&(e[t.itemValue]||e[t.newItemValue])&&(e=e[t.itemValue]||e[t.newItemValue]);let s=this._getItem(e,t.itemValue)||this._getItem(e,t.newItemValue);return s?(this._removeItem(s[this.key])._renderItems(),this):this}emptyItems(){return this._vars.setItems=[],this._renderItems()._refreshInput().hideSuggestions(),this.emit("change",this),this}getSuggestedItems(){return this._vars.suggestedItems.map(e=>Object.assign({},e))}focus(){return this._html.container.classList.add("focused"),this._focused||this._html.input.focus(),this}blur(){return this._html.container.classList.remove("focused"),this._focused&&this._html.input.blur(),this}remove(){let e=this._html;e.container.parentElement.insertBefore(this.el,e.container),e.container.remove(),this.el.style.display="block",1===Object.keys(i).length&&(document.removeEventListener("mousedown",this._vars.events.onMouseDown),window.removeEventListener("resize",this._vars.events.onResize)),this._form&&this._form.nodeName&&this._form.removeEventListener("reset",this._vars.events.onReset),delete i[this.id],delete this.el.tokenfield}}var I=f;exports.default=I;
},{"events":"KWh1","./ajax.js":"xbel"}],"XQJZ":[function(require,module,exports) {
"use strict";require("url-search-params-polyfill"),require("fetch-polyfill");var e=n(require("@tarekraafat/autocomplete.js")),t=n(require("tokenfield"));function n(e){return e&&e.__esModule?e:{default:e}}!function(){var n=document.getElementById("report_summary");new e.default({trigger:{event:["input"]},data:{src:function(){var e=n.value.toLowerCase();return fetch("/team/picklists/.json?type=report_summary&name="+e).then(function(e){return e.json().then(function(e){return e.results.map(function(e){return{value:e.name,text:e.text}})})})},key:["value"],cache:!1},selector:"#report_summary",threshold:1,debounce:300,resultsList:{render:!0,element:"table",container:function(e){e.setAttribute("id","autoComplete_list"),n.addEventListener("autoComplete",function(e){document.addEventListener("click",function e(){for(var t=document.getElementById("autoComplete_list");t.firstChild;)t.removeChild(t.firstChild);document.removeEventListener("click",e)})})}},resultItem:{content:function(e,t){t.innerHTML='<td><div class="govuk-heading-s govuk-!-margin-0">'+e.value.value+'</div><div class="govuk-caption-xs govuk-!-margin-0">'+e.value.text+"</div></td>"},element:"tr"},searchEngine:function(e,t){return t},onSelection:function(e){n.value=e.selection.value.text},maxResults:15});var r=document.getElementById("control_list_entries"),i=document.getElementById("control_rating");i.style.display="none",o(i);var a=document.createElement("div");function o(e){e.parentElement.classList.add("tokenfield-container");for(var n=[],r=[],i=0;i<e.options.length;i++){var a=e.options.item(i),o={id:a.value,name:a.value,classes:[]};a.selected&&r.push(o),n.push(o)}var u=new t.default({el:e,items:n,newItems:!1,addItemOnBlur:!0,filterSetItems:!1,addItemsOnPaste:!0,minChars:1,itemName:e.name,setItems:r});return u._renderItem=function(){var e=t.default.prototype._renderItem.apply(this,arguments),n=e.querySelector(".item-input");return n.setAttribute("name",n.name.replace("[]","")),e},u._renderItems(),u._html.container.id=e.id,e.remove(),u}r.parentElement.appendChild(a),o(r).on("change",function(e){var t=e.getItems().filter(function(e){return null!==e.name.match(/[a-zA-Z]$/)}).map(function(e){return"<div>"+e.name+" may need an alternative control list entry because of its destination</div>"});t.length>0?a.innerHTML="<div class='govuk-inset-text'>"+t.join("")+"</div>":a.innerHTML=""})}();
},{"url-search-params-polyfill":"Ytat","fetch-polyfill":"CigZ","@tarekraafat/autocomplete.js":"la8t","tokenfield":"xeEx"}]},{},["XQJZ"], null)
//# sourceMappingURL=/assets/review-good.js.map