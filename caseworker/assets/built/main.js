!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function t(e){return e&&e.__esModule?e.default:e}var n={};function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function l(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function d(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(e){return e&&e.constructor===Symbol?"symbol":typeof e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){return h(e)}function m(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?i(e):t}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return m(this,n)}}!function(e,t){"object"==typeof n?t(n):"function"==typeof define&&define.amd?define("GOVUKFrontend",["exports"],t):t(e.GOVUKFrontend={})}(void 0,(function(t){"use strict";var n=function(e,t){if(window.NodeList.prototype.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t.call(window,e[n],n,e)},i=function(e){this.$module=e,this.moduleId=e.getAttribute("id"),this.$sections=e.querySelectorAll(".govuk-accordion__section"),this.$openAllButton="",this.browserSupportsSessionStorage=p.checkForSessionStorage(),this.controlsClass="govuk-accordion__controls",this.openAllClass="govuk-accordion__open-all",this.iconClass="govuk-accordion__icon",this.sectionHeaderClass="govuk-accordion__section-header",this.sectionHeaderFocusedClass="govuk-accordion__section-header--focused",this.sectionHeadingClass="govuk-accordion__section-heading",this.sectionSummaryClass="govuk-accordion__section-summary",this.sectionButtonClass="govuk-accordion__section-button",this.sectionExpandedClass="govuk-accordion__section--expanded"},o=function(e){this.$module=e,this.debounceFormSubmitTimer=null},r=function(e){this.$module=e},s=function(e){this.$module=e,this.$textarea=e.querySelector(".govuk-js-character-count"),this.$textarea&&(this.$countMessage=e.querySelector('[id="'+this.$textarea.id+'-info"]'))},a=function(e){this.$module=e,this.$inputs=e.querySelectorAll('input[type="checkbox"]')},u=function(e){this.$module=e},c=function(e){this.$module=e},l=function(e){this.$module=e,this.$menuButton=e&&e.querySelector(".govuk-js-header-toggle"),this.$menu=this.$menuButton&&e.querySelector("#"+this.$menuButton.getAttribute("aria-controls"))},d=function(e){this.$module=e,this.$inputs=e.querySelectorAll('input[type="radio"]')},h=function(e){this.$module=e,this.$tabs=e.querySelectorAll(".govuk-tabs__tab"),this.keys={left:37,right:39,up:38,down:40},this.jsHiddenClass="govuk-tabs__panel--hidden"};(function(e){var t,n,i,o;"defineProperty"in Object&&function(){try{return Object.defineProperty({},"test",{value:42}),!0}catch(e){return!1}}()||(t=Object.defineProperty,n=Object.prototype.hasOwnProperty("__defineGetter__"),i="Getters & setters cannot be defined on this javascript engine",o="A property cannot both have accessors and be writable or have a value",Object.defineProperty=function(e,r,s){if(t&&(e===window||e===document||e===Element.prototype||e instanceof Element))return t(e,r,s);if(null===e||!(e instanceof Object||"object"==typeof e))throw new TypeError("Object.defineProperty called on non-object");if(!(s instanceof Object))throw new TypeError("Property description must be an object");var a=String(r),u="value"in s||"writable"in s,c="get"in s&&f(s.get),l="set"in s&&f(s.set);if(c){if("function"!==c)throw new TypeError("Getter must be a function");if(!n)throw new TypeError(i);if(u)throw new TypeError(o);Object.__defineGetter__.call(e,a,s.get)}else e[a]=s.value;if(l){if("function"!==l)throw new TypeError("Setter must be a function");if(!n)throw new TypeError(i);if(u)throw new TypeError(o);Object.__defineSetter__.call(e,a,s.set)}return"value"in s&&(e[a]=s.value),e})}).call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{}),function(e){"bind"in Function.prototype||Object.defineProperty(Function.prototype,"bind",{value:function(e){var t,n=Array,i=Object,o=i.prototype,r=n.prototype,s=function(){},a=o.toString,u="function"==typeof Symbol&&"symbol"===f(Symbol.toStringTag),c=Function.prototype.toString,l=function(e){try{return c.call(e),!0}catch(e){return!1}},d="[object Function]",h="[object GeneratorFunction]";t=function(e){if("function"!=typeof e)return!1;if(u)return l(e);var t=a.call(e);return t===d||t===h};var p=r.slice,m=r.concat,v=r.push,g=Math.max,y=this;if(!t(y))throw new TypeError("Function.prototype.bind called on incompatible "+y);for(var b,w=p.call(arguments,1),_=function(){if(this instanceof b){var t=y.apply(this,m.call(w,p.call(arguments)));return i(t)===t?t:this}return y.apply(e,m.call(w,p.call(arguments)))},k=g(0,y.length-w.length),E=[],x=0;x<k;x++)v.call(E,"$"+x);return b=Function("binder","return function ("+E.join(",")+"){ return binder.apply(this, arguments); }")(_),y.prototype&&(s.prototype=y.prototype,b.prototype=new s,s.prototype=null),b}})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{}),function(e){var t;"DOMTokenList"in this&&(!("classList"in(t=document.createElement("x")))||!t.classList.toggle("x",!1)&&!t.className)||function(t){var n;"DOMTokenList"in t&&t.DOMTokenList&&(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg")||document.createElementNS("http://www.w3.org/2000/svg","svg").classList instanceof DOMTokenList)||(t.DOMTokenList=function(){var t=!0,n=function(e,n,i,o){Object.defineProperty?Object.defineProperty(e,n,{configurable:!1===t||!!o,get:i}):e.__defineGetter__(n,i)};try{n({},"support")}catch(e){t=!1}return function(t,i){var o=this,r=[],s={},a=0,u=0,c=function(e){n(o,e,(function(){return d(),r[e]}),!1)},l=function(){if(a>=u)for(;u<a;++u)c(u)},d=function(){var e,n,o=arguments,u=/\s+/;if(o.length)for(n=0;n<o.length;++n)if(u.test(o[n]))throw(e=new SyntaxError('String "'+o[n]+'" contains an invalid character')).code=5,e.name="InvalidCharacterError",e;for(""===(r="object"==typeof t[i]?(""+t[i].baseVal).replace(/^\s+|\s+$/g,"").split(u):(""+t[i]).replace(/^\s+|\s+$/g,"").split(u))[0]&&(r=[]),s={},n=0;n<r.length;++n)s[r[n]]=!0;a=r.length,l()};return d(),n(o,"length",(function(){return d(),a})),o.toLocaleString=o.toString=function(){return d(),r.join(" ")},o.item=function(e){return d(),r[e]},o.contains=function(e){return d(),!!s[e]},o.add=function(){d.apply(o,e=arguments);for(var e,n,u=0,c=e.length;u<c;++u)n=e[u],s[n]||(r.push(n),s[n]=!0);a!==r.length&&(a=r.length>>>0,"object"==typeof t[i]?t[i].baseVal=r.join(" "):t[i]=r.join(" "),l())},o.remove=function(){d.apply(o,e=arguments);for(var e,n={},u=0,c=[];u<e.length;++u)n[e[u]]=!0,delete s[e[u]];for(u=0;u<r.length;++u)n[r[u]]||c.push(r[u]);r=c,a=c.length>>>0,"object"==typeof t[i]?t[i].baseVal=r.join(" "):t[i]=r.join(" "),l()},o.toggle=function(t,n){return d.apply(o,[t]),e!==n?n?(o.add(t),!0):(o.remove(t),!1):s[t]?(o.remove(t),!1):(o.add(t),!0)},o}}()),"classList"in(n=document.createElement("span"))&&(n.classList.toggle("x",!1),n.classList.contains("x")&&(n.classList.constructor.prototype.toggle=function(t){var n=arguments[1];if(n===e){var i=!this.contains(t);return this[i?"add":"remove"](t),i}return this[(n=!!n)?"add":"remove"](t),n})),function(){var e=document.createElement("span");if("classList"in e&&(e.classList.add("a","b"),!e.classList.contains("b"))){var t=e.classList.constructor.prototype.add;e.classList.constructor.prototype.add=function(){for(var e=arguments,n=arguments.length,i=0;i<n;i++)t.call(this,e[i])}}}(),function(){var e=document.createElement("span");if("classList"in e&&(e.classList.add("a"),e.classList.add("b"),e.classList.remove("a","b"),e.classList.contains("b"))){var t=e.classList.constructor.prototype.remove;e.classList.constructor.prototype.remove=function(){for(var e=arguments,n=arguments.length,i=0;i<n;i++)t.call(this,e[i])}}}()}(this)}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{}),function(e){"Document"in this||"undefined"==typeof WorkerGlobalScope&&"function"!=typeof importScripts&&(this.HTMLDocument?this.Document=this.HTMLDocument:(this.Document=this.HTMLDocument=document.constructor=new Function("return function Document() {}")(),this.Document.prototype=document))}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{}),function(e){"Element"in this&&"HTMLElement"in this||function(){var e=function(){return c--||clearTimeout(t),!(!document.body||document.body.prototype||!/(complete|interactive)/.test(document.readyState))&&(s(document,!0),t&&document.body.prototype&&clearTimeout(t),!!document.body.prototype)};if(!window.Element||window.HTMLElement){window.Element=window.HTMLElement=new Function("return function Element() {}")();var t,n=document.appendChild(document.createElement("body")),i=n.appendChild(document.createElement("iframe")).contentWindow.document,o=Element.prototype=i.appendChild(i.createElement("*")),r={},s=function(e,t){var n,i,o,a=e.childNodes||[],u=-1;if(1===e.nodeType&&e.constructor!==Element)for(n in e.constructor=Element,r)i=r[n],e[n]=i;for(;o=t&&a[++u];)s(o,t);return e},a=document.getElementsByTagName("*"),u=document.createElement,c=100;o.attachEvent("onpropertychange",(function(e){for(var t,n=e.propertyName,i=!r.hasOwnProperty(n),s=o[n],u=r[n],c=-1;t=a[++c];)1===t.nodeType&&(i||t[n]===u)&&(t[n]=s);r[n]=s})),o.constructor=Element,o.hasAttribute||(o.hasAttribute=function(e){return null!==this.getAttribute(e)}),e()||(document.onreadystatechange=e,t=setInterval(e,25)),document.createElement=function(e){var t=u(String(e).toLowerCase());return s(t)},document.removeChild(n)}else window.HTMLElement=window.Element}()}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{}),function(e){var t;"document"in this&&"classList"in document.documentElement&&"Element"in this&&"classList"in Element.prototype&&((t=document.createElement("span")).classList.add("a","b"),t.classList.contains("b"))||function(e){var t=!0,n=function(e,n,i,o){Object.defineProperty?Object.defineProperty(e,n,{configurable:!1===t||!!o,get:i}):e.__defineGetter__(n,i)};try{n({},"support")}catch(e){t=!1}var i=function(e,o,r){n(e.prototype,o,(function(){var e,s=this,a="__defineGetter__DEFINE_PROPERTY"+o;if(s[a])return e;if(s[a]=!0,!1===t){for(var u,c=i.mirror||document.createElement("div"),l=c.childNodes,d=l.length,f=0;f<d;++f)if(l[f]._R===s){u=l[f];break}u||(u=c.appendChild(document.createElement("div"))),e=DOMTokenList.call(u,s,r)}else e=new DOMTokenList(s,r);return n(s,o,(function(){return e})),delete s[a],e}),!0)};i(e.Element,"classList","className"),i(e.HTMLElement,"classList","className"),i(e.HTMLLinkElement,"relList","rel"),i(e.HTMLAnchorElement,"relList","rel"),i(e.HTMLAreaElement,"relList","rel")}(this)}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{}),i.prototype.init=function(){if(this.$module){this.initControls(),this.initSectionHeaders();var e=this.checkIfAllSectionsOpen();this.updateOpenAllButton(e)}},i.prototype.initControls=function(){this.$openAllButton=document.createElement("button"),this.$openAllButton.setAttribute("type","button"),this.$openAllButton.innerHTML='Open all <span class="govuk-visually-hidden">sections</span>',this.$openAllButton.setAttribute("class",this.openAllClass),this.$openAllButton.setAttribute("aria-expanded","false"),this.$openAllButton.setAttribute("type","button");var e=document.createElement("div");e.setAttribute("class",this.controlsClass),e.appendChild(this.$openAllButton),this.$module.insertBefore(e,this.$module.firstChild),this.$openAllButton.addEventListener("click",this.onOpenOrCloseAllToggle.bind(this))},i.prototype.initSectionHeaders=function(){n(this.$sections,function(e,t){var n=e.querySelector("."+this.sectionHeaderClass);this.initHeaderAttributes(n,t),this.setExpanded(this.isExpanded(e),e),n.addEventListener("click",this.onSectionToggle.bind(this,e)),this.setInitialState(e)}.bind(this))},i.prototype.initHeaderAttributes=function(e,t){var n=this,i=e.querySelector("."+this.sectionButtonClass),o=e.querySelector("."+this.sectionHeadingClass),r=e.querySelector("."+this.sectionSummaryClass),s=document.createElement("button");s.setAttribute("type","button"),s.setAttribute("id",this.moduleId+"-heading-"+(t+1)),s.setAttribute("aria-controls",this.moduleId+"-content-"+(t+1));for(var a=0;a<i.attributes.length;a++){var u=i.attributes.item(a);s.setAttribute(u.nodeName,u.nodeValue)}s.addEventListener("focusin",(function(t){e.classList.contains(n.sectionHeaderFocusedClass)||(e.className+=" "+n.sectionHeaderFocusedClass)})),s.addEventListener("blur",(function(t){e.classList.remove(n.sectionHeaderFocusedClass)})),null!=r&&s.setAttribute("aria-describedby",this.moduleId+"-summary-"+(t+1)),s.innerHTML=i.innerHTML,o.removeChild(i),o.appendChild(s);var c=document.createElement("span");c.className=this.iconClass,c.setAttribute("aria-hidden","true"),s.appendChild(c)},i.prototype.onSectionToggle=function(e){var t=this.isExpanded(e);this.setExpanded(!t,e),this.storeState(e)},i.prototype.onOpenOrCloseAllToggle=function(){var e=this,t=this.$sections,i=!this.checkIfAllSectionsOpen();n(t,(function(t){e.setExpanded(i,t),e.storeState(t)})),e.updateOpenAllButton(i)},i.prototype.setExpanded=function(e,t){t.querySelector("."+this.sectionButtonClass).setAttribute("aria-expanded",e),e?t.classList.add(this.sectionExpandedClass):t.classList.remove(this.sectionExpandedClass);var n=this.checkIfAllSectionsOpen();this.updateOpenAllButton(n)},i.prototype.isExpanded=function(e){return e.classList.contains(this.sectionExpandedClass)},i.prototype.checkIfAllSectionsOpen=function(){return this.$sections.length===this.$module.querySelectorAll("."+this.sectionExpandedClass).length},i.prototype.updateOpenAllButton=function(e){var t=e?"Close all":"Open all";t+='<span class="govuk-visually-hidden"> sections</span>',this.$openAllButton.setAttribute("aria-expanded",e),this.$openAllButton.innerHTML=t};var p={checkForSessionStorage:function(){var e,t="this is the test string";try{return window.sessionStorage.setItem(t,t),e=window.sessionStorage.getItem(t)===t.toString(),window.sessionStorage.removeItem(t),e}catch(e){"undefined"!=typeof console&&void 0!==console.log||console.log("Notice: sessionStorage not available.")}}};i.prototype.storeState=function(e){if(this.browserSupportsSessionStorage){var t=e.querySelector("."+this.sectionButtonClass);if(t){var n=t.getAttribute("aria-controls"),i=t.getAttribute("aria-expanded");void 0!==n||"undefined"!=typeof console&&void 0!==console.log||console.error(new Error("No aria controls present in accordion section heading.")),void 0!==i||"undefined"!=typeof console&&void 0!==console.log||console.error(new Error("No aria expanded present in accordion section heading.")),n&&i&&window.sessionStorage.setItem(n,i)}}},i.prototype.setInitialState=function(e){if(this.browserSupportsSessionStorage){var t=e.querySelector("."+this.sectionButtonClass);if(t){var n=t.getAttribute("aria-controls"),i=n?window.sessionStorage.getItem(n):null;null!==i&&this.setExpanded("true"===i,e)}}},function(e){"Window"in this||"undefined"==typeof WorkerGlobalScope&&"function"!=typeof importScripts&&function(e){e.constructor?e.Window=e.constructor:(e.Window=e.constructor=new Function("return function Window() {}")()).prototype=this}(this)}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{}),function(e){(function(e){if(!("Event"in e))return!1;if("function"==typeof e.Event)return!0;try{return new Event("click"),!0}catch(e){return!1}})(this)||function(){var t=function(e,t){for(var n=-1,i=e.length;++n<i;)if(n in e&&e[n]===t)return n;return-1},n={click:1,dblclick:1,keyup:1,keypress:1,keydown:1,mousedown:1,mouseup:1,mousemove:1,mouseover:1,mouseenter:1,mouseleave:1,mouseout:1,storage:1,storagecommit:1,textinput:1};if("undefined"!=typeof document&&"undefined"!=typeof window){var i=window.Event&&window.Event.prototype||null;window.Event=Window.prototype.Event=function(t,n){if(!t)throw new Error("Not enough arguments");var i;if("createEvent"in document){i=document.createEvent("Event");var o=!(!n||n.bubbles===e)&&n.bubbles,r=!(!n||n.cancelable===e)&&n.cancelable;return i.initEvent(t,o,r),i}return(i=document.createEventObject()).type=t,i.bubbles=!(!n||n.bubbles===e)&&n.bubbles,i.cancelable=!(!n||n.cancelable===e)&&n.cancelable,i},i&&Object.defineProperty(window.Event,"prototype",{configurable:!1,enumerable:!1,writable:!0,value:i}),"createEvent"in document||(window.addEventListener=Window.prototype.addEventListener=Document.prototype.addEventListener=Element.prototype.addEventListener=function(){var e=this,i=arguments[0],o=arguments[1];if(e===window&&i in n)throw new Error("In IE8 the event: "+i+" is not available on the window object. Please see https://github.com/Financial-Times/polyfill-service/issues/317 for more information.");e._events||(e._events={}),e._events[i]||(e._events[i]=function(n){var i,o=e._events[n.type].list,r=o.slice(),s=-1,a=r.length;for(n.preventDefault=function(){!1!==n.cancelable&&(n.returnValue=!1)},n.stopPropagation=function(){n.cancelBubble=!0},n.stopImmediatePropagation=function(){n.cancelBubble=!0,n.cancelImmediate=!0},n.currentTarget=e,n.relatedTarget=n.fromElement||null,n.target=n.target||n.srcElement||e,n.timeStamp=(new Date).getTime(),n.clientX&&(n.pageX=n.clientX+document.documentElement.scrollLeft,n.pageY=n.clientY+document.documentElement.scrollTop);++s<a&&!n.cancelImmediate;)s in r&&(i=r[s],-1!==t(o,i)&&"function"==typeof i&&i.call(e,n))},e._events[i].list=[],e.attachEvent&&e.attachEvent("on"+i,e._events[i])),e._events[i].list.push(o)},window.removeEventListener=Window.prototype.removeEventListener=Document.prototype.removeEventListener=Element.prototype.removeEventListener=function(){var e,n=this,i=arguments[0],o=arguments[1];n._events&&n._events[i]&&n._events[i].list&&-1!==(e=t(n._events[i].list,o))&&(n._events[i].list.splice(e,1),n._events[i].list.length||(n.detachEvent&&n.detachEvent("on"+i,n._events[i]),delete n._events[i]))},window.dispatchEvent=Window.prototype.dispatchEvent=Document.prototype.dispatchEvent=Element.prototype.dispatchEvent=function(e){if(!arguments.length)throw new Error("Not enough arguments");if(!e||"string"!=typeof e.type)throw new Error("DOM Events Exception 0");var t=this,n=e.type;try{if(!e.bubbles){e.cancelBubble=!0;var i=function(e){e.cancelBubble=!0,(t||window).detachEvent("on"+n,i)};this.attachEvent("on"+n,i)}this.fireEvent("on"+n,e)}catch(i){e.target=t;do{e.currentTarget=t,"_events"in t&&"function"==typeof t._events[n]&&t._events[n].call(t,e),"function"==typeof t["on"+n]&&t["on"+n].call(t,e),t=9===t.nodeType?t.parentWindow:t.parentNode}while(t&&!e.cancelBubble)}return!0},document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:!0}))})))}}()}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{});o.prototype.handleKeyDown=function(e){var t=e.target;"button"===t.getAttribute("role")&&32===e.keyCode&&(e.preventDefault(),t.click())},o.prototype.debounce=function(e){if("true"===e.target.getAttribute("data-prevent-double-click"))return this.debounceFormSubmitTimer?(e.preventDefault(),!1):void(this.debounceFormSubmitTimer=setTimeout(function(){this.debounceFormSubmitTimer=null}.bind(this),1e3))},o.prototype.init=function(){this.$module.addEventListener("keydown",this.handleKeyDown),this.$module.addEventListener("click",this.debounce)};r.prototype.init=function(){this.$module&&("boolean"==typeof this.$module.open||this.polyfillDetails())},r.prototype.polyfillDetails=function(){var e,t=this.$module,n=this.$summary=t.getElementsByTagName("summary").item(0),i=this.$content=t.getElementsByTagName("div").item(0);n&&i&&(i.id||(i.id="details-content-"+(e=(new Date).getTime(),void 0!==window.performance&&"function"==typeof window.performance.now&&(e+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})))),t.setAttribute("role","group"),n.setAttribute("role","button"),n.setAttribute("aria-controls",i.id),n.tabIndex=0,!0===(null!==t.getAttribute("open"))?(n.setAttribute("aria-expanded","true"),i.setAttribute("aria-hidden","false")):(n.setAttribute("aria-expanded","false"),i.setAttribute("aria-hidden","true"),i.style.display="none"),this.polyfillHandleInputs(n,this.polyfillSetAttributes.bind(this)))},r.prototype.polyfillSetAttributes=function(){var e=this.$module,t=this.$summary,n=this.$content,i="true"===t.getAttribute("aria-expanded"),o="true"===n.getAttribute("aria-hidden");return t.setAttribute("aria-expanded",i?"false":"true"),n.setAttribute("aria-hidden",o?"false":"true"),n.style.display=i?"none":"",null!==e.getAttribute("open")?e.removeAttribute("open"):e.setAttribute("open","open"),!0},r.prototype.polyfillHandleInputs=function(e,t){e.addEventListener("keypress",(function(e){var n=e.target;13!==e.keyCode&&32!==e.keyCode||"summary"===n.nodeName.toLowerCase()&&(e.preventDefault(),n.click?n.click():t(e))})),e.addEventListener("keyup",(function(e){var t=e.target;32===e.keyCode&&"summary"===t.nodeName.toLowerCase()&&e.preventDefault()})),e.addEventListener("click",t)},s.prototype.defaults={characterCountAttribute:"data-maxlength",wordCountAttribute:"data-maxwords"},s.prototype.init=function(){var e=this.$module,t=this.$textarea,n=this.$countMessage;if(t&&n){t.insertAdjacentElement("afterend",n),this.options=this.getDataset(e);var i=this.defaults.characterCountAttribute;this.options.maxwords&&(i=this.defaults.wordCountAttribute),this.maxLength=e.getAttribute(i),this.maxLength&&(e.removeAttribute("maxlength"),"onpageshow"in window?window.addEventListener("pageshow",this.sync.bind(this)):window.addEventListener("DOMContentLoaded",this.sync.bind(this)),this.sync())}},s.prototype.sync=function(){this.bindChangeEvents(),this.updateCountMessage()},s.prototype.getDataset=function(e){var t={},n=e.attributes;if(n)for(var i=0;i<n.length;i++){var o=n[i],r=o.name.match(/^data-(.+)/);r&&(t[r[1]]=o.value)}return t},s.prototype.count=function(e){var t;this.options.maxwords?t=(e.match(/\S+/g)||[]).length:t=e.length;return t},s.prototype.bindChangeEvents=function(){var e=this.$textarea;e.addEventListener("keyup",this.checkIfValueChanged.bind(this)),e.addEventListener("focus",this.handleFocus.bind(this)),e.addEventListener("blur",this.handleBlur.bind(this))},s.prototype.checkIfValueChanged=function(){this.$textarea.oldValue||(this.$textarea.oldValue=""),this.$textarea.value!==this.$textarea.oldValue&&(this.$textarea.oldValue=this.$textarea.value,this.updateCountMessage())},s.prototype.updateCountMessage=function(){var e=this.$textarea,t=this.options,n=this.$countMessage,i=this.count(e.value),o=this.maxLength,r=o-i;o*(t.threshold?t.threshold:0)/100>i?(n.classList.add("govuk-character-count__message--disabled"),n.setAttribute("aria-hidden",!0)):(n.classList.remove("govuk-character-count__message--disabled"),n.removeAttribute("aria-hidden")),r<0?(e.classList.add("govuk-textarea--error"),n.classList.remove("govuk-hint"),n.classList.add("govuk-error-message")):(e.classList.remove("govuk-textarea--error"),n.classList.remove("govuk-error-message"),n.classList.add("govuk-hint"));var s,a,u="character";t.maxwords&&(u="word"),u+=-1===r||1===r?"":"s",s=r<0?"too many":"remaining",a=Math.abs(r),n.innerHTML="You have "+a+" "+u+" "+s},s.prototype.handleFocus=function(){this.valueChecker=setInterval(this.checkIfValueChanged.bind(this),1e3)},s.prototype.handleBlur=function(){clearInterval(this.valueChecker)},a.prototype.init=function(){var e=this.$module,t=this.$inputs;n(t,(function(t){var n=t.getAttribute("data-aria-controls");n&&e.querySelector("#"+n)&&(t.setAttribute("aria-controls",n),t.removeAttribute("data-aria-controls"))})),"onpageshow"in window?window.addEventListener("pageshow",this.syncAllConditionalReveals.bind(this)):window.addEventListener("DOMContentLoaded",this.syncAllConditionalReveals.bind(this)),this.syncAllConditionalReveals(),e.addEventListener("click",this.handleClick.bind(this))},a.prototype.syncAllConditionalReveals=function(){n(this.$inputs,this.syncConditionalRevealWithInputState.bind(this))},a.prototype.syncConditionalRevealWithInputState=function(e){var t=this.$module.querySelector("#"+e.getAttribute("aria-controls"));if(t&&t.classList.contains("govuk-checkboxes__conditional")){var n=e.checked;e.setAttribute("aria-expanded",n),t.classList.toggle("govuk-checkboxes__conditional--hidden",!n)}},a.prototype.unCheckAllInputsExcept=function(e){var t=document.querySelectorAll('input[type="checkbox"][name="'+e.name+'"]');n(t,(function(t){e.form===t.form&&t!==e&&(t.checked=!1)})),this.syncAllConditionalReveals()},a.prototype.unCheckExclusiveInputs=function(e){var t=document.querySelectorAll('input[data-behaviour="exclusive"][type="checkbox"][name="'+e.name+'"]');n(t,(function(t){e.form===t.form&&(t.checked=!1)})),this.syncAllConditionalReveals()},a.prototype.handleClick=function(e){var t=e.target;"checkbox"===t.type&&(t.getAttribute("aria-controls")&&this.syncConditionalRevealWithInputState(t),t.checked&&("exclusive"===t.getAttribute("data-behaviour")?this.unCheckAllInputsExcept(t):this.unCheckExclusiveInputs(t)))},function(e){"document"in this&&"matches"in document.documentElement||(Element.prototype.matches=Element.prototype.webkitMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector||function(e){for(var t=this,n=(t.document||t.ownerDocument).querySelectorAll(e),i=0;n[i]&&n[i]!==t;)++i;return!!n[i]})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{}),function(e){"document"in this&&"closest"in document.documentElement||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t="SVGElement"in window&&t instanceof SVGElement?t.parentNode:t.parentElement}return null})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{}),u.prototype.init=function(){var e=this.$module;e&&(e.focus(),e.addEventListener("click",this.handleClick.bind(this)))},u.prototype.handleClick=function(e){var t=e.target;this.focusTarget(t)&&e.preventDefault()},u.prototype.focusTarget=function(e){if("A"!==e.tagName||!1===e.href)return!1;var t=this.getFragmentFromUrl(e.href),n=document.getElementById(t);if(!n)return!1;var i=this.getAssociatedLegendOrLabel(n);return!!i&&(i.scrollIntoView(),n.focus({preventScroll:!0}),!0)},u.prototype.getFragmentFromUrl=function(e){return-1!==e.indexOf("#")&&e.split("#").pop()},u.prototype.getAssociatedLegendOrLabel=function(e){var t=e.closest("fieldset");if(t){var n=t.getElementsByTagName("legend");if(n.length){var i=n[0];if("checkbox"===e.type||"radio"===e.type)return i;var o=i.getBoundingClientRect().top,r=e.getBoundingClientRect();if(r.height&&window.innerHeight)if(r.top+r.height-o<window.innerHeight/2)return i}}return document.querySelector("label[for='"+e.getAttribute("id")+"']")||e.closest("label")},c.prototype.init=function(){this.$module&&this.setFocus()},c.prototype.setFocus=function(){var e=this.$module;"true"!==e.getAttribute("data-disable-auto-focus")&&"alert"===e.getAttribute("role")&&(e.getAttribute("tabindex")||(e.setAttribute("tabindex","-1"),e.addEventListener("blur",(function(){e.removeAttribute("tabindex")}))),e.focus())},l.prototype.init=function(){this.$module&&this.$menuButton&&this.$menu&&(this.syncState(this.$menu.classList.contains("govuk-header__navigation--open")),this.$menuButton.addEventListener("click",this.handleMenuButtonClick.bind(this)))},l.prototype.syncState=function(e){this.$menuButton.classList.toggle("govuk-header__menu-button--open",e),this.$menuButton.setAttribute("aria-expanded",e)},l.prototype.handleMenuButtonClick=function(){var e=this.$menu.classList.toggle("govuk-header__navigation--open");this.syncState(e)},d.prototype.init=function(){var e=this.$module,t=this.$inputs;n(t,(function(t){var n=t.getAttribute("data-aria-controls");n&&e.querySelector("#"+n)&&(t.setAttribute("aria-controls",n),t.removeAttribute("data-aria-controls"))})),"onpageshow"in window?window.addEventListener("pageshow",this.syncAllConditionalReveals.bind(this)):window.addEventListener("DOMContentLoaded",this.syncAllConditionalReveals.bind(this)),this.syncAllConditionalReveals(),e.addEventListener("click",this.handleClick.bind(this))},d.prototype.syncAllConditionalReveals=function(){n(this.$inputs,this.syncConditionalRevealWithInputState.bind(this))},d.prototype.syncConditionalRevealWithInputState=function(e){var t=document.querySelector("#"+e.getAttribute("aria-controls"));if(t&&t.classList.contains("govuk-radios__conditional")){var n=e.checked;e.setAttribute("aria-expanded",n),t.classList.toggle("govuk-radios__conditional--hidden",!n)}},d.prototype.handleClick=function(e){var t=e.target;if("radio"===t.type){var i=document.querySelectorAll('input[type="radio"][aria-controls]');n(i,function(e){var n=e.form===t.form;e.name===t.name&&n&&this.syncConditionalRevealWithInputState(e)}.bind(this))}},function(e){"document"in this&&"nextElementSibling"in document.documentElement||Object.defineProperty(Element.prototype,"nextElementSibling",{get:function(){for(var e=this.nextSibling;e&&1!==e.nodeType;)e=e.nextSibling;return e}})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{}),function(e){"document"in this&&"previousElementSibling"in document.documentElement||Object.defineProperty(Element.prototype,"previousElementSibling",{get:function(){for(var e=this.previousSibling;e&&1!==e.nodeType;)e=e.previousSibling;return e}})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{}),h.prototype.init=function(){"function"==typeof window.matchMedia?this.setupResponsiveChecks():this.setup()},h.prototype.setupResponsiveChecks=function(){this.mql=window.matchMedia("(min-width: 40.0625em)"),this.mql.addListener(this.checkMode.bind(this)),this.checkMode()},h.prototype.checkMode=function(){this.mql.matches?this.setup():this.teardown()},h.prototype.setup=function(){var e=this.$module,t=this.$tabs,i=e.querySelector(".govuk-tabs__list"),o=e.querySelectorAll(".govuk-tabs__list-item");if(t&&i&&o){i.setAttribute("role","tablist"),n(o,(function(e){e.setAttribute("role","presentation")})),n(t,function(e){this.setAttributes(e),e.boundTabClick=this.onTabClick.bind(this),e.boundTabKeydown=this.onTabKeydown.bind(this),e.addEventListener("click",e.boundTabClick,!0),e.addEventListener("keydown",e.boundTabKeydown,!0),this.hideTab(e)}.bind(this));var r=this.getTab(window.location.hash)||this.$tabs[0];this.showTab(r),e.boundOnHashChange=this.onHashChange.bind(this),window.addEventListener("hashchange",e.boundOnHashChange,!0)}},h.prototype.teardown=function(){var e=this.$module,t=this.$tabs,i=e.querySelector(".govuk-tabs__list"),o=e.querySelectorAll(".govuk-tabs__list-item");t&&i&&o&&(i.removeAttribute("role"),n(o,(function(e){e.removeAttribute("role","presentation")})),n(t,function(e){e.removeEventListener("click",e.boundTabClick,!0),e.removeEventListener("keydown",e.boundTabKeydown,!0),this.unsetAttributes(e)}.bind(this)),window.removeEventListener("hashchange",e.boundOnHashChange,!0))},h.prototype.onHashChange=function(e){var t=window.location.hash,n=this.getTab(t);if(n)if(this.changingHash)this.changingHash=!1;else{var i=this.getCurrentTab();this.hideTab(i),this.showTab(n),n.focus()}},h.prototype.hideTab=function(e){this.unhighlightTab(e),this.hidePanel(e)},h.prototype.showTab=function(e){this.highlightTab(e),this.showPanel(e)},h.prototype.getTab=function(e){return this.$module.querySelector('.govuk-tabs__tab[href="'+e+'"]')},h.prototype.setAttributes=function(e){var t=this.getHref(e).slice(1);e.setAttribute("id","tab_"+t),e.setAttribute("role","tab"),e.setAttribute("aria-controls",t),e.setAttribute("aria-selected","false"),e.setAttribute("tabindex","-1");var n=this.getPanel(e);n.setAttribute("role","tabpanel"),n.setAttribute("aria-labelledby",e.id),n.classList.add(this.jsHiddenClass)},h.prototype.unsetAttributes=function(e){e.removeAttribute("id"),e.removeAttribute("role"),e.removeAttribute("aria-controls"),e.removeAttribute("aria-selected"),e.removeAttribute("tabindex");var t=this.getPanel(e);t.removeAttribute("role"),t.removeAttribute("aria-labelledby"),t.classList.remove(this.jsHiddenClass)},h.prototype.onTabClick=function(e){if(!e.target.classList.contains("govuk-tabs__tab"))return!1;e.preventDefault();var t=e.target,n=this.getCurrentTab();this.hideTab(n),this.showTab(t),this.createHistoryEntry(t)},h.prototype.createHistoryEntry=function(e){var t=this.getPanel(e),n=t.id;t.id="",this.changingHash=!0,window.location.hash=this.getHref(e).slice(1),t.id=n},h.prototype.onTabKeydown=function(e){switch(e.keyCode){case this.keys.left:case this.keys.up:this.activatePreviousTab(),e.preventDefault();break;case this.keys.right:case this.keys.down:this.activateNextTab(),e.preventDefault()}},h.prototype.activateNextTab=function(){var e=this.getCurrentTab(),t=e.parentNode.nextElementSibling;if(t)var n=t.querySelector(".govuk-tabs__tab");n&&(this.hideTab(e),this.showTab(n),n.focus(),this.createHistoryEntry(n))},h.prototype.activatePreviousTab=function(){var e=this.getCurrentTab(),t=e.parentNode.previousElementSibling;if(t)var n=t.querySelector(".govuk-tabs__tab");n&&(this.hideTab(e),this.showTab(n),n.focus(),this.createHistoryEntry(n))},h.prototype.getPanel=function(e){return this.$module.querySelector(this.getHref(e))},h.prototype.showPanel=function(e){this.getPanel(e).classList.remove(this.jsHiddenClass)},h.prototype.hidePanel=function(e){this.getPanel(e).classList.add(this.jsHiddenClass)},h.prototype.unhighlightTab=function(e){e.setAttribute("aria-selected","false"),e.parentNode.classList.remove("govuk-tabs__list-item--selected"),e.setAttribute("tabindex","-1")},h.prototype.highlightTab=function(e){e.setAttribute("aria-selected","true"),e.parentNode.classList.add("govuk-tabs__list-item--selected"),e.setAttribute("tabindex","0")},h.prototype.getCurrentTab=function(){return this.$module.querySelector(".govuk-tabs__list-item--selected .govuk-tabs__tab")},h.prototype.getHref=function(e){var t=e.getAttribute("href");return t.slice(t.indexOf("#"),t.length)},t.initAll=function(e){var t=void 0!==(e=void 0!==e?e:{}).scope?e.scope:document,f=t.querySelectorAll('[data-module="govuk-button"]');n(f,(function(e){new o(e).init()}));var p=t.querySelectorAll('[data-module="govuk-accordion"]');n(p,(function(e){new i(e).init()}));var m=t.querySelectorAll('[data-module="govuk-details"]');n(m,(function(e){new r(e).init()}));var v=t.querySelectorAll('[data-module="govuk-character-count"]');n(v,(function(e){new s(e).init()}));var g=t.querySelectorAll('[data-module="govuk-checkboxes"]');n(g,(function(e){new a(e).init()}));var y=t.querySelector('[data-module="govuk-error-summary"]');new u(y).init();var b=t.querySelector('[data-module="govuk-header"]');new l(b).init();var w=t.querySelectorAll('[data-module="govuk-notification-banner"]');n(w,(function(e){new c(e).init()}));var _=t.querySelectorAll('[data-module="govuk-radios"]');n(_,(function(e){new d(e).init()}));var k=t.querySelectorAll('[data-module="govuk-tabs"]');n(k,(function(e){new h(e).init()}))},t.Accordion=i,t.Button=o,t.Details=r,t.CharacterCount=s,t.Checkboxes=a,t.ErrorSummary=u,t.Header=l,t.Radios=d,t.Tabs=h})),$.fn.changeElementType=function(e){var t={};$.each(this[0].attributes,(function(e,n){t[n.nodeName]=n.nodeValue}));var n=$("<"+e+"/>",t).append($(this).contents());return this.replaceWith(n),n},$("[data-max-length]").each((function(){var e=$(this).html(),t=$(this).html().substring(0,$(this).data("max-length"));e.length!=t.length&&($(this).html(t+"..."),$("<a href='#' class='govuk-link govuk-link--no-visited-state govuk-!-margin-left-2'>More</a>").appendTo($(this)).attr("data-more-text",e))})),$("[data-more-text]").click((function(){return $(this).parent().html($(this).data("more-text")),!1})),$("[data-definition-title]").each((function(){$(this).addClass("lite-link--definition"),$(this).changeElementType("a").attr("href","#")})),$("[data-definition-title]").click((function(){var e=$(this).data("definition-subtitle"),t=$(this).data("definition-text"),n=$(this).data("definition-list");n&&(n=n.split(","));var i="<ol class='govuk-list govuk-list--number'>";if(n)for(var o=0;o<n.length;o++)i+="<li>"+n[o]+"</li>";return i+="</ol>",e&&(e="<p class='govuk-heading-s'>"+e+"</p>",t?t=e+t:i=e+i),LITECommon.Modal.showModal($(this).data("definition-title"),t||i,!1,!0,{maxWidth:"500px"}),!1})),$(".govuk-back-link").on("click",(function(){var e=$(this).attr("href");return"#"!=e?window.location.href=e:window.history.go(-1),!1}));var g="cookie_preferences_set",y=function(e,t,n){void 0===n&&(n={});var i=e+"="+t+"; path=/";if(n.days){var o=new Date;o.setTime(o.getTime()+864e5*n.days),i=i+"; expires="+o.toGMTString()}"https:"===document.location.protocol&&(i+="; Secure"),document.cookie=i},b="app-cookie-banner--show",w=function(){"use strict";function e(t,n){o(this,e),this.bannerClassName=t,this.banner=document.querySelector(".".concat(this.bannerClassName)),this.acceptAllButtonClassName=n}return s(e,[{key:"hasAcceptedCookePreferences",value:function(){var e=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0,o=n.length;i<o;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return decodeURIComponent(r.substring(t.length))}return null}(g);return Boolean(e)}},{key:"isExcludedPage",value:function(){var e=document.querySelector(".".concat("cookie-preferences"));return Boolean(e)}},{key:"shouldDisplay",value:function(){return Boolean(this.banner)&&!this.hasAcceptedCookePreferences()&&!this.isExcludedPage()}},{key:"acceptAllCookies",value:function(){!function(e,t,n){var i={essential:!0,settings:!1,usage:!1,campaigns:!1};i.settings=e||!1,i.usage=t||!1,i.campaigns=n||!1;var o=JSON.stringify(i);y("cookies_policy",o,{days:365})}(!1,!0,!1),y(g,"true",{days:365})}},{key:"hide",value:function(){this.banner.classList.remove(b)}},{key:"attachEvents",value:function(e){var t=this;e.querySelector(".".concat(this.acceptAllButtonClassName)).addEventListener("click",(function(){t.acceptAllCookies(),t.hide()}))}},{key:"display",value:function(){this.banner.classList.add(b),this.attachEvents(this.banner)}}]),e}(),_=function(e,t){var n=new w(e,t);n.shouldDisplay()&&n.display()};function k(){$("table").each((function(e,t){$(t).find(".lite-button-checkbox").attr("class","lite-button-checkbox"),$(t).find("input:checkbox:checked").length==$(t).find("input:checkbox").length?$(t).find(".lite-button-checkbox").addClass("lite-button-checkbox--checked"):0!=$(t).find("input:checkbox:checked").length&&$(t).find(".lite-button-checkbox").addClass("lite-button-checkbox--indeterminate"),$(t).find(".lite-button-checkbox").css("display","none").height(),$(t).find(".lite-button-checkbox").css("display","block")}))}function E(e){e.find(".govuk-button").each((function(){enableButton($(this))}))}function x(e){e.find(".govuk-button").each((function(){disableButton($(this))}))}function I(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function L(e){if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t?t.defaultView:window}return e}function S(e){var t=L(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function A(e){return e instanceof L(e).Element||e instanceof Element}function O(e){return e instanceof L(e).HTMLElement||e instanceof HTMLElement}function C(e){return e?(e.nodeName||"").toLowerCase():null}function T(e){return(A(e)?e.ownerDocument:e.document).documentElement}function j(e){return I(T(e)).left+S(e).scrollLeft}function D(e){return L(e).getComputedStyle(e)}function M(e){var t=D(e),n=t.overflow,i=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+i)}function P(e,t,n){void 0===n&&(n=!1);var i,o,r=T(t),s=I(e),a=O(t),u={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(a||!a&&!n)&&(("body"!==C(t)||M(r))&&(u=(i=t)!==L(i)&&O(i)?{scrollLeft:(o=i).scrollLeft,scrollTop:o.scrollTop}:S(i)),O(t)?((c=I(t)).x+=t.clientLeft,c.y+=t.clientTop):r&&(c.x=j(r))),{x:s.left+u.scrollLeft-c.x,y:s.top+u.scrollTop-c.y,width:s.width,height:s.height}}function N(e){return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}}function R(e){return"html"===C(e)?e:e.assignedSlot||e.parentNode||e.host||T(e)}function H(e){return["html","body","#document"].indexOf(C(e))>=0?e.ownerDocument.body:O(e)&&M(e)?e:H(R(e))}function B(e,t){void 0===t&&(t=[]);var n=H(e),i="body"===C(n),o=L(n),r=i?[o].concat(o.visualViewport||[],M(n)?n:[]):n,s=t.concat(r);return i?s:s.concat(B(R(r)))}function q(e){return["table","td","th"].indexOf(C(e))>=0}function F(e){if(!O(e)||"fixed"===D(e).position)return null;var t=e.offsetParent;if(t){var n=T(t);if("body"===C(t)&&"static"===D(t).position&&"static"!==D(n).position)return n}return t}function V(e){for(var t=L(e),n=F(e);n&&q(n)&&"static"===D(n).position;)n=F(n);return n&&"body"===C(n)&&"static"===D(n).position?t:n||function(e){for(var t=R(e);O(t)&&["html","body"].indexOf(C(t))<0;){var n=D(t);if("none"!==n.transform||"none"!==n.perspective||n.willChange&&"auto"!==n.willChange)return t;t=t.parentNode}return null}(e)||t}$("input:checkbox").change((function(){k()})),$(".lite-button-checkbox").click((function(){var e=$(this).closest("table");e.find("input:checkbox:checked").length==e.find("input:checkbox").length?e.find("input:checkbox").prop("checked",!1).change():e.find("input:checkbox").prop("checked",!0).change(),k()})),$(".lite-filter-bar").each((function(){var e=$(this).parent();e.hide(),e.prev().find("#show-filters-link").show(),e.prev().find("#hide-filters-link").hide(),$(this).find("input, select").each((function(){""!=$(this).val()&&"Select"!=$(this).val()&&"blank"!=$(this).val()&&"hidden"!=$(this).attr("type")&&("checkbox"!=$(this).attr("type")||"checkbox"==$(this).attr("type")&&$(this).attr("checked"))&&(e.show(),e.prev().find("#show-filters-link").hide(),e.prev().find("#hide-filters-link").show(),$(this).parents(".govuk-details").attr("open",""))}))})),$(".lite-filter-toggle-link").unbind().click((function(){return $(this).parent().next().toggle(),$(this).parent().find("> *").toggle(),!1})),$("[data-enable-on-checkboxes]").each((function(){var e=$(this),t=$($(this).data("enable-on-checkboxes")),n=$($(this).data("enable-on-checkboxes")+" .govuk-checkboxes__input");t.find(":checked").length>0?E(e):x(e),n.change((function(){t.find(":checked").length>0?E(e):x(e)}))})),$(".app-snackbar__close-link").click((function(){return $(this).parent().parent().hide(),!1}));var W="top",U="bottom",z="right",K="left",X="auto",G=[W,U,z,K],Y="start",J="end",Z="viewport",Q="popper",ee=G.reduce((function(e,t){return e.concat([t+"-"+Y,t+"-"+J])}),[]),te=[].concat(G,[X]).reduce((function(e,t){return e.concat([t,t+"-"+Y,t+"-"+J])}),[]),ne=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function ie(e){var t=new Map,n=new Set,i=[];function o(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var i=t.get(e);i&&o(i)}})),i.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||o(e)})),i}var oe={placement:"bottom",modifiers:[],strategy:"absolute"};function re(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function se(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,i=void 0===n?[]:n,o=t.defaultOptions,r=void 0===o?oe:o;return function(e,t,n){var o=function(){c.forEach((function(e){return e()})),c=[]};void 0===n&&(n=r);var s,a,u={placement:"bottom",orderedModifiers:[],options:Object.assign(Object.assign({},oe),r),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},c=[],l=!1,d={state:u,setOptions:function(n){o(),u.options=Object.assign(Object.assign(Object.assign({},r),u.options),n),u.scrollParents={reference:A(e)?B(e):e.contextElement?B(e.contextElement):[],popper:B(t)};var s=function(e){var t=ie(e);return ne.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign(Object.assign(Object.assign({},n),t),{},{options:Object.assign(Object.assign({},n.options),t.options),data:Object.assign(Object.assign({},n.data),t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(i,u.options.modifiers)));return u.orderedModifiers=s.filter((function(e){return e.enabled})),u.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,i=void 0===n?{}:n,o=e.effect;if("function"==typeof o){var r=o({state:u,name:t,instance:d,options:i});c.push(r||function(){})}})),d.update()},forceUpdate:function(){if(!l){var e=u.elements,t=e.reference,n=e.popper;if(re(t,n)){u.rects={reference:P(t,V(n),"fixed"===u.options.strategy),popper:N(n)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach((function(e){return u.modifiersData[e.name]=Object.assign({},e.data)}));for(var i=0;i<u.orderedModifiers.length;i++)if(!0!==u.reset){var o=u.orderedModifiers[i],r=o.fn,s=o.options,a=void 0===s?{}:s,c=o.name;"function"==typeof r&&(u=r({state:u,options:a,name:c,instance:d})||u)}else u.reset=!1,i=-1}}},update:(s=function(){return new Promise((function(e){d.forceUpdate(),e(u)}))},function(){return a||(a=new Promise((function(e){Promise.resolve().then((function(){a=void 0,e(s())}))}))),a}),destroy:function(){o(),l=!0}};return re(e,t)?(d.setOptions(n).then((function(e){!l&&n.onFirstUpdate&&n.onFirstUpdate(e)})),d):d}}var ae={passive:!0};function ue(e){return e.split("-")[0]}function ce(e){return e.split("-")[1]}function le(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function de(e){var t,n=e.reference,i=e.element,o=e.placement,r=o?ue(o):null,s=o?ce(o):null,a=n.x+n.width/2-i.width/2,u=n.y+n.height/2-i.height/2;switch(r){case W:t={x:a,y:n.y-i.height};break;case U:t={x:a,y:n.y+n.height};break;case z:t={x:n.x+n.width,y:u};break;case K:t={x:n.x-i.width,y:u};break;default:t={x:n.x,y:n.y}}var c=r?le(r):null;if(null!=c){var l="y"===c?"height":"width";switch(s){case Y:t[c]=Math.floor(t[c])-Math.floor(n[l]/2-i[l]/2);break;case J:t[c]=Math.floor(t[c])+Math.ceil(n[l]/2-i[l]/2)}}return t}var fe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function he(e){var t,n=e.popper,i=e.popperRect,o=e.placement,r=e.offsets,s=e.position,a=e.gpuAcceleration,u=e.adaptive,c=function(e){var t=e.x,n=e.y,i=window.devicePixelRatio||1;return{x:Math.round(t*i)/i||0,y:Math.round(n*i)/i||0}}(r),l=c.x,d=c.y,f=r.hasOwnProperty("x"),h=r.hasOwnProperty("y"),p=K,m=W,v=window;if(u){var g=V(n);g===L(n)&&(g=T(n)),o===W&&(m=U,d-=g.clientHeight-i.height,d*=a?1:-1),o===K&&(p=z,l-=g.clientWidth-i.width,l*=a?1:-1)}var y,b=Object.assign({position:s},u&&fe);return a?Object.assign(Object.assign({},b),{},((y={})[m]=h?"0":"",y[p]=f?"0":"",y.transform=(v.devicePixelRatio||1)<2?"translate("+l+"px, "+d+"px)":"translate3d("+l+"px, "+d+"px, 0)",y)):Object.assign(Object.assign({},b),{},((t={})[m]=h?d+"px":"",t[p]=f?l+"px":"",t.transform="",t))}var pe={left:"right",right:"left",bottom:"top",top:"bottom"};function me(e){return e.replace(/left|right|bottom|top/g,(function(e){return pe[e]}))}var ve={start:"end",end:"start"};function ge(e){return e.replace(/start|end/g,(function(e){return ve[e]}))}function ye(e,t){var n=Boolean(t.getRootNode&&t.getRootNode().host);if(e.contains(t))return!0;if(n){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function be(e){return Object.assign(Object.assign({},e),{},{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function we(e,t){return t===Z?be(function(e){var t=L(e),n=T(e),i=t.visualViewport,o=n.clientWidth,r=n.clientHeight,s=0,a=0;return i&&(o=i.width,r=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=i.offsetLeft,a=i.offsetTop)),{width:o,height:r,x:s+j(e),y:a}}(e)):O(t)?function(e){var t=I(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):be(function(e){var t=T(e),n=S(e),i=e.ownerDocument.body,o=Math.max(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),r=Math.max(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-n.scrollLeft+j(e),a=-n.scrollTop;return"rtl"===D(i||t).direction&&(s+=Math.max(t.clientWidth,i?i.clientWidth:0)-o),{width:o,height:r,x:s,y:a}}(T(e)))}function _e(e,t,n){var i="clippingParents"===t?function(e){var t=B(R(e)),n=["absolute","fixed"].indexOf(D(e).position)>=0&&O(e)?V(e):e;return A(n)?t.filter((function(e){return A(e)&&ye(e,n)&&"body"!==C(e)})):[]}(e):[].concat(t),o=[].concat(i,[n]),r=o[0],s=o.reduce((function(t,n){var i=we(e,n);return t.top=Math.max(i.top,t.top),t.right=Math.min(i.right,t.right),t.bottom=Math.min(i.bottom,t.bottom),t.left=Math.max(i.left,t.left),t}),we(e,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function ke(e){return Object.assign(Object.assign({},{top:0,right:0,bottom:0,left:0}),e)}function Ee(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function xe(e,t){void 0===t&&(t={});var n=t,i=n.placement,o=void 0===i?e.placement:i,r=n.boundary,s=void 0===r?"clippingParents":r,a=n.rootBoundary,u=void 0===a?Z:a,c=n.elementContext,l=void 0===c?Q:c,d=n.altBoundary,f=void 0!==d&&d,h=n.padding,p=void 0===h?0:h,m=ke("number"!=typeof p?p:Ee(p,G)),v=l===Q?"reference":Q,g=e.elements.reference,y=e.rects.popper,b=e.elements[f?v:l],w=_e(A(b)?b:b.contextElement||T(e.elements.popper),s,u),_=I(g),k=de({reference:_,element:y,strategy:"absolute",placement:o}),E=be(Object.assign(Object.assign({},y),k)),x=l===Q?E:_,L={top:w.top-x.top+m.top,bottom:x.bottom-w.bottom+m.bottom,left:w.left-x.left+m.left,right:x.right-w.right+m.right},S=e.modifiersData.offset;if(l===Q&&S){var O=S[o];Object.keys(L).forEach((function(e){var t=[z,U].indexOf(e)>=0?1:-1,n=[W,U].indexOf(e)>=0?"y":"x";L[e]+=O[n]*t}))}return L}function Ie(e,t,n){return Math.max(e,Math.min(t,n))}function Le(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Se(e){return[W,z,U,K].some((function(t){return e[t]>=0}))}var Ae=se({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,i=e.options,o=i.scroll,r=void 0===o||o,s=i.resize,a=void 0===s||s,u=L(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&c.forEach((function(e){e.addEventListener("scroll",n.update,ae)})),a&&u.addEventListener("resize",n.update,ae),function(){r&&c.forEach((function(e){e.removeEventListener("scroll",n.update,ae)})),a&&u.removeEventListener("resize",n.update,ae)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=de({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,i=n.gpuAcceleration,o=void 0===i||i,r=n.adaptive,s=void 0===r||r,a={placement:ue(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign(Object.assign({},t.styles.popper),he(Object.assign(Object.assign({},a),{},{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign(Object.assign({},t.styles.arrow),he(Object.assign(Object.assign({},a),{},{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1})))),t.attributes.popper=Object.assign(Object.assign({},t.attributes.popper),{},{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},i=t.attributes[e]||{},o=t.elements[e];O(o)&&C(o)&&(Object.assign(o.style,n),Object.keys(i).forEach((function(e){var t=i[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var i=t.elements[e],o=t.attributes[e]||{},r=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});O(i)&&C(i)&&(Object.assign(i.style,r),Object.keys(o).forEach((function(e){i.removeAttribute(e)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,i=e.name,o=n.offset,r=void 0===o?[0,0]:o,s=te.reduce((function(e,n){return e[n]=function(e,t,n){var i=ue(e),o=[K,W].indexOf(i)>=0?-1:1,r="function"==typeof n?n(Object.assign(Object.assign({},t),{},{placement:e})):n,s=r[0],a=r[1];return s=s||0,a=(a||0)*o,[K,z].indexOf(i)>=0?{x:a,y:s}:{x:s,y:a}}(n,t.rects,r),e}),{}),a=s[t.placement],u=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=s}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var o=n.mainAxis,r=void 0===o||o,s=n.altAxis,a=void 0===s||s,u=n.fallbackPlacements,c=n.padding,l=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=void 0===h||h,m=n.allowedAutoPlacements,v=t.options.placement,g=ue(v),y=u||(g===v||!p?[me(v)]:function(e){if(ue(e)===X)return[];var t=me(e);return[ge(e),t,ge(t)]}(v)),b=[v].concat(y).reduce((function(e,n){return e.concat(ue(n)===X?function(e,t){void 0===t&&(t={});var n=t,i=n.placement,o=n.boundary,r=n.rootBoundary,s=n.padding,a=n.flipVariations,u=n.allowedAutoPlacements,c=void 0===u?te:u,l=ce(i),d=l?a?ee:ee.filter((function(e){return ce(e)===l})):G,f=d.filter((function(e){return c.indexOf(e)>=0}));0===f.length&&(f=d);var h=f.reduce((function(t,n){return t[n]=xe(e,{placement:n,boundary:o,rootBoundary:r,padding:s})[ue(n)],t}),{});return Object.keys(h).sort((function(e,t){return h[e]-h[t]}))}(t,{placement:n,boundary:l,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:m}):n)}),[]),w=t.rects.reference,_=t.rects.popper,k=new Map,E=!0,x=b[0],I=0;I<b.length;I++){var L=b[I],S=ue(L),A=ce(L)===Y,O=[W,U].indexOf(S)>=0,C=O?"width":"height",T=xe(t,{placement:L,boundary:l,rootBoundary:d,altBoundary:f,padding:c}),j=O?A?z:K:A?U:W;w[C]>_[C]&&(j=me(j));var $=me(j),D=[];if(r&&D.push(T[S]<=0),a&&D.push(T[j]<=0,T[$]<=0),D.every((function(e){return e}))){x=L,E=!1;break}k.set(L,D)}if(E)for(var M=function(e){var t=b.find((function(t){var n=k.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return x=t,"break"},P=p?3:1;P>0;P--){if("break"===M(P))break}t.placement!==x&&(t.modifiersData[i]._skip=!0,t.placement=x,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name,o=n.mainAxis,r=void 0===o||o,s=n.altAxis,a=void 0!==s&&s,u=n.boundary,c=n.rootBoundary,l=n.altBoundary,d=n.padding,f=n.tether,h=void 0===f||f,p=n.tetherOffset,m=void 0===p?0:p,v=xe(t,{boundary:u,rootBoundary:c,padding:d,altBoundary:l}),g=ue(t.placement),y=ce(t.placement),b=!y,w=le(g),_="x"===w?"y":"x",k=t.modifiersData.popperOffsets,E=t.rects.reference,x=t.rects.popper,I="function"==typeof m?m(Object.assign(Object.assign({},t.rects),{},{placement:t.placement})):m,L={x:0,y:0};if(k){if(r){var S="y"===w?W:K,A="y"===w?U:z,O="y"===w?"height":"width",C=k[w],T=k[w]+v[S],j=k[w]-v[A],$=h?-x[O]/2:0,D=y===Y?E[O]:x[O],M=y===Y?-x[O]:-E[O],P=t.elements.arrow,R=h&&P?N(P):{width:0,height:0},H=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},B=H[S],q=H[A],F=Ie(0,E[O],R[O]),X=b?E[O]/2-$-F-B-I:D-F-B-I,G=b?-E[O]/2+$+F+q+I:M+F+q+I,J=t.elements.arrow&&V(t.elements.arrow),Z=J?"y"===w?J.clientTop||0:J.clientLeft||0:0,Q=t.modifiersData.offset?t.modifiersData.offset[t.placement][w]:0,ee=k[w]+X-Q-Z,te=k[w]+G-Q,ne=Ie(h?Math.min(T,ee):T,C,h?Math.max(j,te):j);k[w]=ne,L[w]=ne-C}if(a){var ie="x"===w?W:K,oe="x"===w?U:z,re=k[_],se=Ie(re+v[ie],re,re-v[oe]);k[_]=se,L[_]=se-re}t.modifiersData[i]=L}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,i=e.name,o=n.elements.arrow,r=n.modifiersData.popperOffsets,s=ue(n.placement),a=le(s),u=[K,z].indexOf(s)>=0?"height":"width";if(o&&r){var c=n.modifiersData[i+"#persistent"].padding,l=N(o),d="y"===a?W:K,f="y"===a?U:z,h=n.rects.reference[u]+n.rects.reference[a]-r[a]-n.rects.popper[u],p=r[a]-n.rects.reference[a],m=V(o),v=m?"y"===a?m.clientHeight||0:m.clientWidth||0:0,g=h/2-p/2,y=c[d],b=v-l[u]-c[f],w=v/2-l[u]/2+g,_=Ie(y,w,b),k=a;n.modifiersData[i]=((t={})[k]=_,t.centerOffset=_-w,t)}},effect:function(e){var t=e.state,n=e.options,i=e.name,o=n.element,r=void 0===o?"[data-popper-arrow]":o,s=n.padding,a=void 0===s?0:s;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&ye(t.elements.popper,r)&&(t.elements.arrow=r,t.modifiersData[i+"#persistent"]={padding:ke("number"!=typeof a?a:Ee(a,G))})},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,i=t.rects.reference,o=t.rects.popper,r=t.modifiersData.preventOverflow,s=xe(t,{elementContext:"reference"}),a=xe(t,{altBoundary:!0}),u=Le(s,i),c=Le(a,o,r),l=Se(u),d=Se(c);t.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:c,isReferenceHidden:l,hasPopperEscaped:d},t.attributes.popper=Object.assign(Object.assign({},t.attributes.popper),{},{"data-popper-reference-hidden":l,"data-popper-escaped":d})}}]}),Oe="tippy-content",Ce="tippy-backdrop",Te="tippy-arrow",je="tippy-svg-arrow",$e={passive:!0,capture:!0};function De(e,t,n){if(Array.isArray(e)){var i=e[t];return null==i?Array.isArray(n)?n[t]:n:i}return e}function Me(e,t){var n={}.toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function Pe(e,t){return"function"==typeof e?e.apply(void 0,t):e}function Ne(e,t){return 0===t?e:function(i){clearTimeout(n),n=setTimeout((function(){e(i)}),t)};var n}function Re(e){return[].concat(e)}function He(e,t){-1===e.indexOf(t)&&e.push(t)}function Be(e){return e.split("-")[0]}function qe(e){return[].slice.call(e)}function Fe(){return document.createElement("div")}function Ve(e){return["Element","Fragment"].some((function(t){return Me(e,t)}))}function We(e){return Me(e,"MouseEvent")}function Ue(e){return!(!e||!e._tippy||e._tippy.reference!==e)}function ze(e){return Ve(e)?[e]:function(e){return Me(e,"NodeList")}(e)?qe(e):Array.isArray(e)?e:qe(document.querySelectorAll(e))}function Ke(e,t){e.forEach((function(e){e&&(e.style.transitionDuration=t+"ms")}))}function Xe(e,t){e.forEach((function(e){e&&e.setAttribute("data-state",t)}))}function Ge(e){var t=Re(e)[0];return t&&t.ownerDocument||document}function Ye(e,t,n){var i=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(t){e[i](t,n)}))}var Je={isTouch:!1},Ze=0;function Qe(){Je.isTouch||(Je.isTouch=!0,window.performance&&document.addEventListener("mousemove",et))}function et(){var e=performance.now();e-Ze<20&&(Je.isTouch=!1,document.removeEventListener("mousemove",et)),Ze=e}function tt(){var e=document.activeElement;if(Ue(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}var nt="undefined"!=typeof window&&"undefined"!=typeof document?navigator.userAgent:"",it=/MSIE |Trident\//.test(nt);var ot={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},rt=Object.assign({appendTo:function(){return document.body},aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},ot,{},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),st=Object.keys(rt);function at(e){var t=(e.plugins||[]).reduce((function(t,n){var i=n.name,o=n.defaultValue;return i&&(t[i]=void 0!==e[i]?e[i]:o),t}),{});return Object.assign({},e,{},t)}function ut(e,t){var n=Object.assign({},t,{content:Pe(t.content,[e])},t.ignoreAttributes?{}:function(e,t){return(t?Object.keys(at(Object.assign({},rt,{plugins:t}))):st).reduce((function(t,n){var i=(e.getAttribute("data-tippy-"+n)||"").trim();if(!i)return t;if("content"===n)t[n]=i;else try{t[n]=JSON.parse(i)}catch(e){t[n]=i}return t}),{})}(e,t.plugins));return n.aria=Object.assign({},rt.aria,{},n.aria),n.aria={expanded:"auto"===n.aria.expanded?t.interactive:n.aria.expanded,content:"auto"===n.aria.content?t.interactive?null:"describedby":n.aria.content},n}function ct(e,t){e.innerHTML=t}function lt(e){var t=Fe();return!0===e?t.className=Te:(t.className=je,Ve(e)?t.appendChild(e):ct(t,e)),t}function dt(e,t){Ve(t.content)?(ct(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?ct(e,t.content):e.textContent=t.content)}function ft(e){var t=e.firstElementChild,n=qe(t.children);return{box:t,content:n.find((function(e){return e.classList.contains(Oe)})),arrow:n.find((function(e){return e.classList.contains(Te)||e.classList.contains(je)})),backdrop:n.find((function(e){return e.classList.contains(Ce)}))}}function ht(e){var t=function(t,i){var o=ft(n),r=o.box,s=o.content,a=o.arrow;i.theme?r.setAttribute("data-theme",i.theme):r.removeAttribute("data-theme"),"string"==typeof i.animation?r.setAttribute("data-animation",i.animation):r.removeAttribute("data-animation"),i.inertia?r.setAttribute("data-inertia",""):r.removeAttribute("data-inertia"),r.style.maxWidth="number"==typeof i.maxWidth?i.maxWidth+"px":i.maxWidth,i.role?r.setAttribute("role",i.role):r.removeAttribute("role"),t.content===i.content&&t.allowHTML===i.allowHTML||dt(s,e.props),i.arrow?a?t.arrow!==i.arrow&&(r.removeChild(a),r.appendChild(lt(i.arrow))):r.appendChild(lt(i.arrow)):a&&r.removeChild(a)},n=Fe(),i=Fe();i.className="tippy-box",i.setAttribute("data-state","hidden"),i.setAttribute("tabindex","-1");var o=Fe();return o.className=Oe,o.setAttribute("data-state","hidden"),dt(o,e.props),n.appendChild(i),i.appendChild(o),t(e.props,e.props),{popper:n,onUpdate:t}}ht.$$tippy=!0;var pt=1,mt=[],vt=[];function gt(e,t){var n,i,o,r,s,a,u,c,l,d=function(){var e=J.props.touch;return Array.isArray(e)?e:[e,0]},f=function(){return"hold"===d()[0]},h=function(){var e;return!!(null==(e=J.props.render)?void 0:e.$$tippy)},p=function(){return c||e},m=function(){return ft(Q)},v=function(e){return J.state.isMounted&&!J.state.isVisible||Je.isTouch||s&&"focus"===s.type?0:De(J.props.delay,e?0:1,rt.delay)},g=function(){Q.style.pointerEvents=J.props.interactive&&J.state.isVisible?"":"none",Q.style.zIndex=""+J.props.zIndex},y=function(e,t,n){var i;(void 0===n&&(n=!0),te.forEach((function(n){n[e]&&n[e].apply(void 0,t)})),n)&&(i=J.props)[e].apply(i,t)},b=function(){var t=J.props.aria;if(t.content){var n="aria-"+t.content,i=Q.id;Re(J.props.triggerTarget||e).forEach((function(e){var t=e.getAttribute(n);if(J.state.isVisible)e.setAttribute(n,t?t+" "+i:i);else{var o=t&&t.replace(i,"").trim();o?e.setAttribute(n,o):e.removeAttribute(n)}}))}},w=function(){!ne&&J.props.aria.expanded&&Re(J.props.triggerTarget||e).forEach((function(e){J.props.interactive?e.setAttribute("aria-expanded",J.state.isVisible&&e===p()?"true":"false"):e.removeAttribute("aria-expanded")}))},_=function(){X.removeEventListener("mousemove",K),mt=mt.filter((function(e){return e!==K}))},k=function(e){if(!(Je.isTouch&&(W||"mousedown"===e.type)||J.props.interactive&&Q.contains(e.target))){if(p().contains(e.target)){if(Je.isTouch)return;if(J.state.isVisible&&J.props.trigger.indexOf("click")>=0)return}else y("onClickOutside",[J,e]);!0===J.props.hideOnClick&&(J.clearDelayTimeouts(),J.hide(),V=!0,setTimeout((function(){V=!1})),J.state.isMounted||L())}},E=function(){W=!0},x=function(){W=!1},I=function(){X.addEventListener("mousedown",k,!0),X.addEventListener("touchend",k,$e),X.addEventListener("touchstart",x,$e),X.addEventListener("touchmove",E,$e)},L=function(){X.removeEventListener("mousedown",k,!0),X.removeEventListener("touchend",k,$e),X.removeEventListener("touchstart",x,$e),X.removeEventListener("touchmove",E,$e)},S=function(e,t){var n=m().box;function i(e){e.target===n&&(Ye(n,"remove",i),t())}if(0===e)return t();Ye(n,"remove",a),Ye(n,"add",i),a=i},A=function(t,n,i){void 0===i&&(i=!1),Re(J.props.triggerTarget||e).forEach((function(e){e.addEventListener(t,n,i),z.push({node:e,eventType:t,handler:n,options:i})}))},O=function(){var e;f()&&(A("touchstart",T,{passive:!0}),A("touchend",$,{passive:!0})),(e=J.props.trigger,e.split(/\s+/).filter(Boolean)).forEach((function(e){if("manual"!==e)switch(A(e,T),e){case"mouseenter":A("mouseleave",$);break;case"focus":A(it?"focusout":"blur",D);break;case"focusin":A("focusout",D)}}))},C=function(){z.forEach((function(e){var t=e.node,n=e.eventType,i=e.handler,o=e.options;t.removeEventListener(n,i,o)})),z=[]},T=function(e){var t,n=!1;if(J.state.isEnabled&&!M(e)&&!V){var i="focus"===(null==(t=s)?void 0:t.type);s=e,c=e.currentTarget,w(),!J.state.isVisible&&We(e)&&mt.forEach((function(t){return t(e)})),"click"===e.type&&(J.props.trigger.indexOf("mouseenter")<0||F)&&!1!==J.props.hideOnClick&&J.state.isVisible?n=!0:H(e),"click"===e.type&&(F=!n),n&&!i&&B(e)}},j=function(e){var t=e.target,n=p().contains(t)||Q.contains(t);"mousemove"===e.type&&n||function(e,t){var n=t.clientX,i=t.clientY;return e.every((function(e){var t=e.popperRect,o=e.popperState,r=e.props.interactiveBorder,s=Be(o.placement),a=o.modifiersData.offset;if(!a)return!0;var u="bottom"===s?a.top.y:0,c="top"===s?a.bottom.y:0,l="right"===s?a.left.x:0,d="left"===s?a.right.x:0,f=t.top-i+u>r,h=i-t.bottom-c>r,p=t.left-n+l>r,m=n-t.right-d>r;return f||h||p||m}))}(R().concat(Q).map((function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:q}:null})).filter(Boolean),e)&&(_(),B(e))},$=function(e){M(e)||J.props.trigger.indexOf("click")>=0&&F||(J.props.interactive?J.hideWithInteractivity(e):B(e))},D=function(e){J.props.trigger.indexOf("focusin")<0&&e.target!==p()||J.props.interactive&&e.relatedTarget&&Q.contains(e.relatedTarget)||B(e)},M=function(e){return!!Je.isTouch&&f()!==e.type.indexOf("touch")>=0},P=function(){N();var t=J.props,n=t.popperOptions,i=t.placement,o=t.offset,r=t.getReferenceClientRect,s=t.moveTransition,a=h()?ft(Q).arrow:null,c=r?{getBoundingClientRect:r,contextElement:r.contextElement||p()}:e,l=[{name:"offset",options:{offset:o}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!s}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(h()){var n=m().box;["placement","reference-hidden","escaped"].forEach((function(e){"placement"===e?n.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?n.setAttribute("data-"+e,""):n.removeAttribute("data-"+e)})),t.attributes.popper={}}}}];h()&&a&&l.push({name:"arrow",options:{element:a,padding:3}}),l.push.apply(l,(null==n?void 0:n.modifiers)||[]),J.popperInstance=Ae(c,Q,Object.assign({},n,{placement:i,onFirstUpdate:u,modifiers:l}))},N=function(){J.popperInstance&&(J.popperInstance.destroy(),J.popperInstance=null)},R=function(){return qe(Q.querySelectorAll("[data-tippy-root]"))},H=function(e){J.clearDelayTimeouts(),e&&y("onTrigger",[J,e]),I();var t=v(!0),n=d(),o=n[0],r=n[1];Je.isTouch&&"hold"===o&&r&&(t=r),t?i=setTimeout((function(){J.show()}),t):J.show()},B=function(e){if(J.clearDelayTimeouts(),y("onUntrigger",[J,e]),J.state.isVisible){if(!(J.props.trigger.indexOf("mouseenter")>=0&&J.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&F)){var t=v(!1);t?o=setTimeout((function(){J.state.isVisible&&J.hide()}),t):r=requestAnimationFrame((function(){J.hide()}))}}else L()},q=ut(e,Object.assign({},rt,{},at((n=t,Object.keys(n).reduce((function(e,t){return void 0!==n[t]&&(e[t]=n[t]),e}),{}))))),F=!1,V=!1,W=!1,U=!1,z=[],K=Ne(j,q.interactiveDebounce),X=Ge(q.triggerTarget||e),G=pt++,Y=(l=q.plugins).filter((function(e,t){return l.indexOf(e)===t})),J={id:G,reference:e,popper:Fe(),popperInstance:null,props:q,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:Y,clearDelayTimeouts:function(){clearTimeout(i),clearTimeout(o),cancelAnimationFrame(r)},setProps:function(t){if(!J.state.isDestroyed){y("onBeforeUpdate",[J,t]),C();var n=J.props,i=ut(e,Object.assign({},J.props,{},t,{ignoreAttributes:!0}));J.props=i,O(),n.interactiveDebounce!==i.interactiveDebounce&&(_(),K=Ne(j,i.interactiveDebounce)),n.triggerTarget&&!i.triggerTarget?Re(n.triggerTarget).forEach((function(e){e.removeAttribute("aria-expanded")})):i.triggerTarget&&e.removeAttribute("aria-expanded"),w(),g(),ee&&ee(n,i),J.popperInstance&&(P(),R().forEach((function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)}))),y("onAfterUpdate",[J,t])}},setContent:function(e){J.setProps({content:e})},show:function(){var e=J.state.isVisible,t=J.state.isDestroyed,n=!J.state.isEnabled,i=Je.isTouch&&!J.props.touch,o=De(J.props.duration,0,rt.duration);if(!(e||t||n||i||p().hasAttribute("disabled")||(y("onShow",[J],!1),!1===J.props.onShow(J)))){if(J.state.isVisible=!0,h()&&(Q.style.visibility="visible"),g(),I(),J.state.isMounted||(Q.style.transition="none"),h()){var r=m();Ke([r.box,r.content],0)}var s,a,c;u=function(){if(J.state.isVisible&&!U){if(U=!0,Q.offsetHeight,Q.style.transition=J.props.moveTransition,h()&&J.props.animation){var e=m(),t=e.box,n=e.content;Ke([t,n],o),Xe([t,n],"visible")}b(),w(),He(vt,J),J.state.isMounted=!0,y("onMount",[J]),J.props.animation&&h()&&function(e,t){S(e,t)}(o,(function(){J.state.isShown=!0,y("onShown",[J])}))}},a=J.props.appendTo,c=p(),(s=J.props.interactive&&a===rt.appendTo||"parent"===a?c.parentNode:Pe(a,[c])).contains(Q)||s.appendChild(Q),P()}},hide:function(){var e=!J.state.isVisible,t=J.state.isDestroyed,n=!J.state.isEnabled,i=De(J.props.duration,1,rt.duration);if(!(e||t||n)&&(y("onHide",[J],!1),!1!==J.props.onHide(J))){if(J.state.isVisible=!1,J.state.isShown=!1,U=!1,F=!1,h()&&(Q.style.visibility="hidden"),_(),L(),g(),h()){var o=m(),r=o.box,s=o.content;J.props.animation&&(Ke([r,s],i),Xe([r,s],"hidden"))}b(),w(),J.props.animation?h()&&function(e,t){S(e,(function(){!J.state.isVisible&&Q.parentNode&&Q.parentNode.contains(Q)&&t()}))}(i,J.unmount):J.unmount()}},hideWithInteractivity:function(e){X.addEventListener("mousemove",K),He(mt,K),K(e)},enable:function(){J.state.isEnabled=!0},disable:function(){J.hide(),J.state.isEnabled=!1},unmount:function(){J.state.isVisible&&J.hide(),J.state.isMounted&&(N(),R().forEach((function(e){e._tippy.unmount()})),Q.parentNode&&Q.parentNode.removeChild(Q),vt=vt.filter((function(e){return e!==J})),J.state.isMounted=!1,y("onHidden",[J]))},destroy:function(){J.state.isDestroyed||(J.clearDelayTimeouts(),J.unmount(),C(),delete e._tippy,J.state.isDestroyed=!0,y("onDestroy",[J]))}};if(!q.render)return J;var Z=q.render(J),Q=Z.popper,ee=Z.onUpdate;Q.setAttribute("data-tippy-root",""),Q.id="tippy-"+J.id,J.popper=Q,e._tippy=J,Q._tippy=J;var te=Y.map((function(e){return e.fn(J)})),ne=e.hasAttribute("aria-expanded");return O(),w(),g(),y("onCreate",[J]),q.showOnCreate&&H(),Q.addEventListener("mouseenter",(function(){J.props.interactive&&J.state.isVisible&&J.clearDelayTimeouts()})),Q.addEventListener("mouseleave",(function(e){J.props.interactive&&J.props.trigger.indexOf("mouseenter")>=0&&(X.addEventListener("mousemove",K),K(e))})),J}function yt(e,t){void 0===t&&(t={});var n=rt.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",Qe,$e),window.addEventListener("blur",tt);var i=Object.assign({},t,{plugins:n}),o=ze(e).reduce((function(e,t){var n=t&&gt(t,i);return n&&e.push(n),e}),[]);return Ve(e)?o[0]:o}yt.defaultProps=rt,yt.setDefaultProps=function(e){Object.keys(e).forEach((function(t){rt[t]=e[t]}))},yt.currentInput=Je;yt.setDefaultProps({render:ht});var bt=yt;
/**
 *
 *
 * @author Jerry Bendy <jerry@icewingcc.com>
 * @licence MIT
 *
 */
!function(e){var t,n=function(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,(function(e){return t[e]}))},i=function(e){return e.replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/gi,(function(e){return decodeURIComponent(e)}))},o=function(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return p&&(n[e.Symbol.iterator]=function(){return n}),n},r=function(e){var t={};if("object"==typeof e)if(a(e))for(var n=0;n<e.length;n++){var o=e[n];if(!a(o)||2!==o.length)throw new TypeError("Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements");s(t,o[0],o[1])}else for(var r in e)e.hasOwnProperty(r)&&s(t,r,e[r]);else{0===e.indexOf("?")&&(e=e.slice(1));for(var u=e.split("&"),c=0;c<u.length;c++){var l=u[c],d=l.indexOf("=");-1<d?s(t,i(l.slice(0,d)),i(l.slice(d+1))):l&&s(t,i(l),"")}}return t},s=function(e,t,n){var i="string"==typeof n?n:null!=n&&"function"==typeof n.toString?n.toString():JSON.stringify(n);u(e,t)?e[t].push(i):e[t]=[i]},a=function(e){return!!e&&"[object Array]"===Object.prototype.toString.call(e)},u=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c=function(){try{if(e.URLSearchParams&&"bar"===new e.URLSearchParams("foo=bar").get("foo"))return e.URLSearchParams}catch(e){}return null}(),l=c&&"a=1"===new c({a:1}).toString(),d=c&&"+"===new c("s=%2B").get("s"),f=!c||((t=new c).append("s"," &"),"s=+%26"===t.toString()),h=g.prototype,p=!(!e.Symbol||!e.Symbol.iterator);if(!(c&&l&&d&&f)){h.append=function(e,t){s(this.__URLSearchParams__,e,t)},h.delete=function(e){delete this.__URLSearchParams__[e]},h.get=function(e){var t=this.__URLSearchParams__;return this.has(e)?t[e][0]:null},h.getAll=function(e){var t=this.__URLSearchParams__;return this.has(e)?t[e].slice(0):[]},h.has=function(e){return u(this.__URLSearchParams__,e)},h.set=function(e,t){this.__URLSearchParams__[e]=[""+t]},h.toString=function(){var e,t,i,o,r=this.__URLSearchParams__,s=[];for(t in r)for(i=n(t),e=0,o=r[t];e<o.length;e++)s.push(i+"="+n(o[e]));return s.join("&")};var m=!!d&&c&&!l&&e.Proxy;Object.defineProperty(e,"URLSearchParams",{value:m?new Proxy(c,{construct:function(e,t){return new e(new g(t[0]).toString())}}):g});var v=e.URLSearchParams.prototype;v.polyfill=!0,v.forEach=v.forEach||function(e,t){var n=r(this.toString());Object.getOwnPropertyNames(n).forEach((function(i){n[i].forEach((function(n){e.call(t,n,i,this)}),this)}),this)},v.sort=v.sort||function(){var e,t,n,i=r(this.toString()),o=[];for(e in i)o.push(e);for(o.sort(),t=0;t<o.length;t++)this.delete(o[t]);for(t=0;t<o.length;t++){var s=o[t],a=i[s];for(n=0;n<a.length;n++)this.append(s,a[n])}},v.keys=v.keys||function(){var e=[];return this.forEach((function(t,n){e.push(n)})),o(e)},v.values=v.values||function(){var e=[];return this.forEach((function(t){e.push(t)})),o(e)},v.entries=v.entries||function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),o(e)},p&&(v[e.Symbol.iterator]=v[e.Symbol.iterator]||v.entries)}function g(e){((e=e||"")instanceof URLSearchParams||e instanceof g)&&(e=e.toString()),this.__URLSearchParams__=r(e)}}(void 0!==e?e:"undefined"!=typeof window?window:{}),function(){var e=function(e){if("string"!=typeof e&&(e=e.toString()),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()},t=function(e){return"string"!=typeof e&&(e=e.toString()),e},n=function(e){if(e.bodyUsed)return fetch.Promise.reject(new TypeError("Already read"));e.bodyUsed=!0},i=function(e){return new fetch.Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))},o=function(e){var t=new FileReader;return t.readAsArrayBuffer(e),i(t)},r=function(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(l.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(l.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else{if(e)throw new Error("unsupported BodyInit type");this._bodyText=""}},l.blob?(this.blob=function(){var e=n(this);if(e)return e;if(this._bodyBlob)return fetch.Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return fetch.Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(o)},this.text=function(){var e,t,o=n(this);if(o)return o;if(this._bodyBlob)return e=this._bodyBlob,(t=new FileReader).readAsText(e),i(t);if(this._bodyFormData)throw new Error("could not read FormData body as text");return fetch.Promise.resolve(this._bodyText)}):this.text=function(){var e=n(this);return e||fetch.Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(a)}),this.json=function(){return this.text().then((function(e){return JSON.parse(e)}))},this},s=function(e,t){var n,i;if(t=t||{},this.url=e,this.credentials=t.credentials||"omit",this.headers=new h(t.headers),this.method=(n=t.method||"GET",i=n.toUpperCase(),d.indexOf(i)>-1?i:n),this.mode=t.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&t.body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(t.body)},a=function(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(o))}})),t},u=function(e){var t=new h;return e.getAllResponseHeaders().trim().split("\n").forEach((function(e){var n=e.trim().split(":"),i=n.shift().trim(),o=n.join(":").trim();t.append(i,o)})),t},c=function(e,t){t||(t={}),this._initBody(e),this.type="default",this.url=null,this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof h?t.headers:new h(t.headers),this.url=t.url||""};if(!self.fetch){h.prototype.append=function(n,i){n=e(n),i=t(i);var o=this.map[n];o||(o=[],this.map[n]=o),o.push(i)},h.prototype.delete=function(t){delete this.map[e(t)]},h.prototype.get=function(t){var n=this.map[e(t)];return n?n[0]:null},h.prototype.getAll=function(t){return this.map[e(t)]||[]},h.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},h.prototype.set=function(n,i){this.map[e(n)]=[t(i)]},h.prototype.forEach=function(e){var t=this;Object.getOwnPropertyNames(this.map).forEach((function(n){e(n,t.map[n])}))};var l={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self},d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],f=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent);r.call(s.prototype),r.call(c.prototype),self.Headers=h,self.Request=s,self.Response=c,self.fetch=function(e,t){var n;return n=s.prototype.isPrototypeOf(e)&&!t?e:new s(e,t),new fetch.Promise((function(e,t){var i=function(){if(4===o.readyState){var n=1223===o.status?204:o.status;if(n<100||n>599)t(new TypeError("Network request failed"));else{var i={status:n,statusText:o.statusText,headers:u(o),url:"responseURL"in o?o.responseURL:/^X-Request-URL:/m.test(o.getAllResponseHeaders())?o.getResponseHeader("X-Request-URL"):void 0},r="response"in o?o.response:o.responseText;e(new c(r,i))}}},o=function(){return f&&!/^(get|post|head|put|delete|options)$/i.test(this.method)?(this.usingActiveXhr=!0,new ActiveXObject("Microsoft.XMLHTTP")):new XMLHttpRequest}();"cors"===n.credentials&&(o.withCredentials=!0),o.onreadystatechange=i,self.usingActiveXhr||(o.onload=i,o.onerror=function(){t(new TypeError("Network request failed"))}),o.open(n.method,n.url,!0),"responseType"in o&&l.blob&&(o.responseType="blob"),n.headers.forEach((function(e,t){t.forEach((function(t){o.setRequestHeader(e,t)}))})),o.send(void 0===n._bodyInit?null:n._bodyInit)}))},fetch.Promise=self.Promise,self.fetch.polyfill=!0}function h(e){this.map={};var t=this;e instanceof h?e.forEach((function(e,n){n.forEach((function(n){t.append(e,n)}))})):e&&Object.getOwnPropertyNames(e).forEach((function(n){t.append(n,e[n])}))}}();var wt,_t,kt={};wt=kt,_t=function(){var e,t=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}},n=function(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i},i=function(e){for(var t=arguments,i=function(i){var o=null!=t[i]?t[i]:{};i%2?n(Object(o),!0).forEach((function(t){var n,i;n=e,t=o[i=t],i in n?Object.defineProperty(n,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[i]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))},o=1;o<arguments.length;o++)i(o);return e},o=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i},r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw r}}}},s=function(e,t){for(var n=document.getElementsByClassName(e.resultsList.className),i=0;i<n.length;i++)t!==n[i]&&t!==e.inputField&&n[i].parentNode.removeChild(n[i]);e.inputField.removeAttribute("aria-activedescendant"),e.inputField.setAttribute("aria-expanded",!1)},a=function(e,t,n){var o,r,s=(o=e,(r=document.createElement(o.resultsList.element)).setAttribute("id",o.resultsList.idName),r.setAttribute("aria-label",o.name),r.setAttribute("class",o.resultsList.className),r.setAttribute("role","listbox"),r.setAttribute("tabindex","-1"),o.resultsList.container&&o.resultsList.container(r),("string"==typeof o.resultsList.destination?document.querySelector(o.resultsList.destination):o.resultsList.destination()).insertAdjacentElement(o.resultsList.position,r),r);e.inputField.setAttribute("aria-expanded",!0);for(var a=function(o){var r,a,u,c,l=t.results[o];(c=(r=l,a=o,u=e,(c=document.createElement(u.resultItem.element)).setAttribute("id","".concat(u.resultItem.idName,"_").concat(a)),c.setAttribute("class",u.resultItem.className),c.setAttribute("role","option"),c.innerHTML=r.match,u.resultItem.content&&u.resultItem.content(r,c),c)).addEventListener("click",(function(r){r={event:r,matches:n,input:t.input,query:t.query,results:t.results,selection:i(i({},l),{},{index:o})},e.onSelection&&e.onSelection(r)})),s.appendChild(c)},u=0;u<t.results.length;u++)a(u);return s},u=function(e,t,n){e.dispatchEvent(new CustomEvent(n,{bubbles:!0,detail:t,cancelable:!0}))},c=function(e,t){for(var n=[],i=function(i){function o(o){var r=(o?s[o]:s).toString();r&&((r="function"==typeof e.searchEngine?e.searchEngine(t,r):function(e,t,n){var i=n.diacritics?t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):t.toLowerCase();if("loose"===n.searchEngine){e=e.replace(/ /g,"");for(var o=[],r=0,s=0;s<i.length;s++){var a=t[s];r<e.length&&i[s]===e[r]&&(a=n.highlight?'<span class="autoComplete_highlighted">'.concat(a,"</span>"):a,r++),o.push(a)}if(r===e.length)return o.join("")}else if(i.includes(e))return e=new RegExp("".concat(e),"i").exec(t),n.highlight?t.replace(e,'<span class="autoComplete_highlighted">'.concat(e,"</span>")):t}(t,r,e))&&o?n.push({key:o,index:i,match:r,value:s}):r&&!o&&n.push({index:i,match:r,value:s}))}var s=e.data.store[i];if(e.data.key){var a,u=r(e.data.key);try{for(u.s();!(a=u.n()).done;)o(a.value)}catch(e){u.e(e)}finally{u.f()}}else o()},o=0;o<e.data.store.length;o++)i(o);return e.sort?n.sort(e.sort):n};function l(e){!function(e){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}(this);var t=void 0===(S=e.name)?"Search":S,n=void 0===(w=e.selector)?"#autoComplete":w,i=void 0!==(D=e.observer)&&D,o=($=e.data).src,r=$.key,s=void 0!==(_=$.cache)&&_,a=$.store,u=$.results,c=e.query,d=void 0===(k=(A=void 0===(A=e.trigger)?{}:A).event)?["input"]:k,f=void 0!==(E=A.condition)&&E,h=void 0===(O=e.searchEngine)?"strict":O,p=void 0!==(x=e.diacritics)&&x,m=void 0===(j=e.threshold)?1:j,v=void 0===(I=e.debounce)?0:I,g=void 0===(L=(T=void 0===(T=e.resultsList)?{}:T).render)||L,y=void 0!==(C=T.container)&&C,b=T.destination,w=void 0===(S=T.position)?"afterend":S,_=void 0===(D=T.element)?"ul":D,k=void 0===($=T.idName)?"autoComplete_list":$,E=void 0===(A=T.className)?"autoComplete_list":A,x=void 0!==(O=T.navigation)&&O,I=void 0!==(j=e.sort)&&j,L=e.placeHolder,S=void 0===(C=e.maxResults)?5:C,A=void 0!==($=(D=void 0===(D=e.resultItem)?{}:D).content)&&$,O=void 0===(T=D.element)?"li":T,C=void 0===(j=D.idName)?"autoComplete_result":j,T=void 0===($=D.className)?"autoComplete_result":$,j=e.noResults,$=void 0!==(D=e.highlight)&&D,D=e.feedback;e=e.onSelection;this.name=t,this.selector=n,this.observer=i,this.data={src:o,key:r,cache:s,store:a,results:u},this.query=c,this.trigger={event:d,condition:f},this.searchEngine=h,this.diacritics=p,this.threshold=m,this.debounce=v,this.resultsList={render:g,container:y,destination:b||this.selector,position:w,element:_,idName:k,className:E,navigation:x},this.sort=I,this.placeHolder=L,this.maxResults=S,this.resultItem={content:A,element:O,idName:C,className:T},this.noResults=j,this.highlight=$,this.feedback=D,this.onSelection=e,this.inputField="string"==typeof this.selector?document.querySelector(this.selector):this.selector(),this.observer?this.preInit():this.init()}return e=[{key:"start",value:function(e,t){var n=this,o=this.data.results?this.data.results(c(this,t)):c(this,t);t={input:e,query:t,matches:o,results:o.slice(0,this.maxResults)};return u(this.inputField,t,"results"),o.length?this.resultsList.render?(o.length&&a(this,t,o),u(this.inputField,t,"rendered"),function(e,t){function n(e,n,s,a){e.preventDefault(),s?o++:o--,r(n),a.inputField.setAttribute("aria-activedescendant",n[o].id),u(e.srcElement,i(i({event:e},t),{},{selection:t.results[o]}),"navigation")}var o=-1,r=function(e){if(!e)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].removeAttribute("aria-selected"),e[t].classList.remove("autoComplete_selected")}(e),e[o=(o=o>=e.length?0:o)<0?e.length-1:o].setAttribute("aria-selected","true"),e[o].classList.add("autoComplete_selected")},a=e.resultsList.navigation||function(t){var i=document.getElementById(e.resultsList.idName);if(!i)return e.inputField.removeEventListener("keydown",a);i=i.getElementsByTagName(e.resultItem.element),27===t.keyCode?(e.inputField.value="",s(e)):40===t.keyCode||9===t.keyCode?n(t,i,!0,e):38===t.keyCode||9===t.keyCode?n(t,i,!1,e):13===t.keyCode&&(t.preventDefault(),-1<o&&i&&i[o].click())};e.inputField.autoCompleteNavigate&&e.inputField.removeEventListener("keydown",e.inputField.autoCompleteNavigate),e.inputField.autoCompleteNavigate=a,e.inputField.addEventListener("keydown",a)}(this,t),void document.addEventListener("click",(function(e){return s(n,e.target)}))):this.feedback(t):this.noResults?this.noResults(t,a):null}},{key:"dataStore",value:function(){var e=this;return new Promise((function(t,n){return e.data.cache&&e.data.store?t(null):new Promise((function(t,n){return"function"==typeof e.data.src?e.data.src().then(t,n):t(e.data.src)})).then((function(i){try{return e.data.store=i,u(e.inputField,e.data.store,"fetch"),t()}catch(e){return n(e)}}),n)}))}},{key:"compose",value:function(){var e=this;return new Promise((function(t,n){var i,o,r,a,u=function(){return t()};return a=e.inputField,r=i=(a instanceof HTMLInputElement||a instanceof HTMLTextAreaElement?a.value:a.innerHTML).toLowerCase(),o=(a=e).query&&a.query.manipulate?a.query.manipulate(r):a.diacritics?r.normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):r,a=o,((r=e).trigger.condition?r.trigger.condition(a):a.length>=r.threshold&&a.replace(/ /g,"").length)?e.dataStore().then((function(t){try{return s(e),e.start(i,o),u.call(e)}catch(e){return n(e)}}),n):(s(e),u.call(e))}))}},{key:"init",value:function(){var e,t,n,i,o=this;(e=this).inputField.setAttribute("type","text"),e.inputField.setAttribute("role","combobox"),e.inputField.setAttribute("aria-haspopup",!0),e.inputField.setAttribute("aria-expanded",!1),e.inputField.setAttribute("aria-controls",e.resultsList.idName),e.inputField.setAttribute("aria-autocomplete","both"),this.placeHolder&&this.inputField.setAttribute("placeholder",this.placeHolder),this.hook=(t=function(){o.compose()},n=this.debounce,function(){var e=this,o=arguments;clearTimeout(i),i=setTimeout((function(){return t.apply(e,o)}),n)}),this.trigger.event.forEach((function(e){o.inputField.removeEventListener(e,o.hook),o.inputField.addEventListener(e,o.hook)})),u(this.inputField,null,"init")}},{key:"preInit",value:function(){var e=this;new MutationObserver((function(t,n){var i,o=r(t);try{for(o.s();!(i=o.n()).done;)i.value,e.inputField&&(n.disconnect(),u(e.inputField,null,"connect"),e.init())}catch(e){o.e(e)}finally{o.f()}})).observe(document,{childList:!0,subtree:!0})}},{key:"unInit",value:function(){this.inputField.removeEventListener("input",this.hook),u(this.inputField,null,"unInit")}}],t(l.prototype,e),l},"object"==typeof kt?kt=_t():"function"==typeof define&&define.amd?define(_t):(wt="undefined"!=typeof globalThis?globalThis:wt||self).autoComplete=_t();var Et,xt={},It="object"==typeof Reflect?Reflect:null,Lt=It&&"function"==typeof It.apply?It.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};Et=It&&"function"==typeof It.ownKeys?It.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var St=Number.isNaN||function(e){return e!=e};function At(){At.init.call(this)}(xt=At).once=function(e,t){return new Promise((function(n,i){var o=function(n){e.removeListener(t,r),i(n)},r=function(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))};Rt(e,t,r,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&Rt(e,"error",t,n)}(e,o,{once:!0})}))},At.EventEmitter=At,At.prototype._events=void 0,At.prototype._eventsCount=0,At.prototype._maxListeners=void 0;var Ot=10;function Ct(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+(void 0===e?"undefined":f(e)))}function Tt(e){return void 0===e._maxListeners?At.defaultMaxListeners:e._maxListeners}function jt(e,t,n,i){var o,r,s,a;if(Ct(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),r=e._events),s=r[t]),void 0===s)s=r[t]=n,++e._eventsCount;else if("function"==typeof s?s=r[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(o=Tt(e))>0&&s.length>o&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return e}function $t(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Dt(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=$t.bind(i);return o.listener=n,i.wrapFn=o,o}function Mt(e,t,n){var i=e._events;if(void 0===i)return[];var o=i[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):Nt(o,o.length)}function Pt(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function Nt(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function Rt(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+(void 0===e?"undefined":f(e)));e.addEventListener(t,(function o(r){i.once&&e.removeEventListener(t,o),n(r)}))}}Object.defineProperty(At,"defaultMaxListeners",{enumerable:!0,get:function(){return Ot},set:function(e){if("number"!=typeof e||e<0||St(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Ot=e}}),At.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},At.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||St(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},At.prototype.getMaxListeners=function(){return Tt(this)},At.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var r;if(t.length>0&&(r=t[0]),r instanceof Error)throw r;var s=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw s.context=r,s}var a=o[e];if(void 0===a)return!1;if("function"==typeof a)Lt(a,this,t);else{var u=a.length,c=Nt(a,u);for(n=0;n<u;++n)Lt(c[n],this,t)}return!0},At.prototype.addListener=function(e,t){return jt(this,e,t,!1)},At.prototype.on=At.prototype.addListener,At.prototype.prependListener=function(e,t){return jt(this,e,t,!0)},At.prototype.once=function(e,t){return Ct(t),this.on(e,Dt(this,e,t)),this},At.prototype.prependOnceListener=function(e,t){return Ct(t),this.prependListener(e,Dt(this,e,t)),this},At.prototype.removeListener=function(e,t){var n,i,o,r,s;if(Ct(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,r=n.length-1;r>=0;r--)if(n[r]===t||n[r].listener===t){s=n[r].listener,o=r;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},At.prototype.off=At.prototype.removeListener,At.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,r=Object.keys(n);for(i=0;i<r.length;++i)"removeListener"!==(o=r[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},At.prototype.listeners=function(e){return Mt(this,e,!0)},At.prototype.rawListeners=function(e){return Mt(this,e,!1)},At.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Pt.call(e,t)},At.prototype.listenerCount=Pt,At.prototype.eventNames=function(){return this._eventsCount>0?Et(this._events):[]};var Ht={},Bt=/[\\^$.*+?()[\]{}|]/g,qt=RegExp(Bt.source),Ft=document.createElement("div"),Vt={containerTokenfield:'<div class="tokenfield tokenfield-mode-tokens">\n      <input class="tokenfield-copy-helper"\n        style="display:none;position:fixed;top:-1000px;right:1000px;"\n        tabindex="-1"\n        type="text"\n      />\n      <div class="tokenfield-set">\n        <ul></ul>\n      </div>\n      <input class="tokenfield-input" />\n      <div class="tokenfield-suggest">\n        <ul class="tokenfield-suggest-list"></ul>\n      </div>\n    </div>',containerList:'<div class="tokenfield tokenfield-mode-list">\n      <input class="tokenfield-input" />\n      <div class="tokenfield-suggest">\n        <ul class="tokenfield-suggest-list"></ul>\n      </div>\n      <div class="tokenfield-set">\n        <ul></ul>\n      </div>\n    </div>',suggestItem:'<li class="tokenfield-suggest-item"></li>',setItem:'<li class="tokenfield-set-item">\n      <span class="item-label"></span>\n      <a href="#" class="item-remove" tabindex="-1"></a>\n      <input class="item-input" type="hidden" />\n    </li>'};function Wt(){return(65536*(1+Math.random())|0).toString(16)+(65536*(1+Math.random())|0).toString(16)}function Ut(e,t){return e.indexOf(t)>=0}function zt(e){return e.nodeName?e:"string"==typeof e?document.querySelector(e):null}function Kt(e,t){return e.nodeName?e:(e=e.replace(/(\t|\n$)/g,""),Ft.innerHTML="",Ft.innerHTML=e,!0===t?Ft.childNodes:Ft.childNodes[0])}function Xt(e){return e.key||e.keyIdentifier?e.key||String.fromCharCode(parseInt(e.keyIdentifier.substr(2),16)):null}var Gt=function(e){"use strict";c(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,n),e=t.call(this);var s={_defaults:{focusedItem:null,cache:{},timer:null,xhr:null,suggested:!1,suggestedItems:[],setItems:[],events:{},delimiters:{}},_options:{el:null,form:!0,mode:"tokenfield",addItemOnBlur:!1,addItemsOnPaste:!1,keepItemsOrder:!0,setItems:[],items:[],newItems:!0,multiple:!0,maxItems:0,minLength:0,keys:{17:"ctrl",16:"shift",91:"meta",8:"delete",27:"esc",37:"left",38:"up",39:"right",40:"down",46:"delete",65:"select",67:"copy",88:"cut",9:"delimiter",13:"delimiter",108:"delimiter"},matchRegex:"{value}",matchFlags:"i",matchStart:!1,matchEnd:!1,delimiters:[],copyProperty:"name",copyDelimiter:", ",remote:{type:"GET",url:null,queryParam:"q",delay:300,timestampParam:"t",params:{},headers:{}},placeholder:null,inputType:"text",minChars:2,maxSuggest:10,maxSuggestWindow:10,filterSetItems:!0,filterMatchCase:!1,singleInput:!1,singleInputValue:"id",singleInputDelimiter:", ",itemLabel:"name",itemName:"items",newItemName:"items_new",itemValue:"id",newItemValue:"name",itemData:"name",validateNewItem:null}},a=s._defaults,u=s._options;e.id=Wt(),e.key="key_".concat(e.id),e._vars=Object.assign({},a),e._options=Object.assign({},u,r),e._options.keys=Object.assign({},u.keys,r.keys),e._options.remote=Object.assign({},u.remote,r.remote),e._templates=Object.assign({},Vt,r.templates),e._vars.setItems=e._prepareData(e.remapData(e._options.setItems||[])),e._focused=!1,e._input=null,e._form=!1,e._html={};var c=e._options;c.delimiters.forEach((function(t){e._vars.delimiters[t]=!0}));var l=zt(c.el);if(!l)throw new Error("Selector: DOM Element ".concat(c.el," not found."));if(e.el=l,c.singleInput){var d=zt(c.singleInput);e._input=d||e.el}if(e.el.tokenfield=i(e),null===c.placeholder&&(c.placeholder=c.el.placeholder||""),!c.form)throw new Error("Cannot create tokenfield without DOM Element.");var f=!1;if(c.form.nodeName)f=c.form;else if(!0===c.form)for(var h=e.el;h.parentNode;){if("FORM"===h.nodeName){f=h;break}h=h.parentNode}else if("string"==typeof f&&!(f=document.querySelector(f)))throw new Error("Selector: DOM Element ".concat(c.form," not found."));return e._form=f,Ht[e.id]=i(e),e._render(),e}return s(n,[{key:"_render",value:function(){var e=this._options,t=this._html;return"tokenfield"===e.mode?t.container=Kt(this._templates.containerTokenfield):t.container=Kt(this._templates.containerList),t.suggest=t.container.querySelector(".tokenfield-suggest"),t.suggestList=t.container.querySelector(".tokenfield-suggest-list"),t.items=t.container.querySelector(".tokenfield-set > ul"),t.input=t.container.querySelector(".tokenfield-input"),t.input.setAttribute("type",e.inputType),"tokenfield"===e.mode?t.input.placeholder=this._vars.setItems.length?"":e.placeholder:t.input.placeholder=e.placeholder,t.copyHelper=t.container.querySelector(".tokenfield-copy-helper"),e.el.style.display="none",t.suggest.style.display="none",this._renderSizer(),t.container.tokenfield=this,e.el.parentElement.insertBefore(t.container,e.el),t.container.insertBefore(e.el,t.container.firstChild),this._setEvents(),this._renderItems(),"tokenfield"===e.mode&&this._resizeInput(),this}},{key:"_renderSizer",value:function(){var e=this._html,t=this._getBounds(),n=window.getComputedStyle(e.container),i=parseInt(n.paddingLeft,10)+parseInt(n.paddingRight,10),o={width:"auto",height:"auto",overflow:"hidden",whiteSpace:"pre",maxWidth:t.width-i+"px",position:"fixed",top:"-10000px",left:"10000px",fontSize:n.fontSize,paddingLeft:n.paddingLeft,paddingRight:n.paddingRight};for(var r in e.sizer=document.createElement("div"),e.sizer.id="tokenfield-sizer-"+this.id,o)e.sizer.style[r]=o[r];e.container.appendChild(e.sizer)}},{key:"_minimizeInput",value:function(){return this._html.input.style.width="20px",this}},{key:"_refreshInput",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this._vars,n=this._html;if(e&&(n.input.value=""),"tokenfield"===this._options.mode){this._resizeInput();var i=t.setItems.length?"":this._options.placeholder;n.input.setAttribute("placeholder",i)}else"list"===this._options.mode&&n.input.setAttribute("placeholder",this._options.placeholder);return this}},{key:"_resizeInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this._html,n=this._getBounds(),i=window.getComputedStyle(t.container),o=parseInt(i.paddingRight,10)+parseInt(i.borderRightWidth,10),r=o+parseInt(i.paddingLeft,10)+parseInt(i.borderLeftWidth,10);if(t.sizer.innerHTML=e,t.sizer.style.maxWidth=n.width-o+"px",0!==n.width){t.input.style.width="20px";var s=t.sizer.getBoundingClientRect(),a=t.input.getBoundingClientRect(),u=n.width-(a.left-n.left)-o;s.width>u?t.input.style.width=n.width-r-1+"px":t.input.style.width=u-1+"px"}else t.input.style.width="100%"}},{key:"_fetchData",value:function(e){var t=this,n=this._vars,i=this._options,o=i.remote,r=Object.assign({},i.params);for(var s in o.params)r[s]=o.params[s];o.limit&&(r[o.limit]=i.remote.limit),r[o.queryParam]=e,r[o.timestampParam]=Math.round((new Date).getTime()/1e3),n.xhr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=new XMLHttpRequest,o=t.url,r=[];for(var s in e)r.push("".concat(s,"=").concat(encodeURIComponent(e[s])));var a=r.join("&");for(var u in"get"===t.type.toLowerCase()&&(o+="?"+a),i.open(t.type,o,!0),t.headers){var c=t.headers[u];"function"==typeof c&&(c=c(e,t)),i.setRequestHeader(u,c)}return n&&(i.onreadystatechange=n),i.send(e),i}(r,i.remote,(function(){if(n.xhr&&4==n.xhr.readyState){if(200==n.xhr.status){var o=JSON.parse(n.xhr.responseText);n.cache[e]=o;var r=t._prepareData(t.remapData(o)),s=t._filterData(e,r);n.suggestedItems=i.filterSetItems?t._filterSetItems(s):s,t.showSuggestions()}else if(n.xhr.status>0)throw new Error("Error while loading remote data.");t._abortXhr()}}))}},{key:"remapData",value:function(e){return e}},{key:"_prepareData",value:function(e){var t=this;return e.map((function(e){return Object.assign({},e,a({},t.key,Wt()))}))}},{key:"_filterData",value:function(e,t){var n,i=this._options,o=i.matchRegex.replace("{value}",(n=function(e){if("string"==typeof e)return e;if(null===e)return"";var t=e+"";return"0"===t&&1/e==-1/0?"-0":t}(n=e))&&qt.test(n)?n.replace(Bt,"\\$&"):n);i.matchStart?o="^"+o:i.matchEnd&&(o+="$");var r=new RegExp(o,i.matchFlags);return t.filter((function(e){return r.test(e[i.itemData])}))}},{key:"_abortXhr",value:function(){var e=this._vars;null!==e.xhr&&(e.xhr.abort(),e.xhr=null)}},{key:"_filterSetItems",value:function(e){var t=this._options.itemValue,n=this._vars;if(!n.setItems.length)return e;var i=n.setItems.map((function(e){return e[t]}));return e.filter((function(e){return-1===i.indexOf(e[t])}))}},{key:"_setEvents",value:function(){var e=this._vars,t=this._html;e.events.onClick=this._onClick.bind(this),e.events.onMouseDown=this._onMouseDown.bind(this),e.events.onMouseOver=this._onMouseOver.bind(this),e.events.onFocus=this._onFocus.bind(this),e.events.onResize=this._onResize.bind(this),e.events.onReset=this._onReset.bind(this),e.events.onKeyDown=this._onKeyDown.bind(this),e.events.onFocusOut=this._onFocusOut.bind(this),t.container.addEventListener("click",e.events.onClick),1===Object.keys(Ht).length&&(document.addEventListener("mousedown",e.events.onMouseDown),window.addEventListener("resize",e.events.onResize)),this._form&&this._form.nodeName&&this._form.addEventListener("reset",e.events.onReset),t.suggestList.addEventListener("mouseover",e.events.onMouseOver),t.input.addEventListener("focus",e.events.onFocus)}},{key:"_onMouseOver",value:function(e){var t=e.target;t.classList.contains("tokenfield-suggest-item")&&([].slice.call(this._html.suggestList.querySelectorAll(".selected")).forEach((function(e){e!==t&&e.classList.remove("selected")})),t.classList.add("selected"),this._selectItem(t.key,!1),this._refreshItemsSelection())}},{key:"_onReset",value:function(){this.setItems(this._options.setItems)}},{key:"_onFocus",value:function(){var e=this._vars,t=this._html,n=this._options;t.input.removeEventListener("keydown",e.events.onKeyDown),t.input.addEventListener("keydown",e.events.onKeyDown),t.input.addEventListener("focusout",e.events.onFocusOut),n.addItemsOnPaste&&(e.events.onPaste=this._onPaste.bind(this),t.input.addEventListener("paste",e.events.onPaste)),this._focused=!0,this._html.container.classList.add("focused"),this._resizeInput(),t.input.value.trim().length>=n.minChars&&this.showSuggestions()}},{key:"_onFocusOut",value:function(e){var t=this._vars,n=this._options,i=this._html;if(i.input.removeEventListener("keydown",t.events.onKeyDown),i.input.removeEventListener("focusout",t.events.onFocusOut),void 0!==t.events.onPaste&&i.input.removeEventListener("paste",t.events.onPaste),!e.relatedTarget||e.relatedTarget!==i.copyHelper){var o=n.multiple&&!n.maxItems||!n.multiple&&!t.setItems.length||n.multiple&&n.maxItems&&t.setItems.length<n.maxItems;this._focused&&n.addItemOnBlur&&o&&this._newItem(i.input.value)?this._renderItems()._refreshInput():this._defocusItems()._renderItems(),this._focused=!1,this._html.container.classList.remove("focused")}}},{key:"_onMouseDown",value:function(e){var t=null;for(var n in Ht)if(Ht[n]._html.container.contains(e.target)){t=Ht[n];break}if(t){for(var i in Ht)i!==t.id&&(Ht[i].hideSuggestions(),Ht[i].blur());e.target!==t._html.input&&e.preventDefault()}else for(var o in Ht)Ht[o].hideSuggestions(),Ht[o].blur()}},{key:"_onResize",value:function(){for(var e in Ht)Ht[e]._resizeInput(Ht[e]._html.input.value)}},{key:"_onPaste",value:function(e){var t=this,n=this._vars,i=this._options,o=e.clipboardData.getData("text"),r=[o];if(i.delimiters.length){var s=i.delimiters.join("|"),a=new RegExp("(".concat(s,")"),"ig");r=o.split(a)}if(r.map((function(e){return e.trim()})).filter((function(e){return e.length>0&&e.length>=i.minLength&&void 0===n.delimiters[e]})).map((function(e){return t._newItem(e)})).length){var u=this;setTimeout((function(){u._renderItems()._refreshInput()._deselectItems().hideSuggestions()}),1),e.preventDefault()}}},{key:"_onKeyDown",value:function(e){var t=this,n=this._vars,i=this._options,o=this._html;i.maxItems&&n.setItems.length>=i.maxItems&&e.preventDefault(),"tokenfield"===i.mode&&setTimeout((function(){t._resizeInput(o.input.value)}),1);var r=Xt(e);if(void 0!==i.keys[e.keyCode]||Ut(i.delimiters,r)){if(this._keyAction(e))return!0}else this._defocusItems()._refreshItems();clearTimeout(n.timer),this._abortXhr(),(!i.maxItems||n.setItems.length<i.maxItems)&&setTimeout((function(){t._keyInput(e)}),1)}},{key:"_keyAction",value:function(e){this.key;var t=null,n=this._vars,i=this._options,o=this._html,r=i.keys[e.keyCode],s=o.input.value.trim(),a=Xt(e);Ut(i.delimiters,a)&&void 0===r&&(r="delimiter");var u=this._getSelectedItems();switch(u.length&&(t=u[0]),r){case"esc":this._deselectItems()._defocusItems()._renderItems().hideSuggestions();break;case"up":this._vars.suggested&&(this._selectPrevItem()._refreshItemsSelection(),e.preventDefault()),this._defocusItems()._renderItems();break;case"down":this._vars.suggested&&(this._selectNextItem()._refreshItemsSelection(),e.preventDefault()),this._defocusItems()._renderItems();break;case"left":(this.getFocusedItems().length||!o.input.selectionStart&&!o.input.selectionEnd)&&(this._focusPrevItem(e.shiftKey),e.preventDefault());break;case"right":(this.getFocusedItems().length||o.input.selectionStart===s.length)&&(this._focusNextItem(e.shiftKey),e.preventDefault());break;case"delimiter":if(this._abortXhr(),this._defocusItems(),!i.multiple&&n.setItems.length>=1)return!1;s=this.onInput(s,e),t?this._addItem(t):s.length&&(t=this._newItem(s)),t&&this._minimizeInput()._renderItems().focus()._refreshInput()._refreshSuggestions()._deselectItems(),e.preventDefault();break;case"select":if(s.length||!e.ctrlKey&&!e.metaKey)return!1;this._vars.setItems.forEach((function(e){e.focused=!0})),this._refreshItems();break;case"cut":if(!this.getFocusedItems().length||!e.ctrlKey&&!e.metaKey)return!1;this._copy()._delete(e);break;case"copy":if(!this.getFocusedItems().length||!e.ctrlKey&&!e.metaKey)return!1;this._copy();break;case"delete":var c=this;this._abortXhr();var l=this.getFocusedItems();!o.input.selectionEnd&&8===e.keyCode||o.input.selectionStart===s.length&&46===e.keyCode||l.length?this._delete(e):n.timer=setTimeout((function(){c._keyInput(e)}),i.delay)}return!0}},{key:"_copy",value:function(){var e=this._options,t=this._html,n=this.getFocusedItems().map((function(t){return t[e.copyProperty]})).join(e.copyDelimiter);return t.copyHelper.style.display="block",t.copyHelper.value=n,t.copyHelper.focus(),t.copyHelper.select(),document.execCommand("copy"),t.copyHelper.style.display="none",t.copyHelper.value="",t.input.focus(),this}},{key:"_delete",value:function(e){var t=this._vars,n=this._options,i=this.key,o=this._html,r=this.getFocusedItems();if("tokenfield"===n.mode&&t.setItems.length)if(r.length){var s=this;r.forEach((function(e){s._removeItem(e[i])})),this._refreshSuggestions()._keyInput(e)}else o.input.selectionStart||this._focusItem(t.setItems[t.setItems.length-1][i]);else if(r.length){var a=this;r.forEach((function(e){a._removeItem(e[i])})),this._refreshSuggestions()._keyInput(e)}return this._minimizeInput()._renderItems()._refreshInput(!1),this}},{key:"_keyInput",value:function(e){var t=this._vars,n=this._options,i=this._html;this._defocusItems()._refreshItems();var o=this.onInput(i.input.value.trim(),e);if("keydown"===e.type&&this.emit("input",this,o,e),o.length<n.minChars)return this.hideSuggestions(),!1;if(!n.multiple&&t.setItems.length>=1)return!1;if(void 0===t.cache[o]){var r=this;if(n.remote.url)t.timer=setTimeout((function(){r._fetchData(o)}),n.delay);else if(!n.remote.url&&n.items.length){var s=this._prepareData(n.items),a=this._filterData(o,s);t.suggestedItems=n.filterSetItems?this._filterSetItems(a):a,this.showSuggestions()}}else{var u=this._prepareData(this.remapData(t.cache[o])),c=this._filterData(o,u);t.suggestedItems=n.filterSetItems?this._filterSetItems(c):c,this.showSuggestions()}return this}},{key:"_onClick",value:function(e){var t=e.target;if(t.classList.contains("item-remove"))e.preventDefault(),this._removeItem(t.key)._defocusItems()._minimizeInput()._renderItems()._refreshInput(!1)._keyInput(e);else if(t.classList.contains("tokenfield-suggest-item")){var n=this._getSuggestedItem(t.key);this._addItem(n)._minimizeInput()._renderItems()._refreshInput()._refreshSuggestions()}else{var i=function(e){for(var t=[e];e.parentNode;)e=e.parentNode,t.push(e);return t}(t).filter((function(e){return e.classList&&e.classList.contains("tokenfield-set-item")}))[0];i?(this._focusItem(i.key,e.shiftKey,e.ctrlKey||e.metaKey,!0),this._refreshItems()):this._keyInput(e)}this.focus()}},{key:"_selectPrevItem",value:function(){var e=this.key,t=this._options,n=this._vars.suggestedItems,i=this._getSelectedItemIndex();return n.length?(null!==i?0===i?t.newItems?this._deselectItems():this._selectItem(n[n.length-1][e]):this._selectItem(n[i-1][e]):this._selectItem(n[n.length-1][e]),this):this}},{key:"_selectNextItem",value:function(){var e=this.key,t=this._options,n=this._vars.suggestedItems,i=this._getSelectedItemIndex();return n.length?(null!==i?i===n.length-1?t.newItems?this._deselectItems():this._selectItem(n[0][e]):this._selectItem(n[i+1][e]):this._selectItem(n[0][e]),this):this}},{key:"_focusPrevItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.key,n=this._vars.setItems,i=this._getFocusedItemIndex();if(!n.length)return this;if(null!==i)if(0!==i||e)if(0===i&&e){var o=this._getFocusedItemIndex(!0);this._defocusItem(n[o][t])}else this._focusItem(n[i-1][t],e,!1,!0);else this._defocusItems();else this._focusItem(n[n.length-1][t],!1,!1,!0);return this._refreshItems(),this}},{key:"_focusNextItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.key,n=this._vars.setItems,i=this._getFocusedItemIndex(!0);return n.length?(null!==i?i!==n.length-1||e?i===n.length-1&&e?this._focusItem(n[0][t],e):this._focusItem(n[i+1][t],e):this._defocusItems():this._focusItem(n[0][t],!1),this._refreshItems(),this):this}},{key:"_getSelectedItems",value:function(){var e=this.key,t=this._vars.setItems.map((function(t){return t[e]}));return this._vars.suggestedItems.filter((function(n){return n.selected&&t.indexOf(n[e])<0}))}},{key:"_selectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;this._vars.suggestedItems.forEach((function(i){if(i.selected=i[n.key]===e,i.selected&&t){var o=parseInt(n._html.suggest.style.maxHeight,10);if(o){var r=n._html.suggestList.getBoundingClientRect(),s=i.el.getBoundingClientRect(),a=s.top-r.top,u=a+s.height;u>=o+n._html.suggest.scrollTop?n._html.suggest.scrollTop=u-o:a<n._html.suggest.scrollTop&&(n._html.suggest.scrollTop=a)}}}))}},{key:"_deselectItem",value:function(e){var t=this;return this._vars.suggestedItems.every((function(n){return n[t.key]!==e||(n.selected=!1,!1)})),this}},{key:"_deselectItems",value:function(){return this._vars.suggestedItems.forEach((function(e){e.selected=!1})),this}},{key:"_refreshItemsSelection",value:function(){this._vars.suggestedItems.forEach((function(e){e.selected&&e.el?e.el.classList.add("selected"):e.el&&e.el.classList.remove("selected")}))}},{key:"_getSelectedItemIndex",value:function(){var e=null;return this._vars.suggestedItems.every((function(t,n){return!t.selected||(e=n,!1)})),e}},{key:"_getFocusedItemIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null;return this._vars.setItems.every((function(n,i){return!(n.focused&&(t=i,!e))})),t}},{key:"_getItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t&&(t=this.key);var n=this._filterItems(this._vars.setItems,e,t);return n.length?n[0]:null}},{key:"_getSuggestedItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t&&(t=this.key);var n=this._filterItems(this._vars.suggestedItems,e,t);return n.length?n[0]:null}},{key:"_getAvailableItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t&&(t=this.key);var n=this._filterItems(this._options.items,e,t);return n.length?n[0]:null}},{key:"_filterItems",value:function(e,t,n){var i=this._options.filterMatchCase;return e.filter((function(e){return"string"==typeof e[n]&&"string"==typeof t?i?e[n]===t:e[n].toLowerCase()==t.toLowerCase():e[n]==t}))}},{key:"_removeItem",value:function(e){var t=this;return this._vars.setItems.every((function(n,i){return n[t.key]!==e||(t.emit("removeToken",t,n),t._vars.setItems.splice(i,1),t.emit("removedToken",t,n),t.emit("change",t),!1)})),this}},{key:"_addItem",value:function(e){e.focused=!1;var t=this._options;if((e.isNew&&!this._getItem(e[t.itemData],t.itemData)||!this._getItem(e[t.itemValue],t.itemValue))&&(this.emit("addToken",this,e),!this._options.maxItems||this._options.maxItems&&this._vars.setItems.length<this._options.maxItems)){e.selected=!1;var n=Object.assign({},e);this._vars.setItems.push(n),this.emit("addedToken",this,n),this.emit("change",this)}return this}},{key:"getFocusedItem",value:function(){var e=this._vars.setItems.filter((function(e){return e.focused}))[0];return e.length?e[0]:null}},{key:"getFocusedItems",value:function(){return this._vars.setItems.filter((function(e){return e.focused}))}},{key:"_focusItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this;if(t){var r=this,s=null,a=null,u=null,c=this._vars.setItems.length;if(this._vars.setItems.forEach((function(t,n){t[r.key]===e&&(u=n),null===s&&t.focused&&(s=n),t.focused&&(a=n)})),(0===u||u===c-1)&&null===s&&null===a)return;null===s&&null===a?this._vars.setItems[u].focused=!0:0!==u||a!==c-1||i?(s=Math.min(u,s),a=Math.max(u,a),this._vars.setItems.forEach((function(e,t){e.focused=u===t||t>=s&&t<=a}))):this._vars.setItems[s].focused=!1}else this._vars.setItems.forEach((function(t){t.focused=n?t[o.key]===e?!t.focused:t.focused:t[o.key]===e}));return this}},{key:"_defocusItem",value:function(e){var t=this;return this._vars.setItems.filter((function(n){n[t.key]===e&&(n.focused=!1)}))}},{key:"_defocusItems",value:function(){return this._vars.setItems.forEach((function(e){e.focused=!1})),this}},{key:"_newItem",value:function(e){var t=this._options;if("string"==typeof e&&(!e.length||e.length<t.minLength))return null;var n=this._getItem(e,t.itemData)||this._getSuggestedItem(e,t.itemData)||this._getAvailableItem(e,t.itemData);if(!n&&t.newItems){if("function"==typeof t.validateNewItem&&!t.validateNewItem(e))return null;var i;a(i={isNew:!0},this.key,Wt()),a(i,t.itemData,e),n=i,this.emit("newToken",this,n)}return n?(this._addItem(n),n):null}},{key:"_buildEl",value:function(e){return Kt(e)}},{key:"_getBounds",value:function(){return this._html.container.getBoundingClientRect()}},{key:"_renderItems",value:function(){var e=this,t=this._vars,n=this._options,i=this._html;return i.items.innerHTML="",t.setItems.forEach((function(t,n){var o=e._renderItem(t,n);i.items.appendChild(o),t.el=o,t.focused?t.el.classList.add("focused"):t.el.classList.remove("focused")})),t.setItems.length>1&&"tokenfield"===n.mode?i.input.setAttribute("placeholder",""):"list"===n.mode&&i.input.setAttribute("placeholder",n.placeholder),this._input&&(this._input.value=t.setItems.map((function(e){return e[n.singleInputValue]})).join(n.singleInputDelimiter)),this}},{key:"_refreshItems",value:function(){this._vars.setItems.forEach((function(e){e.el&&(e.focused?e.el.classList.add("focused"):e.el.classList.remove("focused"))}))}},{key:"_renderItem",value:function(e,t){var n=this._options,i=this.renderSetItemHtml(e),o=i.querySelector(".item-label"),r=i.querySelector(".item-input"),s=i.querySelector(".item-remove"),a=n.keepItemsOrder?"[".concat(t,"]"):"[]";return i.key=e[this.key],s.key=e[this.key],r.setAttribute("name",(e.isNew?n.newItemName:n.itemName)+a),r.value=e[e.isNew?n.newItemValue:n.itemValue]||null,o.textContent=this.renderSetItemLabel(e),e.focused&&i.classList.add("focused"),i}},{key:"onInput",value:function(e,t){return e}},{key:"renderSetItemHtml",value:function(){return this._buildEl(this._templates.setItem)}},{key:"renderSetItemLabel",value:function(e){return e[this._options.itemLabel]}},{key:"renderSuggestions",value:function(e){var t=this,n=this._vars,i=this._options,o=this._html,r=this._getSelectedItemIndex();if(!e.length)return this;if(0===i.maxSuggestWindow&&(o.suggest.style.maxHeight=null),!n.suggestedItems.length)return this;i.newItems||null!==r||(e[0].selected=!0);var s=0;e.every((function(e,n){if(n>=i.maxSuggest)return!1;var r=o.suggestList.childNodes[n],a=e.el=t.renderSuggestedItem(e);return r?r.itemValue===e[i.itemValue]?(r.key=e[t.key],e.el=r):o.suggestList.replaceChild(a,r):r||o.suggestList.appendChild(a),i.maxSuggestWindow>0&&n<i.maxSuggestWindow&&(s+=o.suggestList.childNodes[n].getBoundingClientRect().height),i.maxSuggestWindow>0&&n===i.maxSuggestWindow&&(o.suggest.style.maxHeight=s+"px"),!0}));var a=o.suggestList.childElementCount-e.length;if(a>0)for(var u=a-1;u>=0;u--)o.suggestList.removeChild(o.suggestList.childNodes[e.length+u]);return this}},{key:"renderSuggestedItem",value:function(e){var t=this._options,n=this._buildEl(this._templates.suggestItem);(n.key=e[this.key],n.itemValue=e[t.itemValue],n.innerHTML=this.renderSuggestedItemContent(e),n.setAttribute("title",e[t.itemData]),e.selected&&n.classList.add("selected"),t.filterSetItems)||(this._getItem(e[t.itemValue],t.itemValue)||this._getItem(e[t.itemData],t.itemData))&&n.classList.add("set");return n}},{key:"renderSuggestedItemContent",value:function(e){return e[this._options.itemData]}},{key:"_refreshSuggestions",value:function(){var e=this._vars,t=this._options;if(this._html.input.value.length<t.minChars)return this.hideSuggestions(),this;var n=this._prepareData(t.items),i=this._filterData(this._html.input.value,n);return e.suggestedItems=t.filterSetItems?this._filterSetItems(i):i,e.suggestedItems.length&&(!t.maxItems||t.maxItems&&e.setItems.length<t.maxItems)?(this.renderSuggestions(e.suggestedItems),this):(this.hideSuggestions(),this)}},{key:"showSuggestions",value:function(){var e=this._vars,t=this._options;return e.suggestedItems.length?(this.emit("showSuggestions",this),(!t.maxItems||t.maxItems&&e.setItems.length<t.maxItems)&&(this._html.suggest.style.display="block",e.suggested=!0,this.renderSuggestions(e.suggestedItems)),this.emit("shownSuggestions",this)):this.hideSuggestions(),this}},{key:"hideSuggestions",value:function(){return this.emit("hideSuggestions",this),this._vars.suggested=!1,this._html.suggest.style.display="none",this._html.suggestList.innerHTML="",this.emit("hiddenSuggestions",this),this}},{key:"setSuggestedItems",value:function(e){if(!Array.isArray(e))throw new Error("Argument must be an array of objects.");this._options.items=e,this._refreshSuggestions()}},{key:"getItems",value:function(){var e=this;return this._vars.setItems.map((function(t){var n=Object.assign({},t);return delete n[e.key],delete n.el,n}))}},{key:"setItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this._vars.setItems=[],this.addItems(e),this}},{key:"addItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this,n=this._options.itemValue;return Array.isArray(e)||(e=[e]),this._prepareData(e).forEach((function(e){(e.isNew||void 0!==e[n])&&t._addItem(e)})),this._minimizeInput()._renderItems()._refreshInput().hideSuggestions(),this}},{key:"sortItems",value:function(){var e=this,t=[];d(this._html.items.childNodes).forEach((function(n){var i=e._getItem(n.key);i&&t.push(i)})),this.setItems(t)}},{key:"removeItem",value:function(e){var t=this._options;"object"==typeof e&&(e[t.itemValue]||e[t.newItemValue])&&(e=e[t.itemValue]||e[t.newItemValue]);var n=this._getItem(e,t.itemValue)||this._getItem(e,t.newItemValue);return n?(this._removeItem(n[this.key])._renderItems(),this):this}},{key:"emptyItems",value:function(){return this._vars.setItems=[],this._renderItems()._refreshInput().hideSuggestions(),this.emit("change",this),this}},{key:"getSuggestedItems",value:function(){return this._vars.suggestedItems.map((function(e){return Object.assign({},e)}))}},{key:"focus",value:function(){return this._html.container.classList.add("focused"),this._focused||this._html.input.focus(),this}},{key:"blur",value:function(){return this._html.container.classList.remove("focused"),this._focused&&this._html.input.blur(),this}},{key:"remove",value:function(){var e=this._html;e.container.parentElement.insertBefore(this.el,e.container),e.container.remove(),this.el.style.display="block",1===Object.keys(Ht).length&&(document.removeEventListener("mousedown",this._vars.events.onMouseDown),window.removeEventListener("resize",this._vars.events.onResize)),this._form&&this._form.nodeName&&this._form.removeEventListener("reset",this._vars.events.onReset),delete Ht[this.id],delete this.el.tokenfield}}]),n}(t(xt)),Yt=function(e){"use strict";c(n,e);var t=v(n);function n(){var e;return o(this,n),a(i(e=t.apply(this,arguments)),"_renderItem",(function(t,n){var i=e._options,o=e.renderSetItemHtml(t),r=o.querySelector(".item-label"),s=o.querySelector(".item-input"),a=o.querySelector(".item-remove");return o.key=t[e.key],a.key=t[e.key],s.setAttribute("name",t.isNew?i.newItemName:i.itemName),s.value=t[t.isNew?i.newItemValue:i.itemValue]||null,r.textContent=e.renderSetItemLabel(t),t.focused&&o.classList.add("focused"),o})),e}return n}(Gt),Jt=window.TokenField=Yt;var Zt=function(e){return e.forEach((function(e,t){t>2&&e.classList.add("app-hidden--force")}))},Qt=function(){document.querySelectorAll(".destinations__list").forEach((function(e){var t=e.querySelectorAll("li");if(!(t.length<=3)){Zt(t);var n=!0,i=e.parentElement,o=document.createElement("button");o.className="lite-button--link",o.innerText="View all (".concat(t.length,")"),i.appendChild(o),o.addEventListener("click",(function(e){e.preventDefault(),n?(t.forEach((function(e){return e.classList.remove("app-hidden--force")})),n=!1,o.innerText="View less"):(Zt(t),n=!0,o.innerText="View all (".concat(t.length,")"))}))}}))};$(document).ready((function(){var e,i;n.initAll(),function(){$("#link-menu").removeAttr("href");var e=document.getElementById("lite-menu");e&&(e.style.display="block",bt("#link-menu",{content:e,allowHTML:!0,interactive:!0,animation:"scale-subtle",trigger:"click",theme:"light",placement:"bottom"}),bt("*[data-tooltip]",{content:function(e){return e.getAttribute("data-tooltip")},allowHTML:!0,animation:"scale-subtle"}),bt(".app-flag--label",{content:function(e){return e.getAttribute("data-label")}}))}(),function(){$("#filter-queues").on("input",(function(){var e=$("#filter-queues").val(),t=!1;$("#queues a").hide(),$("#queues > span").hide(),$("#queues a").each((function(){-1!=$(this).text().toUpperCase().indexOf(e.toUpperCase())&&($(this).show(),t=!0)})),t||$("#queues > span").show()})),$("#link-queue").removeAttr("href");var e=document.getElementById("queues");e&&(e.style.display="block",bt("#link-queue",{content:e,allowHTML:!0,interactive:!0,animation:"scale-subtle",trigger:"click",theme:"light",placement:"bottom-start",arrow:null,onShown:function(e){$("#filter-queues").val(""),$("#filter-queues").focus()}}))}(),e=$(".app-flags--list"),i=$("#js-chevron-svg").html(),e.each((function(){var e=$(this).find(".app-flag");if(e.each((function(e){e>2&&$(this).addClass("app-hidden--force").attr("aria-hidden",!0)})),e.length>3){var t=$("<button></button>"),n=$("<span>3 of ".concat(e.length,"</span>"));t.attr({class:"app-flags__expander",type:"button","aria-label":"Show more"}).append(i).append(n),$(this).parent().append(t)}})),$(".app-flags__expander").on("click keypress",(function(e){$(this).prev().find(".app-hidden--force").removeClass("app-hidden--force").attr("aria-hidden",!1).addClass("app-flag--animate"),$(this).attr("aria-hidden",!0).hide()})),function(){var e=function(e){e.parentElement.classList.add("tokenfield-container");for(var t=[],n=[],i=0;i<e.options.length;i++){var o=e.options.item(i),r={id:o.value,name:o.value,classes:[]};o.selected&&n.push(r),t.push(r)}var s=new Jt({el:e,items:t,newItems:!1,addItemOnBlur:!0,filterSetItems:!1,addItemsOnPaste:!0,minChars:1,itemName:e.name,setItems:n,keepItemsOrder:!1});return s._renderItems(),s._html.container.id=e.id,e.remove(),s},n="report_summary",i=document.getElementById(n);i&&new(t(kt))({trigger:{event:["input"]},data:{src:function(){var e=i.value.toLowerCase();return fetch("/team/picklists/.json?type=report_summary&name="+e).then((function(e){return e.json().then((function(e){return e.results.map((function(e){return{value:e.name,text:e.text}}))}))}))},key:["value"],cache:!1},selector:"#report_summary",threshold:1,debounce:300,resultsList:{render:!0,element:"table",container:function(e){e.setAttribute("id","autoComplete_list"),i.addEventListener("autoComplete",(function(e){document.addEventListener("click",(function e(){for(var t=document.getElementById("autoComplete_list");t.firstChild;)t.removeChild(t.firstChild);document.removeEventListener("click",e)}))}))}},resultItem:{content:function(e,t){t.innerHTML='<td><div class="govuk-heading-s govuk-!-margin-0">'+e.value.value+'</div><div class="govuk-caption-xs govuk-!-margin-0">'+e.value.text+"</div></td>"},element:"tr"},searchEngine:function(e,t){return t},onSelection:function(e){i.value=e.selection.value.text},maxResults:15});var o=document.getElementById("control_list_entries"),r=document.getElementById("control_rating");if(o||r){r.style.display="none",e(r);var s=document.createElement("div");o.parentElement.appendChild(s),e(o).on("change",(function(e){var t=e.getItems().filter((function(e){return null!==e.name.match(/[a-zA-Z]$/)})).map((function(e){return"<div>"+e.name+" may need an alternative control list entry because of its destination</div>"}));t.length>0?s.innerHTML="<div class='govuk-inset-text'>"+t.join("")+"</div>":s.innerHTML=""}))}}(),_("app-cookie-banner","js-accept-cookie"),Qt()}))}();
//# sourceMappingURL=main.js.map
