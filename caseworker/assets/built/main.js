!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function t(e){return e&&e.__esModule?e.default:e}var n={};function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){return a(e)}function c(e){return e&&e.constructor===Symbol?"symbol":typeof e}function l(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?i(e):t}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function m(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function g(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function y(e){return function(e){if(Array.isArray(e))return v(e)}(e)||m(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(t){"use strict";var n=function(e,t){if(window.NodeList.prototype.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t.call(window,e[n],n,e)},i=function(){var e=(new Date).getTime();return void 0!==window.performance&&"function"==typeof window.performance.now&&(e+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))},r=function(e){this.$module=e,this.moduleId=e.getAttribute("id"),this.$sections=e.querySelectorAll(".govuk-accordion__section"),this.$openAllButton="",this.browserSupportsSessionStorage=v.checkForSessionStorage(),this.controlsClass="govuk-accordion__controls",this.openAllClass="govuk-accordion__open-all",this.iconClass="govuk-accordion__icon",this.sectionHeaderClass="govuk-accordion__section-header",this.sectionHeaderFocusedClass="govuk-accordion__section-header--focused",this.sectionHeadingClass="govuk-accordion__section-heading",this.sectionSummaryClass="govuk-accordion__section-summary",this.sectionButtonClass="govuk-accordion__section-button",this.sectionExpandedClass="govuk-accordion__section--expanded"},o=function(e){this.$module=e,this.debounceFormSubmitTimer=null},s=function(e){this.$module=e},a=function(e){this.$module=e,this.$textarea=e.querySelector(".govuk-js-character-count"),this.$textarea&&(this.$countMessage=e.querySelector('[id="'+this.$textarea.id+'-info"]'))},u=function(e){this.$module=e,this.$inputs=e.querySelectorAll('input[type="checkbox"]')},l=function(e){this.$module=e},d=function(e){this.$module=e},h=function(e){this.$module=e,this.$menuButton=e&&e.querySelector(".govuk-js-header-toggle"),this.$menu=this.$menuButton&&e.querySelector("#"+this.$menuButton.getAttribute("aria-controls"))},f=function(e){this.$module=e,this.$inputs=e.querySelectorAll('input[type="radio"]')},p=function(e){this.$module=e,this.$tabs=e.querySelectorAll(".govuk-tabs__tab"),this.keys={left:37,right:39,up:38,down:40},this.jsHiddenClass="govuk-tabs__panel--hidden"},m=function(e){var t=void 0!==(e=void 0!==e?e:{}).scope?e.scope:document,i=t.querySelectorAll('[data-module="govuk-button"]');n(i,(function(e){new o(e).init()}));var c=t.querySelectorAll('[data-module="govuk-accordion"]');n(c,(function(e){new r(e).init()}));var m=t.querySelectorAll('[data-module="govuk-details"]');n(m,(function(e){new s(e).init()}));var v=t.querySelectorAll('[data-module="govuk-character-count"]');n(v,(function(e){new a(e).init()}));var g=t.querySelectorAll('[data-module="govuk-checkboxes"]');n(g,(function(e){new u(e).init()}));var y=t.querySelector('[data-module="govuk-error-summary"]');new l(y).init();var b=t.querySelector('[data-module="govuk-header"]');new h(b).init();var _=t.querySelectorAll('[data-module="govuk-notification-banner"]');n(_,(function(e){new d(e).init()}));var w=t.querySelectorAll('[data-module="govuk-radios"]');n(w,(function(e){new f(e).init()}));var k=t.querySelectorAll('[data-module="govuk-tabs"]');n(k,(function(e){new p(e).init()}))};(function(e){var t,n,i,r;"defineProperty"in Object&&function(){try{var e={};return Object.defineProperty(e,"test",{value:42}),!0}catch(e){return!1}}()||(t=Object.defineProperty,n=Object.prototype.hasOwnProperty("__defineGetter__"),i="Getters & setters cannot be defined on this javascript engine",r="A property cannot both have accessors and be writable or have a value",Object.defineProperty=function(e,o,s){if(t&&(e===window||e===document||e===Element.prototype||e instanceof Element))return t(e,o,s);if(null===e||!(e instanceof Object||"object"==typeof e))throw new TypeError("Object.defineProperty called on non-object");if(!(s instanceof Object))throw new TypeError("Property description must be an object");var a=String(o),u="value"in s||"writable"in s,l="get"in s&&c(s.get),d="set"in s&&c(s.set);if(l){if("function"!==l)throw new TypeError("Getter must be a function");if(!n)throw new TypeError(i);if(u)throw new TypeError(r);Object.__defineGetter__.call(e,a,s.get)}else e[a]=s.value;if(d){if("function"!==d)throw new TypeError("Setter must be a function");if(!n)throw new TypeError(i);if(u)throw new TypeError(r);Object.__defineSetter__.call(e,a,s.set)}return"value"in s&&(e[a]=s.value),e})}).call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{}),function(e){"bind"in Function.prototype||Object.defineProperty(Function.prototype,"bind",{value:function(e){var t,n=Array,i=Object,r=i.prototype,o=n.prototype,s=function(){},a=r.toString,u="function"==typeof Symbol&&"symbol"===c(Symbol.toStringTag),l=Function.prototype.toString,d=function(e){try{return l.call(e),!0}catch(e){return!1}},h="[object Function]",f="[object GeneratorFunction]";t=function(e){if("function"!=typeof e)return!1;if(u)return d(e);var t=a.call(e);return t===h||t===f};var p=o.slice,m=o.concat,v=o.push,g=Math.max,y=this;if(!t(y))throw new TypeError("Function.prototype.bind called on incompatible "+y);for(var b,_=p.call(arguments,1),w=function(){if(this instanceof b){var t=y.apply(this,m.call(_,p.call(arguments)));return i(t)===t?t:this}return y.apply(e,m.call(_,p.call(arguments)))},k=g(0,y.length-_.length),E=[],x=0;x<k;x++)v.call(E,"$"+x);return b=Function("binder","return function ("+E.join(",")+"){ return binder.apply(this, arguments); }")(w),y.prototype&&(s.prototype=y.prototype,b.prototype=new s,s.prototype=null),b}})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{}),function(e){var t;"DOMTokenList"in this&&(!("classList"in(t=document.createElement("x")))||!t.classList.toggle("x",!1)&&!t.className)||function(t){var n;"DOMTokenList"in t&&t.DOMTokenList&&(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg")||document.createElementNS("http://www.w3.org/2000/svg","svg").classList instanceof DOMTokenList)||(t.DOMTokenList=function(){var t=!0,n=function(e,n,i,r){Object.defineProperty?Object.defineProperty(e,n,{configurable:!1===t||!!r,get:i}):e.__defineGetter__(n,i)};try{n({},"support")}catch(e){t=!1}var i=function(t,i){var r=this,o=[],s={},a=0,u=0,c=function(e){n(r,e,(function(){return d(),o[e]}),!1)},l=function(){if(a>=u)for(;u<a;++u)c(u)},d=function(){var e,n,r=arguments,u=/\s+/;if(r.length)for(n=0;n<r.length;++n)if(u.test(r[n]))throw(e=new SyntaxError('String "'+r[n]+'" contains an invalid character')).code=5,e.name="InvalidCharacterError",e;for(""===(o="object"==typeof t[i]?(""+t[i].baseVal).replace(/^\s+|\s+$/g,"").split(u):(""+t[i]).replace(/^\s+|\s+$/g,"").split(u))[0]&&(o=[]),s={},n=0;n<o.length;++n)s[o[n]]=!0;a=o.length,l()};return d(),n(r,"length",(function(){return d(),a})),r.toLocaleString=r.toString=function(){return d(),o.join(" ")},r.item=function(e){return d(),o[e]},r.contains=function(e){return d(),!!s[e]},r.add=function(){d.apply(r,e=arguments);for(var e,n,u=0,c=e.length;u<c;++u)n=e[u],s[n]||(o.push(n),s[n]=!0);a!==o.length&&(a=o.length>>>0,"object"==typeof t[i]?t[i].baseVal=o.join(" "):t[i]=o.join(" "),l())},r.remove=function(){d.apply(r,e=arguments);for(var e,n={},u=0,c=[];u<e.length;++u)n[e[u]]=!0,delete s[e[u]];for(u=0;u<o.length;++u)n[o[u]]||c.push(o[u]);o=c,a=c.length>>>0,"object"==typeof t[i]?t[i].baseVal=o.join(" "):t[i]=o.join(" "),l()},r.toggle=function(t,n){return d.apply(r,[t]),e!==n?n?(r.add(t),!0):(r.remove(t),!1):s[t]?(r.remove(t),!1):(r.add(t),!0)},r};return i}()),"classList"in(n=document.createElement("span"))&&(n.classList.toggle("x",!1),n.classList.contains("x")&&(n.classList.constructor.prototype.toggle=function(t){var n=arguments[1];if(n===e){var i=!this.contains(t);return this[i?"add":"remove"](t),i}return this[(n=!!n)?"add":"remove"](t),n})),function(){var e=document.createElement("span");if("classList"in e&&(e.classList.add("a","b"),!e.classList.contains("b"))){var t=e.classList.constructor.prototype.add;e.classList.constructor.prototype.add=function(){for(var e=arguments,n=arguments.length,i=0;i<n;i++)t.call(this,e[i])}}}(),function(){var e=document.createElement("span");if("classList"in e&&(e.classList.add("a"),e.classList.add("b"),e.classList.remove("a","b"),e.classList.contains("b"))){var t=e.classList.constructor.prototype.remove;e.classList.constructor.prototype.remove=function(){for(var e=arguments,n=arguments.length,i=0;i<n;i++)t.call(this,e[i])}}}()}(this)}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{}),function(e){"Document"in this||"undefined"==typeof WorkerGlobalScope&&"function"!=typeof importScripts&&(this.HTMLDocument?this.Document=this.HTMLDocument:(this.Document=this.HTMLDocument=document.constructor=new Function("return function Document() {}")(),this.Document.prototype=document))}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{}),function(e){"Element"in this&&"HTMLElement"in this||function(){var e=function(){return c--||clearTimeout(t),!(!document.body||document.body.prototype||!/(complete|interactive)/.test(document.readyState)||(s(document,!0),t&&document.body.prototype&&clearTimeout(t),!document.body.prototype))};if(!window.Element||window.HTMLElement){window.Element=window.HTMLElement=new Function("return function Element() {}")();var t,n=document.appendChild(document.createElement("body")),i=n.appendChild(document.createElement("iframe")).contentWindow.document,r=Element.prototype=i.appendChild(i.createElement("*")),o={},s=function(e,t){var n,i,r,a=e.childNodes||[],u=-1;if(1===e.nodeType&&e.constructor!==Element)for(n in e.constructor=Element,o)i=o[n],e[n]=i;for(;r=t&&a[++u];)s(r,t);return e},a=document.getElementsByTagName("*"),u=document.createElement,c=100;r.attachEvent("onpropertychange",(function(e){for(var t,n=e.propertyName,i=!o.hasOwnProperty(n),s=r[n],u=o[n],c=-1;t=a[++c];)1===t.nodeType&&(i||t[n]===u)&&(t[n]=s);o[n]=s})),r.constructor=Element,r.hasAttribute||(r.hasAttribute=function(e){return null!==this.getAttribute(e)}),e()||(document.onreadystatechange=e,t=setInterval(e,25)),document.createElement=function(e){var t=u(String(e).toLowerCase());return s(t)},document.removeChild(n)}else window.HTMLElement=window.Element}()}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{}),function(e){var t;"document"in this&&"classList"in document.documentElement&&"Element"in this&&"classList"in Element.prototype&&((t=document.createElement("span")).classList.add("a","b"),t.classList.contains("b"))||function(e){var t=!0,n=function(e,n,i,r){Object.defineProperty?Object.defineProperty(e,n,{configurable:!1===t||!!r,get:i}):e.__defineGetter__(n,i)};try{n({},"support")}catch(e){t=!1}var i=function(e,r,o){n(e.prototype,r,(function(){var e,s=this,a="__defineGetter__DEFINE_PROPERTY"+r;if(s[a])return e;if(s[a]=!0,!1===t){for(var u,c=i.mirror||document.createElement("div"),l=c.childNodes,d=l.length,h=0;h<d;++h)if(l[h]._R===s){u=l[h];break}u||(u=c.appendChild(document.createElement("div"))),e=DOMTokenList.call(u,s,o)}else e=new DOMTokenList(s,o);return n(s,r,(function(){return e})),delete s[a],e}),!0)};i(e.Element,"classList","className"),i(e.HTMLElement,"classList","className"),i(e.HTMLLinkElement,"relList","rel"),i(e.HTMLAnchorElement,"relList","rel"),i(e.HTMLAreaElement,"relList","rel")}(this)}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{}),r.prototype.init=function(){if(this.$module){this.initControls(),this.initSectionHeaders();var e=this.checkIfAllSectionsOpen();this.updateOpenAllButton(e)}},r.prototype.initControls=function(){this.$openAllButton=document.createElement("button"),this.$openAllButton.setAttribute("type","button"),this.$openAllButton.innerHTML='Open all <span class="govuk-visually-hidden">sections</span>',this.$openAllButton.setAttribute("class",this.openAllClass),this.$openAllButton.setAttribute("aria-expanded","false"),this.$openAllButton.setAttribute("type","button");var e=document.createElement("div");e.setAttribute("class",this.controlsClass),e.appendChild(this.$openAllButton),this.$module.insertBefore(e,this.$module.firstChild),this.$openAllButton.addEventListener("click",this.onOpenOrCloseAllToggle.bind(this))},r.prototype.initSectionHeaders=function(){n(this.$sections,function(e,t){var n=e.querySelector("."+this.sectionHeaderClass);this.initHeaderAttributes(n,t),this.setExpanded(this.isExpanded(e),e),n.addEventListener("click",this.onSectionToggle.bind(this,e)),this.setInitialState(e)}.bind(this))},r.prototype.initHeaderAttributes=function(e,t){var n=this,i=e.querySelector("."+this.sectionButtonClass),r=e.querySelector("."+this.sectionHeadingClass),o=e.querySelector("."+this.sectionSummaryClass),s=document.createElement("button");s.setAttribute("type","button"),s.setAttribute("id",this.moduleId+"-heading-"+(t+1)),s.setAttribute("aria-controls",this.moduleId+"-content-"+(t+1));for(var a=0;a<i.attributes.length;a++){var u=i.attributes.item(a);s.setAttribute(u.nodeName,u.nodeValue)}s.addEventListener("focusin",(function(t){e.classList.contains(n.sectionHeaderFocusedClass)||(e.className+=" "+n.sectionHeaderFocusedClass)})),s.addEventListener("blur",(function(t){e.classList.remove(n.sectionHeaderFocusedClass)})),null!=o&&s.setAttribute("aria-describedby",this.moduleId+"-summary-"+(t+1)),s.innerHTML=i.innerHTML,r.removeChild(i),r.appendChild(s);var c=document.createElement("span");c.className=this.iconClass,c.setAttribute("aria-hidden","true"),s.appendChild(c)},r.prototype.onSectionToggle=function(e){var t=this.isExpanded(e);this.setExpanded(!t,e),this.storeState(e)},r.prototype.onOpenOrCloseAllToggle=function(){var e=this,t=this.$sections,i=!this.checkIfAllSectionsOpen();n(t,(function(t){e.setExpanded(i,t),e.storeState(t)})),e.updateOpenAllButton(i)},r.prototype.setExpanded=function(e,t){t.querySelector("."+this.sectionButtonClass).setAttribute("aria-expanded",e),e?t.classList.add(this.sectionExpandedClass):t.classList.remove(this.sectionExpandedClass);var n=this.checkIfAllSectionsOpen();this.updateOpenAllButton(n)},r.prototype.isExpanded=function(e){return e.classList.contains(this.sectionExpandedClass)},r.prototype.checkIfAllSectionsOpen=function(){return this.$sections.length===this.$module.querySelectorAll("."+this.sectionExpandedClass).length},r.prototype.updateOpenAllButton=function(e){var t=e?"Close all":"Open all";t+='<span class="govuk-visually-hidden"> sections</span>',this.$openAllButton.setAttribute("aria-expanded",e),this.$openAllButton.innerHTML=t};var v={checkForSessionStorage:function(){var e,t="this is the test string";try{return window.sessionStorage.setItem(t,t),e=window.sessionStorage.getItem(t)===t.toString(),window.sessionStorage.removeItem(t),e}catch(e){"undefined"!=typeof console&&void 0!==console.log||console.log("Notice: sessionStorage not available.")}}};r.prototype.storeState=function(e){if(this.browserSupportsSessionStorage){var t=e.querySelector("."+this.sectionButtonClass);if(t){var n=t.getAttribute("aria-controls"),i=t.getAttribute("aria-expanded");void 0!==n||"undefined"!=typeof console&&void 0!==console.log||console.error(new Error("No aria controls present in accordion section heading.")),void 0!==i||"undefined"!=typeof console&&void 0!==console.log||console.error(new Error("No aria expanded present in accordion section heading.")),n&&i&&window.sessionStorage.setItem(n,i)}}},r.prototype.setInitialState=function(e){if(this.browserSupportsSessionStorage){var t=e.querySelector("."+this.sectionButtonClass);if(t){var n=t.getAttribute("aria-controls"),i=n?window.sessionStorage.getItem(n):null;null!==i&&this.setExpanded("true"===i,e)}}},function(e){"Window"in this||"undefined"==typeof WorkerGlobalScope&&"function"!=typeof importScripts&&function(e){e.constructor?e.Window=e.constructor:(e.Window=e.constructor=new Function("return function Window() {}")()).prototype=this}(this)}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{}),function(e){var t=function(e){if(!("Event"in e))return!1;if("function"==typeof e.Event)return!0;try{return new Event("click"),!0}catch(e){return!1}}(this);t||function(){var t=function(e,t){for(var n=-1,i=e.length;++n<i;)if(n in e&&e[n]===t)return n;return-1},n={click:1,dblclick:1,keyup:1,keypress:1,keydown:1,mousedown:1,mouseup:1,mousemove:1,mouseover:1,mouseenter:1,mouseleave:1,mouseout:1,storage:1,storagecommit:1,textinput:1};if("undefined"!=typeof document&&"undefined"!=typeof window){var i=window.Event&&window.Event.prototype||null;window.Event=Window.prototype.Event=function(t,n){if(!t)throw new Error("Not enough arguments");var i;if("createEvent"in document){i=document.createEvent("Event");var r=!(!n||n.bubbles===e)&&n.bubbles,o=!(!n||n.cancelable===e)&&n.cancelable;return i.initEvent(t,r,o),i}return(i=document.createEventObject()).type=t,i.bubbles=!(!n||n.bubbles===e)&&n.bubbles,i.cancelable=!(!n||n.cancelable===e)&&n.cancelable,i},i&&Object.defineProperty(window.Event,"prototype",{configurable:!1,enumerable:!1,writable:!0,value:i}),"createEvent"in document||(window.addEventListener=Window.prototype.addEventListener=Document.prototype.addEventListener=Element.prototype.addEventListener=function(){var e=this,i=arguments[0],r=arguments[1];if(e===window&&i in n)throw new Error("In IE8 the event: "+i+" is not available on the window object. Please see https://github.com/Financial-Times/polyfill-service/issues/317 for more information.");e._events||(e._events={}),e._events[i]||(e._events[i]=function(n){var i,r=e._events[n.type].list,o=r.slice(),s=-1,a=o.length;for(n.preventDefault=function(){!1!==n.cancelable&&(n.returnValue=!1)},n.stopPropagation=function(){n.cancelBubble=!0},n.stopImmediatePropagation=function(){n.cancelBubble=!0,n.cancelImmediate=!0},n.currentTarget=e,n.relatedTarget=n.fromElement||null,n.target=n.target||n.srcElement||e,n.timeStamp=(new Date).getTime(),n.clientX&&(n.pageX=n.clientX+document.documentElement.scrollLeft,n.pageY=n.clientY+document.documentElement.scrollTop);++s<a&&!n.cancelImmediate;)s in o&&(i=o[s],-1!==t(r,i)&&"function"==typeof i&&i.call(e,n))},e._events[i].list=[],e.attachEvent&&e.attachEvent("on"+i,e._events[i])),e._events[i].list.push(r)},window.removeEventListener=Window.prototype.removeEventListener=Document.prototype.removeEventListener=Element.prototype.removeEventListener=function(){var e,n=this,i=arguments[0],r=arguments[1];n._events&&n._events[i]&&n._events[i].list&&-1!==(e=t(n._events[i].list,r))&&(n._events[i].list.splice(e,1),n._events[i].list.length||(n.detachEvent&&n.detachEvent("on"+i,n._events[i]),delete n._events[i]))},window.dispatchEvent=Window.prototype.dispatchEvent=Document.prototype.dispatchEvent=Element.prototype.dispatchEvent=function(e){if(!arguments.length)throw new Error("Not enough arguments");if(!e||"string"!=typeof e.type)throw new Error("DOM Events Exception 0");var t=this,n=e.type;try{if(!e.bubbles){e.cancelBubble=!0;var i=function(e){e.cancelBubble=!0,(t||window).detachEvent("on"+n,i)};this.attachEvent("on"+n,i)}this.fireEvent("on"+n,e)}catch(i){e.target=t;do{e.currentTarget=t,"_events"in t&&"function"==typeof t._events[n]&&t._events[n].call(t,e),"function"==typeof t["on"+n]&&t["on"+n].call(t,e),t=9===t.nodeType?t.parentWindow:t.parentNode}while(t&&!e.cancelBubble)}return!0},document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:!0}))})))}}()}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{});var g=32,y=1;o.prototype.handleKeyDown=function(e){var t=e.target;"button"===t.getAttribute("role")&&e.keyCode===g&&(e.preventDefault(),t.click())},o.prototype.debounce=function(e){if("true"===e.target.getAttribute("data-prevent-double-click"))return this.debounceFormSubmitTimer?(e.preventDefault(),!1):void(this.debounceFormSubmitTimer=setTimeout(function(){this.debounceFormSubmitTimer=null}.bind(this),1e3*y))},o.prototype.init=function(){this.$module.addEventListener("keydown",this.handleKeyDown),this.$module.addEventListener("click",this.debounce)};var b=13,_=32;s.prototype.init=function(){this.$module&&("boolean"==typeof this.$module.open||this.polyfillDetails())},s.prototype.polyfillDetails=function(){var e=this.$module,t=this.$summary=e.getElementsByTagName("summary").item(0),n=this.$content=e.getElementsByTagName("div").item(0);t&&n&&(n.id||(n.id="details-content-"+i()),e.setAttribute("role","group"),t.setAttribute("role","button"),t.setAttribute("aria-controls",n.id),t.tabIndex=0,!0==(null!==e.getAttribute("open"))?(t.setAttribute("aria-expanded","true"),n.setAttribute("aria-hidden","false")):(t.setAttribute("aria-expanded","false"),n.setAttribute("aria-hidden","true"),n.style.display="none"),this.polyfillHandleInputs(t,this.polyfillSetAttributes.bind(this)))},s.prototype.polyfillSetAttributes=function(){var e=this.$module,t=this.$summary,n=this.$content,i="true"===t.getAttribute("aria-expanded"),r="true"===n.getAttribute("aria-hidden");return t.setAttribute("aria-expanded",i?"false":"true"),n.setAttribute("aria-hidden",r?"false":"true"),n.style.display=i?"none":"",null!==e.getAttribute("open")?e.removeAttribute("open"):e.setAttribute("open","open"),!0},s.prototype.polyfillHandleInputs=function(e,t){e.addEventListener("keypress",(function(e){var n=e.target;e.keyCode!==b&&e.keyCode!==_||"summary"===n.nodeName.toLowerCase()&&(e.preventDefault(),n.click?n.click():t(e))})),e.addEventListener("keyup",(function(e){var t=e.target;e.keyCode===_&&"summary"===t.nodeName.toLowerCase()&&e.preventDefault()})),e.addEventListener("click",t)},a.prototype.defaults={characterCountAttribute:"data-maxlength",wordCountAttribute:"data-maxwords"},a.prototype.init=function(){var e=this.$module,t=this.$textarea,n=this.$countMessage;if(t&&n){t.insertAdjacentElement("afterend",n),this.options=this.getDataset(e);var i=this.defaults.characterCountAttribute;this.options.maxwords&&(i=this.defaults.wordCountAttribute),this.maxLength=e.getAttribute(i),this.maxLength&&(e.removeAttribute("maxlength"),"onpageshow"in window?window.addEventListener("pageshow",this.sync.bind(this)):window.addEventListener("DOMContentLoaded",this.sync.bind(this)),this.sync())}},a.prototype.sync=function(){this.bindChangeEvents(),this.updateCountMessage()},a.prototype.getDataset=function(e){var t={},n=e.attributes;if(n)for(var i=0;i<n.length;i++){var r=n[i],o=r.name.match(/^data-(.+)/);o&&(t[o[1]]=r.value)}return t},a.prototype.count=function(e){return this.options.maxwords?(e.match(/\S+/g)||[]).length:e.length},a.prototype.bindChangeEvents=function(){var e=this.$textarea;e.addEventListener("keyup",this.checkIfValueChanged.bind(this)),e.addEventListener("focus",this.handleFocus.bind(this)),e.addEventListener("blur",this.handleBlur.bind(this))},a.prototype.checkIfValueChanged=function(){this.$textarea.oldValue||(this.$textarea.oldValue=""),this.$textarea.value!==this.$textarea.oldValue&&(this.$textarea.oldValue=this.$textarea.value,this.updateCountMessage())},a.prototype.updateCountMessage=function(){var e=this.$textarea,t=this.options,n=this.$countMessage,i=this.count(e.value),r=this.maxLength,o=r-i;r*(t.threshold?t.threshold:0)/100>i?(n.classList.add("govuk-character-count__message--disabled"),n.setAttribute("aria-hidden",!0)):(n.classList.remove("govuk-character-count__message--disabled"),n.removeAttribute("aria-hidden")),o<0?(e.classList.add("govuk-textarea--error"),n.classList.remove("govuk-hint"),n.classList.add("govuk-error-message")):(e.classList.remove("govuk-textarea--error"),n.classList.remove("govuk-error-message"),n.classList.add("govuk-hint"));var s="remaining",a="character",u=o;t.maxwords&&(a="word"),a+=-1===o||1===o?"":"s",s=o<0?"too many":"remaining",u=Math.abs(o),n.innerHTML="You have "+u+" "+a+" "+s},a.prototype.handleFocus=function(){this.valueChecker=setInterval(this.checkIfValueChanged.bind(this),1e3)},a.prototype.handleBlur=function(){clearInterval(this.valueChecker)},u.prototype.init=function(){var e=this.$module,t=this.$inputs;n(t,(function(t){var n=t.getAttribute("data-aria-controls");n&&e.querySelector("#"+n)&&(t.setAttribute("aria-controls",n),t.removeAttribute("data-aria-controls"))})),"onpageshow"in window?window.addEventListener("pageshow",this.syncAllConditionalReveals.bind(this)):window.addEventListener("DOMContentLoaded",this.syncAllConditionalReveals.bind(this)),this.syncAllConditionalReveals(),e.addEventListener("click",this.handleClick.bind(this))},u.prototype.syncAllConditionalReveals=function(){n(this.$inputs,this.syncConditionalRevealWithInputState.bind(this))},u.prototype.syncConditionalRevealWithInputState=function(e){var t=this.$module.querySelector("#"+e.getAttribute("aria-controls"));if(t&&t.classList.contains("govuk-checkboxes__conditional")){var n=e.checked;e.setAttribute("aria-expanded",n),t.classList.toggle("govuk-checkboxes__conditional--hidden",!n)}},u.prototype.unCheckAllInputsExcept=function(e){var t=document.querySelectorAll('input[type="checkbox"][name="'+e.name+'"]');n(t,(function(t){e.form===t.form&&t!==e&&(t.checked=!1)})),this.syncAllConditionalReveals()},u.prototype.unCheckExclusiveInputs=function(e){var t=document.querySelectorAll('input[data-behaviour="exclusive"][type="checkbox"][name="'+e.name+'"]');n(t,(function(t){e.form===t.form&&(t.checked=!1)})),this.syncAllConditionalReveals()},u.prototype.handleClick=function(e){var t=e.target;"checkbox"===t.type&&(t.getAttribute("aria-controls")&&this.syncConditionalRevealWithInputState(t),t.checked&&("exclusive"===t.getAttribute("data-behaviour")?this.unCheckAllInputsExcept(t):this.unCheckExclusiveInputs(t)))},function(e){"document"in this&&"matches"in document.documentElement||(Element.prototype.matches=Element.prototype.webkitMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector||function(e){for(var t=this,n=(t.document||t.ownerDocument).querySelectorAll(e),i=0;n[i]&&n[i]!==t;)++i;return!!n[i]})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{}),function(e){"document"in this&&"closest"in document.documentElement||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t="SVGElement"in window&&t instanceof SVGElement?t.parentNode:t.parentElement}return null})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{}),l.prototype.init=function(){var e=this.$module;e&&(e.focus(),e.addEventListener("click",this.handleClick.bind(this)))},l.prototype.handleClick=function(e){var t=e.target;this.focusTarget(t)&&e.preventDefault()},l.prototype.focusTarget=function(e){if("A"!==e.tagName||!1===e.href)return!1;var t=this.getFragmentFromUrl(e.href),n=document.getElementById(t);if(!n)return!1;var i=this.getAssociatedLegendOrLabel(n);return!!i&&(i.scrollIntoView(),n.focus({preventScroll:!0}),!0)},l.prototype.getFragmentFromUrl=function(e){return-1!==e.indexOf("#")&&e.split("#").pop()},l.prototype.getAssociatedLegendOrLabel=function(e){var t=e.closest("fieldset");if(t){var n=t.getElementsByTagName("legend");if(n.length){var i=n[0];if("checkbox"===e.type||"radio"===e.type)return i;var r=i.getBoundingClientRect().top,o=e.getBoundingClientRect();if(o.height&&window.innerHeight&&o.top+o.height-r<window.innerHeight/2)return i}}return document.querySelector("label[for='"+e.getAttribute("id")+"']")||e.closest("label")},d.prototype.init=function(){this.$module&&this.setFocus()},d.prototype.setFocus=function(){var e=this.$module;"true"!==e.getAttribute("data-disable-auto-focus")&&"alert"===e.getAttribute("role")&&(e.getAttribute("tabindex")||(e.setAttribute("tabindex","-1"),e.addEventListener("blur",(function(){e.removeAttribute("tabindex")}))),e.focus())},h.prototype.init=function(){this.$module&&this.$menuButton&&this.$menu&&(this.syncState(this.$menu.classList.contains("govuk-header__navigation--open")),this.$menuButton.addEventListener("click",this.handleMenuButtonClick.bind(this)))},h.prototype.syncState=function(e){this.$menuButton.classList.toggle("govuk-header__menu-button--open",e),this.$menuButton.setAttribute("aria-expanded",e)},h.prototype.handleMenuButtonClick=function(){var e=this.$menu.classList.toggle("govuk-header__navigation--open");this.syncState(e)},f.prototype.init=function(){var e=this.$module,t=this.$inputs;n(t,(function(t){var n=t.getAttribute("data-aria-controls");n&&e.querySelector("#"+n)&&(t.setAttribute("aria-controls",n),t.removeAttribute("data-aria-controls"))})),"onpageshow"in window?window.addEventListener("pageshow",this.syncAllConditionalReveals.bind(this)):window.addEventListener("DOMContentLoaded",this.syncAllConditionalReveals.bind(this)),this.syncAllConditionalReveals(),e.addEventListener("click",this.handleClick.bind(this))},f.prototype.syncAllConditionalReveals=function(){n(this.$inputs,this.syncConditionalRevealWithInputState.bind(this))},f.prototype.syncConditionalRevealWithInputState=function(e){var t=document.querySelector("#"+e.getAttribute("aria-controls"));if(t&&t.classList.contains("govuk-radios__conditional")){var n=e.checked;e.setAttribute("aria-expanded",n),t.classList.toggle("govuk-radios__conditional--hidden",!n)}},f.prototype.handleClick=function(e){var t=e.target;if("radio"===t.type){var i=document.querySelectorAll('input[type="radio"][aria-controls]');n(i,function(e){var n=e.form===t.form;e.name===t.name&&n&&this.syncConditionalRevealWithInputState(e)}.bind(this))}},function(e){"document"in this&&"nextElementSibling"in document.documentElement||Object.defineProperty(Element.prototype,"nextElementSibling",{get:function(){for(var e=this.nextSibling;e&&1!==e.nodeType;)e=e.nextSibling;return e}})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{}),function(e){"document"in this&&"previousElementSibling"in document.documentElement||Object.defineProperty(Element.prototype,"previousElementSibling",{get:function(){for(var e=this.previousSibling;e&&1!==e.nodeType;)e=e.previousSibling;return e}})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof e&&e||{}),p.prototype.init=function(){"function"==typeof window.matchMedia?this.setupResponsiveChecks():this.setup()},p.prototype.setupResponsiveChecks=function(){this.mql=window.matchMedia("(min-width: 40.0625em)"),this.mql.addListener(this.checkMode.bind(this)),this.checkMode()},p.prototype.checkMode=function(){this.mql.matches?this.setup():this.teardown()},p.prototype.setup=function(){var e=this.$module,t=this.$tabs,i=e.querySelector(".govuk-tabs__list"),r=e.querySelectorAll(".govuk-tabs__list-item");if(t&&i&&r){i.setAttribute("role","tablist"),n(r,(function(e){e.setAttribute("role","presentation")})),n(t,function(e){this.setAttributes(e),e.boundTabClick=this.onTabClick.bind(this),e.boundTabKeydown=this.onTabKeydown.bind(this),e.addEventListener("click",e.boundTabClick,!0),e.addEventListener("keydown",e.boundTabKeydown,!0),this.hideTab(e)}.bind(this));var o=this.getTab(window.location.hash)||this.$tabs[0];this.showTab(o),e.boundOnHashChange=this.onHashChange.bind(this),window.addEventListener("hashchange",e.boundOnHashChange,!0)}},p.prototype.teardown=function(){var e=this.$module,t=this.$tabs,i=e.querySelector(".govuk-tabs__list"),r=e.querySelectorAll(".govuk-tabs__list-item");t&&i&&r&&(i.removeAttribute("role"),n(r,(function(e){e.removeAttribute("role","presentation")})),n(t,function(e){e.removeEventListener("click",e.boundTabClick,!0),e.removeEventListener("keydown",e.boundTabKeydown,!0),this.unsetAttributes(e)}.bind(this)),window.removeEventListener("hashchange",e.boundOnHashChange,!0))},p.prototype.onHashChange=function(e){var t=window.location.hash,n=this.getTab(t);if(n)if(this.changingHash)this.changingHash=!1;else{var i=this.getCurrentTab();this.hideTab(i),this.showTab(n),n.focus()}},p.prototype.hideTab=function(e){this.unhighlightTab(e),this.hidePanel(e)},p.prototype.showTab=function(e){this.highlightTab(e),this.showPanel(e)},p.prototype.getTab=function(e){return this.$module.querySelector('.govuk-tabs__tab[href="'+e+'"]')},p.prototype.setAttributes=function(e){var t=this.getHref(e).slice(1);e.setAttribute("id","tab_"+t),e.setAttribute("role","tab"),e.setAttribute("aria-controls",t),e.setAttribute("aria-selected","false"),e.setAttribute("tabindex","-1");var n=this.getPanel(e);n.setAttribute("role","tabpanel"),n.setAttribute("aria-labelledby",e.id),n.classList.add(this.jsHiddenClass)},p.prototype.unsetAttributes=function(e){e.removeAttribute("id"),e.removeAttribute("role"),e.removeAttribute("aria-controls"),e.removeAttribute("aria-selected"),e.removeAttribute("tabindex");var t=this.getPanel(e);t.removeAttribute("role"),t.removeAttribute("aria-labelledby"),t.classList.remove(this.jsHiddenClass)},p.prototype.onTabClick=function(e){if(!e.target.classList.contains("govuk-tabs__tab"))return!1;e.preventDefault();var t=e.target,n=this.getCurrentTab();this.hideTab(n),this.showTab(t),this.createHistoryEntry(t)},p.prototype.createHistoryEntry=function(e){var t=this.getPanel(e),n=t.id;t.id="",this.changingHash=!0,window.location.hash=this.getHref(e).slice(1),t.id=n},p.prototype.onTabKeydown=function(e){switch(e.keyCode){case this.keys.left:case this.keys.up:this.activatePreviousTab(),e.preventDefault();break;case this.keys.right:case this.keys.down:this.activateNextTab(),e.preventDefault()}},p.prototype.activateNextTab=function(){var e=this.getCurrentTab(),t=e.parentNode.nextElementSibling;if(t)var n=t.querySelector(".govuk-tabs__tab");n&&(this.hideTab(e),this.showTab(n),n.focus(),this.createHistoryEntry(n))},p.prototype.activatePreviousTab=function(){var e=this.getCurrentTab(),t=e.parentNode.previousElementSibling;if(t)var n=t.querySelector(".govuk-tabs__tab");n&&(this.hideTab(e),this.showTab(n),n.focus(),this.createHistoryEntry(n))},p.prototype.getPanel=function(e){return this.$module.querySelector(this.getHref(e))},p.prototype.showPanel=function(e){this.getPanel(e).classList.remove(this.jsHiddenClass)},p.prototype.hidePanel=function(e){this.getPanel(e).classList.add(this.jsHiddenClass)},p.prototype.unhighlightTab=function(e){e.setAttribute("aria-selected","false"),e.parentNode.classList.remove("govuk-tabs__list-item--selected"),e.setAttribute("tabindex","-1")},p.prototype.highlightTab=function(e){e.setAttribute("aria-selected","true"),e.parentNode.classList.add("govuk-tabs__list-item--selected"),e.setAttribute("tabindex","0")},p.prototype.getCurrentTab=function(){return this.$module.querySelector(".govuk-tabs__list-item--selected .govuk-tabs__tab")},p.prototype.getHref=function(e){var t=e.getAttribute("href");return t.slice(t.indexOf("#"),t.length)},t.initAll=m,t.Accordion=r,t.Button=o,t.Details=s,t.CharacterCount=a,t.Checkboxes=u,t.ErrorSummary=l,t.Header=h,t.Radios=f,t.Tabs=p}(n),$.fn.changeElementType=function(e){var t={};$.each(this[0].attributes,(function(e,n){t[n.nodeName]=n.nodeValue}));var n=$("<"+e+"/>",t).append($(this).contents());return this.replaceWith(n),n},$("[data-max-length]").each((function(){var e=$(this).html(),t=$(this).html().substring(0,$(this).data("max-length"));e.length!=t.length&&($(this).html(t+"..."),$("<a href='#' class='govuk-link govuk-link--no-visited-state govuk-!-margin-left-2'>More</a>").appendTo($(this)).attr("data-more-text",e))})),$("[data-more-text]").click((function(){return $(this).parent().html($(this).data("more-text")),!1})),$("[data-definition-title]").each((function(){$(this).addClass("lite-link--definition"),$(this).changeElementType("a").attr("href","#")})),$("[data-definition-title]").click((function(){var e=$(this).data("definition-subtitle"),t=$(this).data("definition-text"),n=$(this).data("definition-list");n&&(n=n.split(","));var i="<ol class='govuk-list govuk-list--number'>";if(n)for(var r=0;r<n.length;r++)i+="<li>"+n[r]+"</li>";return i+="</ol>",e&&(e="<p class='govuk-heading-s'>"+e+"</p>",t?t=e+t:i=e+i),LITECommon.Modal.showModal($(this).data("definition-title"),t||i,!1,!0,{maxWidth:"500px"}),!1})),$(".govuk-back-link").on("click",(function(){var e=$(this).attr("href");return"#"!=e?window.location.href=e:window.history.go(-1),!1}));var b="cookie_preferences_set",_=function(e,t,n){void 0===n&&(n={});var i=e+"="+t+"; path=/";if(n.days){var r=new Date;r.setTime(r.getTime()+864e5*n.days),i=i+"; expires="+r.toGMTString()}"https:"===document.location.protocol&&(i+="; Secure"),document.cookie=i},w="app-cookie-banner--show",k=function(){"use strict";function e(t,n){r(this,e),this.bannerClassName=t,this.banner=document.querySelector(".".concat(this.bannerClassName)),this.acceptAllButtonClassName=n}return s(e,[{key:"hasAcceptedCookePreferences",value:function(){var e=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0,r=n.length;i<r;i++){for(var o=n[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return decodeURIComponent(o.substring(t.length))}return null}(b);return Boolean(e)}},{key:"isExcludedPage",value:function(){var e=document.querySelector(".".concat("cookie-preferences"));return Boolean(e)}},{key:"shouldDisplay",value:function(){return Boolean(this.banner)&&!this.hasAcceptedCookePreferences()&&!this.isExcludedPage()}},{key:"acceptAllCookies",value:function(){!function(e,t,n){var i={essential:!0,settings:!1,usage:!1,campaigns:!1};i.settings=e||!1,i.usage=t||!1,i.campaigns=n||!1;var r=JSON.stringify(i);_("cookies_policy",r,{days:365})}(!1,!0,!1),_(b,"true",{days:365})}},{key:"hide",value:function(){this.banner.classList.remove(w)}},{key:"attachEvents",value:function(e){var t=this;e.querySelector(".".concat(this.acceptAllButtonClassName)).addEventListener("click",(function(){t.acceptAllCookies(),t.hide()}))}},{key:"display",value:function(){this.banner.classList.add(w),this.attachEvents(this.banner)}}]),e}(),E=function(e,t){var n=new k(e,t);n.shouldDisplay()&&n.display()};function x(){$("table").each((function(e,t){$(t).find(".lite-button-checkbox").attr("class","lite-button-checkbox"),$(t).find("input:checkbox:checked").length==$(t).find("input:checkbox").length?$(t).find(".lite-button-checkbox").addClass("lite-button-checkbox--checked"):0!=$(t).find("input:checkbox:checked").length&&$(t).find(".lite-button-checkbox").addClass("lite-button-checkbox--indeterminate"),$(t).find(".lite-button-checkbox").css("display","none").height(),$(t).find(".lite-button-checkbox").css("display","block")}))}function I(e){e.find(".govuk-button").each((function(){enableButton($(this))}))}function L(e){e.find(".govuk-button").each((function(){disableButton($(this))}))}function S(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function A(e){if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t?t.defaultView:window}return e}function O(e){var t=A(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function T(e){return e instanceof A(e).Element||e instanceof Element}function C(e){return e instanceof A(e).HTMLElement||e instanceof HTMLElement}function j(e){return e?(e.nodeName||"").toLowerCase():null}function D(e){return(T(e)?e.ownerDocument:e.document).documentElement}function M(e){return S(D(e)).left+O(e).scrollLeft}function P(e){return A(e).getComputedStyle(e)}function q(e){var t=P(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function N(e,t,n){void 0===n&&(n=!1);var i,r,o=D(t),s=S(e),a=C(t),u={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(a||!a&&!n)&&(("body"!==j(t)||q(o))&&(u=(i=t)!==A(i)&&C(i)?{scrollLeft:(r=i).scrollLeft,scrollTop:r.scrollTop}:O(i)),C(t)?((c=S(t)).x+=t.clientLeft,c.y+=t.clientTop):o&&(c.x=M(o))),{x:s.left+u.scrollLeft-c.x,y:s.top+u.scrollTop-c.y,width:s.width,height:s.height}}function R(e){return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}}function B(e){return"html"===j(e)?e:e.assignedSlot||e.parentNode||e.host||D(e)}function H(e){return["html","body","#document"].indexOf(j(e))>=0?e.ownerDocument.body:C(e)&&q(e)?e:H(B(e))}function F(e,t){void 0===t&&(t=[]);var n=H(e),i="body"===j(n),r=A(n),o=i?[r].concat(r.visualViewport||[],q(n)?n:[]):n,s=t.concat(o);return i?s:s.concat(F(B(o)))}function V(e){return["table","td","th"].indexOf(j(e))>=0}function U(e){if(!C(e)||"fixed"===P(e).position)return null;var t=e.offsetParent;if(t){var n=D(t);if("body"===j(t)&&"static"===P(t).position&&"static"!==P(n).position)return n}return t}function W(e){for(var t=A(e),n=U(e);n&&V(n)&&"static"===P(n).position;)n=U(n);return n&&"body"===j(n)&&"static"===P(n).position?t:n||function(e){for(var t=B(e);C(t)&&["html","body"].indexOf(j(t))<0;){var n=P(t);if("none"!==n.transform||"none"!==n.perspective||n.willChange&&"auto"!==n.willChange)return t;t=t.parentNode}return null}(e)||t}$("input:checkbox").change((function(){x()})),$(".lite-button-checkbox").click((function(){var e=$(this).closest("table");e.find("input:checkbox:checked").length==e.find("input:checkbox").length?e.find("input:checkbox").prop("checked",!1).change():e.find("input:checkbox").prop("checked",!0).change(),x()})),$(".lite-filter-bar").each((function(){var e=$(this).parent();e.hide(),e.prev().find("#show-filters-link").show(),e.prev().find("#hide-filters-link").hide(),$(this).find("input, select").each((function(){""!=$(this).val()&&"Select"!=$(this).val()&&"blank"!=$(this).val()&&"hidden"!=$(this).attr("type")&&("checkbox"!=$(this).attr("type")||"checkbox"==$(this).attr("type")&&$(this).attr("checked"))&&(e.show(),e.prev().find("#show-filters-link").hide(),e.prev().find("#hide-filters-link").show(),$(this).parents(".govuk-details").attr("open",""))}))})),$(".lite-filter-toggle-link").unbind().click((function(){return $(this).parent().next().toggle(),$(this).parent().find("> *").toggle(),!1})),$("[data-enable-on-checkboxes]").each((function(){var e=$(this),t=$($(this).data("enable-on-checkboxes")),n=$($(this).data("enable-on-checkboxes")+" .govuk-checkboxes__input");t.find(":checked").length>0?I(e):L(e),n.change((function(){t.find(":checked").length>0?I(e):L(e)}))})),$(".app-snackbar__close-link").click((function(){return $(this).parent().parent().hide(),!1}));var z="top",K="bottom",X="right",G="left",J="auto",Y=[z,K,X,G],Z="start",Q="end",ee="viewport",te="popper",ne=Y.reduce((function(e,t){return e.concat([t+"-"+Z,t+"-"+Q])}),[]),ie=[].concat(Y,[J]).reduce((function(e,t){return e.concat([t,t+"-"+Z,t+"-"+Q])}),[]),re=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function oe(e){var t=new Map,n=new Set,i=[];function r(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var i=t.get(e);i&&r(i)}})),i.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||r(e)})),i}var se={placement:"bottom",modifiers:[],strategy:"absolute"};function ae(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function ue(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,i=void 0===n?[]:n,r=t.defaultOptions,o=void 0===r?se:r;return function(e,t,n){var r=function(){c.forEach((function(e){return e()})),c=[]};void 0===n&&(n=o);var s,a,u={placement:"bottom",orderedModifiers:[],options:Object.assign(Object.assign({},se),o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},c=[],l=!1,d={state:u,setOptions:function(n){r(),u.options=Object.assign(Object.assign(Object.assign({},o),u.options),n),u.scrollParents={reference:T(e)?F(e):e.contextElement?F(e.contextElement):[],popper:F(t)};var s=function(e){var t=oe(e);return re.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign(Object.assign(Object.assign({},n),t),{},{options:Object.assign(Object.assign({},n.options),t.options),data:Object.assign(Object.assign({},n.data),t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(i,u.options.modifiers)));return u.orderedModifiers=s.filter((function(e){return e.enabled})),u.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,i=void 0===n?{}:n,r=e.effect;if("function"==typeof r){var o=r({state:u,name:t,instance:d,options:i});c.push(o||function(){})}})),d.update()},forceUpdate:function(){if(!l){var e=u.elements,t=e.reference,n=e.popper;if(ae(t,n)){u.rects={reference:N(t,W(n),"fixed"===u.options.strategy),popper:R(n)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach((function(e){return u.modifiersData[e.name]=Object.assign({},e.data)}));for(var i=0;i<u.orderedModifiers.length;i++)if(!0!==u.reset){var r=u.orderedModifiers[i],o=r.fn,s=r.options,a=void 0===s?{}:s,c=r.name;"function"==typeof o&&(u=o({state:u,options:a,name:c,instance:d})||u)}else u.reset=!1,i=-1}}},update:(s=function(){return new Promise((function(e){d.forceUpdate(),e(u)}))},function(){return a||(a=new Promise((function(e){Promise.resolve().then((function(){a=void 0,e(s())}))}))),a}),destroy:function(){r(),l=!0}};return ae(e,t)?(d.setOptions(n).then((function(e){!l&&n.onFirstUpdate&&n.onFirstUpdate(e)})),d):d}}var ce={passive:!0};function le(e){return e.split("-")[0]}function de(e){return e.split("-")[1]}function he(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function fe(e){var t,n=e.reference,i=e.element,r=e.placement,o=r?le(r):null,s=r?de(r):null,a=n.x+n.width/2-i.width/2,u=n.y+n.height/2-i.height/2;switch(o){case z:t={x:a,y:n.y-i.height};break;case K:t={x:a,y:n.y+n.height};break;case X:t={x:n.x+n.width,y:u};break;case G:t={x:n.x-i.width,y:u};break;default:t={x:n.x,y:n.y}}var c=o?he(o):null;if(null!=c){var l="y"===c?"height":"width";switch(s){case Z:t[c]=Math.floor(t[c])-Math.floor(n[l]/2-i[l]/2);break;case Q:t[c]=Math.floor(t[c])+Math.ceil(n[l]/2-i[l]/2)}}return t}var pe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function me(e){var t,n=e.popper,i=e.popperRect,r=e.placement,o=e.offsets,s=e.position,a=e.gpuAcceleration,u=e.adaptive,c=function(e){var t=e.x,n=e.y,i=window.devicePixelRatio||1;return{x:Math.round(t*i)/i||0,y:Math.round(n*i)/i||0}}(o),l=c.x,d=c.y,h=o.hasOwnProperty("x"),f=o.hasOwnProperty("y"),p=G,m=z,v=window;if(u){var g=W(n);g===A(n)&&(g=D(n)),r===z&&(m=K,d-=g.clientHeight-i.height,d*=a?1:-1),r===G&&(p=X,l-=g.clientWidth-i.width,l*=a?1:-1)}var y,b=Object.assign({position:s},u&&pe);return a?Object.assign(Object.assign({},b),{},((y={})[m]=f?"0":"",y[p]=h?"0":"",y.transform=(v.devicePixelRatio||1)<2?"translate("+l+"px, "+d+"px)":"translate3d("+l+"px, "+d+"px, 0)",y)):Object.assign(Object.assign({},b),{},((t={})[m]=f?d+"px":"",t[p]=h?l+"px":"",t.transform="",t))}var ve={left:"right",right:"left",bottom:"top",top:"bottom"};function ge(e){return e.replace(/left|right|bottom|top/g,(function(e){return ve[e]}))}var ye={start:"end",end:"start"};function be(e){return e.replace(/start|end/g,(function(e){return ye[e]}))}function _e(e,t){var n=Boolean(t.getRootNode&&t.getRootNode().host);if(e.contains(t))return!0;if(n){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function we(e){return Object.assign(Object.assign({},e),{},{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ke(e,t){return t===ee?we(function(e){var t=A(e),n=D(e),i=t.visualViewport,r=n.clientWidth,o=n.clientHeight,s=0,a=0;return i&&(r=i.width,o=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=i.offsetLeft,a=i.offsetTop)),{width:r,height:o,x:s+M(e),y:a}}(e)):C(t)?function(e){var t=S(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):we(function(e){var t=D(e),n=O(e),i=e.ownerDocument.body,r=Math.max(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Math.max(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-n.scrollLeft+M(e),a=-n.scrollTop;return"rtl"===P(i||t).direction&&(s+=Math.max(t.clientWidth,i?i.clientWidth:0)-r),{width:r,height:o,x:s,y:a}}(D(e)))}function Ee(e,t,n){var i="clippingParents"===t?function(e){var t=F(B(e)),n=["absolute","fixed"].indexOf(P(e).position)>=0&&C(e)?W(e):e;return T(n)?t.filter((function(e){return T(e)&&_e(e,n)&&"body"!==j(e)})):[]}(e):[].concat(t),r=[].concat(i,[n]),o=r[0],s=r.reduce((function(t,n){var i=ke(e,n);return t.top=Math.max(i.top,t.top),t.right=Math.min(i.right,t.right),t.bottom=Math.min(i.bottom,t.bottom),t.left=Math.max(i.left,t.left),t}),ke(e,o));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function xe(e){return Object.assign(Object.assign({},{top:0,right:0,bottom:0,left:0}),e)}function Ie(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function Le(e,t){void 0===t&&(t={});var n=t,i=n.placement,r=void 0===i?e.placement:i,o=n.boundary,s=void 0===o?"clippingParents":o,a=n.rootBoundary,u=void 0===a?ee:a,c=n.elementContext,l=void 0===c?te:c,d=n.altBoundary,h=void 0!==d&&d,f=n.padding,p=void 0===f?0:f,m=xe("number"!=typeof p?p:Ie(p,Y)),v=l===te?"reference":te,g=e.elements.reference,y=e.rects.popper,b=e.elements[h?v:l],_=Ee(T(b)?b:b.contextElement||D(e.elements.popper),s,u),w=S(g),k=fe({reference:w,element:y,strategy:"absolute",placement:r}),E=we(Object.assign(Object.assign({},y),k)),x=l===te?E:w,I={top:_.top-x.top+m.top,bottom:x.bottom-_.bottom+m.bottom,left:_.left-x.left+m.left,right:x.right-_.right+m.right},L=e.modifiersData.offset;if(l===te&&L){var A=L[r];Object.keys(I).forEach((function(e){var t=[X,K].indexOf(e)>=0?1:-1,n=[z,K].indexOf(e)>=0?"y":"x";I[e]+=A[n]*t}))}return I}function Se(e,t,n){return Math.max(e,Math.min(t,n))}function Ae(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Oe(e){return[z,X,K,G].some((function(t){return e[t]>=0}))}var Te=ue({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,i=e.options,r=i.scroll,o=void 0===r||r,s=i.resize,a=void 0===s||s,u=A(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach((function(e){e.addEventListener("scroll",n.update,ce)})),a&&u.addEventListener("resize",n.update,ce),function(){o&&c.forEach((function(e){e.removeEventListener("scroll",n.update,ce)})),a&&u.removeEventListener("resize",n.update,ce)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=fe({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,i=n.gpuAcceleration,r=void 0===i||i,o=n.adaptive,s=void 0===o||o,a={placement:le(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign(Object.assign({},t.styles.popper),me(Object.assign(Object.assign({},a),{},{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign(Object.assign({},t.styles.arrow),me(Object.assign(Object.assign({},a),{},{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1})))),t.attributes.popper=Object.assign(Object.assign({},t.attributes.popper),{},{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},i=t.attributes[e]||{},r=t.elements[e];C(r)&&j(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(e){var t=i[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var i=t.elements[e],r=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});C(i)&&j(i)&&(Object.assign(i.style,o),Object.keys(r).forEach((function(e){i.removeAttribute(e)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.offset,o=void 0===r?[0,0]:r,s=ie.reduce((function(e,n){return e[n]=function(e,t,n){var i=le(e),r=[G,z].indexOf(i)>=0?-1:1,o="function"==typeof n?n(Object.assign(Object.assign({},t),{},{placement:e})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*r,[G,X].indexOf(i)>=0?{x:a,y:s}:{x:s,y:a}}(n,t.rects,o),e}),{}),a=s[t.placement],u=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=s}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var r=n.mainAxis,o=void 0===r||r,s=n.altAxis,a=void 0===s||s,u=n.fallbackPlacements,c=n.padding,l=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,p=void 0===f||f,m=n.allowedAutoPlacements,v=t.options.placement,g=le(v),y=u||(g===v||!p?[ge(v)]:function(e){if(le(e)===J)return[];var t=ge(e);return[be(e),t,be(t)]}(v)),b=[v].concat(y).reduce((function(e,n){return e.concat(le(n)===J?function(e,t){void 0===t&&(t={});var n=t,i=n.placement,r=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,u=n.allowedAutoPlacements,c=void 0===u?ie:u,l=de(i),d=l?a?ne:ne.filter((function(e){return de(e)===l})):Y,h=d.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=d);var f=h.reduce((function(t,n){return t[n]=Le(e,{placement:n,boundary:r,rootBoundary:o,padding:s})[le(n)],t}),{});return Object.keys(f).sort((function(e,t){return f[e]-f[t]}))}(t,{placement:n,boundary:l,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:m}):n)}),[]),_=t.rects.reference,w=t.rects.popper,k=new Map,E=!0,x=b[0],I=0;I<b.length;I++){var L=b[I],S=le(L),A=de(L)===Z,O=[z,K].indexOf(S)>=0,T=O?"width":"height",C=Le(t,{placement:L,boundary:l,rootBoundary:d,altBoundary:h,padding:c}),j=O?A?X:G:A?K:z;_[T]>w[T]&&(j=ge(j));var $=ge(j),D=[];if(o&&D.push(C[S]<=0),a&&D.push(C[j]<=0,C[$]<=0),D.every((function(e){return e}))){x=L,E=!1;break}k.set(L,D)}if(E)for(var M=function(e){var t=b.find((function(t){var n=k.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return x=t,"break"},P=p?3:1;P>0;P--){if("break"===M(P))break}t.placement!==x&&(t.modifiersData[i]._skip=!0,t.placement=x,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.mainAxis,o=void 0===r||r,s=n.altAxis,a=void 0!==s&&s,u=n.boundary,c=n.rootBoundary,l=n.altBoundary,d=n.padding,h=n.tether,f=void 0===h||h,p=n.tetherOffset,m=void 0===p?0:p,v=Le(t,{boundary:u,rootBoundary:c,padding:d,altBoundary:l}),g=le(t.placement),y=de(t.placement),b=!y,_=he(g),w="x"===_?"y":"x",k=t.modifiersData.popperOffsets,E=t.rects.reference,x=t.rects.popper,I="function"==typeof m?m(Object.assign(Object.assign({},t.rects),{},{placement:t.placement})):m,L={x:0,y:0};if(k){if(o){var S="y"===_?z:G,A="y"===_?K:X,O="y"===_?"height":"width",T=k[_],C=k[_]+v[S],j=k[_]-v[A],$=f?-x[O]/2:0,D=y===Z?E[O]:x[O],M=y===Z?-x[O]:-E[O],P=t.elements.arrow,q=f&&P?R(P):{width:0,height:0},N=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},B=N[S],H=N[A],F=Se(0,E[O],q[O]),V=b?E[O]/2-$-F-B-I:D-F-B-I,U=b?-E[O]/2+$+F+H+I:M+F+H+I,J=t.elements.arrow&&W(t.elements.arrow),Y=J?"y"===_?J.clientTop||0:J.clientLeft||0:0,Q=t.modifiersData.offset?t.modifiersData.offset[t.placement][_]:0,ee=k[_]+V-Q-Y,te=k[_]+U-Q,ne=Se(f?Math.min(C,ee):C,T,f?Math.max(j,te):j);k[_]=ne,L[_]=ne-T}if(a){var ie="x"===_?z:G,re="x"===_?K:X,oe=k[w],se=Se(oe+v[ie],oe,oe-v[re]);k[w]=se,L[w]=se-oe}t.modifiersData[i]=L}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,i=e.name,r=n.elements.arrow,o=n.modifiersData.popperOffsets,s=le(n.placement),a=he(s),u=[G,X].indexOf(s)>=0?"height":"width";if(r&&o){var c=n.modifiersData[i+"#persistent"].padding,l=R(r),d="y"===a?z:G,h="y"===a?K:X,f=n.rects.reference[u]+n.rects.reference[a]-o[a]-n.rects.popper[u],p=o[a]-n.rects.reference[a],m=W(r),v=m?"y"===a?m.clientHeight||0:m.clientWidth||0:0,g=f/2-p/2,y=c[d],b=v-l[u]-c[h],_=v/2-l[u]/2+g,w=Se(y,_,b),k=a;n.modifiersData[i]=((t={})[k]=w,t.centerOffset=w-_,t)}},effect:function(e){var t=e.state,n=e.options,i=e.name,r=n.element,o=void 0===r?"[data-popper-arrow]":r,s=n.padding,a=void 0===s?0:s;null!=o&&("string"!=typeof o||(o=t.elements.popper.querySelector(o)))&&_e(t.elements.popper,o)&&(t.elements.arrow=o,t.modifiersData[i+"#persistent"]={padding:xe("number"!=typeof a?a:Ie(a,Y))})},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,i=t.rects.reference,r=t.rects.popper,o=t.modifiersData.preventOverflow,s=Le(t,{elementContext:"reference"}),a=Le(t,{altBoundary:!0}),u=Ae(s,i),c=Ae(a,r,o),l=Oe(u),d=Oe(c);t.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:c,isReferenceHidden:l,hasPopperEscaped:d},t.attributes.popper=Object.assign(Object.assign({},t.attributes.popper),{},{"data-popper-reference-hidden":l,"data-popper-escaped":d})}}]}),Ce="tippy-content",je="tippy-backdrop",$e="tippy-arrow",De="tippy-svg-arrow",Me={passive:!0,capture:!0};function Pe(e,t,n){if(Array.isArray(e)){var i=e[t];return null==i?Array.isArray(n)?n[t]:n:i}return e}function qe(e,t){var n={}.toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function Ne(e,t){return"function"==typeof e?e.apply(void 0,t):e}function Re(e,t){return 0===t?e:function(i){clearTimeout(n),n=setTimeout((function(){e(i)}),t)};var n}function Be(e){return[].concat(e)}function He(e,t){-1===e.indexOf(t)&&e.push(t)}function Fe(e){return e.split("-")[0]}function Ve(e){return[].slice.call(e)}function Ue(){return document.createElement("div")}function We(e){return["Element","Fragment"].some((function(t){return qe(e,t)}))}function ze(e){return qe(e,"MouseEvent")}function Ke(e){return!(!e||!e._tippy||e._tippy.reference!==e)}function Xe(e){return We(e)?[e]:function(e){return qe(e,"NodeList")}(e)?Ve(e):Array.isArray(e)?e:Ve(document.querySelectorAll(e))}function Ge(e,t){e.forEach((function(e){e&&(e.style.transitionDuration=t+"ms")}))}function Je(e,t){e.forEach((function(e){e&&e.setAttribute("data-state",t)}))}function Ye(e){var t=Be(e)[0];return t&&t.ownerDocument||document}function Ze(e,t,n){var i=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(t){e[i](t,n)}))}var Qe={isTouch:!1},et=0;function tt(){Qe.isTouch||(Qe.isTouch=!0,window.performance&&document.addEventListener("mousemove",nt))}function nt(){var e=performance.now();e-et<20&&(Qe.isTouch=!1,document.removeEventListener("mousemove",nt)),et=e}function it(){var e=document.activeElement;if(Ke(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}var rt="undefined"!=typeof window&&"undefined"!=typeof document?navigator.userAgent:"",ot=/MSIE |Trident\//.test(rt);var st={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},at=Object.assign({appendTo:function(){return document.body},aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},st,{},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),ut=Object.keys(at);function ct(e){var t=(e.plugins||[]).reduce((function(t,n){var i=n.name,r=n.defaultValue;return i&&(t[i]=void 0!==e[i]?e[i]:r),t}),{});return Object.assign({},e,{},t)}function lt(e,t){var n=Object.assign({},t,{content:Ne(t.content,[e])},t.ignoreAttributes?{}:function(e,t){return(t?Object.keys(ct(Object.assign({},at,{plugins:t}))):ut).reduce((function(t,n){var i=(e.getAttribute("data-tippy-"+n)||"").trim();if(!i)return t;if("content"===n)t[n]=i;else try{t[n]=JSON.parse(i)}catch(e){t[n]=i}return t}),{})}(e,t.plugins));return n.aria=Object.assign({},at.aria,{},n.aria),n.aria={expanded:"auto"===n.aria.expanded?t.interactive:n.aria.expanded,content:"auto"===n.aria.content?t.interactive?null:"describedby":n.aria.content},n}function dt(e,t){e.innerHTML=t}function ht(e){var t=Ue();return!0===e?t.className=$e:(t.className=De,We(e)?t.appendChild(e):dt(t,e)),t}function ft(e,t){We(t.content)?(dt(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?dt(e,t.content):e.textContent=t.content)}function pt(e){var t=e.firstElementChild,n=Ve(t.children);return{box:t,content:n.find((function(e){return e.classList.contains(Ce)})),arrow:n.find((function(e){return e.classList.contains($e)||e.classList.contains(De)})),backdrop:n.find((function(e){return e.classList.contains(je)}))}}function mt(e){var t=function(t,i){var r=pt(n),o=r.box,s=r.content,a=r.arrow;i.theme?o.setAttribute("data-theme",i.theme):o.removeAttribute("data-theme"),"string"==typeof i.animation?o.setAttribute("data-animation",i.animation):o.removeAttribute("data-animation"),i.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"==typeof i.maxWidth?i.maxWidth+"px":i.maxWidth,i.role?o.setAttribute("role",i.role):o.removeAttribute("role"),t.content===i.content&&t.allowHTML===i.allowHTML||ft(s,e.props),i.arrow?a?t.arrow!==i.arrow&&(o.removeChild(a),o.appendChild(ht(i.arrow))):o.appendChild(ht(i.arrow)):a&&o.removeChild(a)},n=Ue(),i=Ue();i.className="tippy-box",i.setAttribute("data-state","hidden"),i.setAttribute("tabindex","-1");var r=Ue();return r.className=Ce,r.setAttribute("data-state","hidden"),ft(r,e.props),n.appendChild(i),i.appendChild(r),t(e.props,e.props),{popper:n,onUpdate:t}}mt.$$tippy=!0;var vt=1,gt=[],yt=[];function bt(e,t){var n,i,r,o,s,a,u,c,l,d=function(){var e=Y.props.touch;return Array.isArray(e)?e:[e,0]},h=function(){return"hold"===d()[0]},f=function(){var e;return!!(null==(e=Y.props.render)?void 0:e.$$tippy)},p=function(){return c||e},m=function(){return pt(Q)},v=function(e){return Y.state.isMounted&&!Y.state.isVisible||Qe.isTouch||s&&"focus"===s.type?0:Pe(Y.props.delay,e?0:1,at.delay)},g=function(){Q.style.pointerEvents=Y.props.interactive&&Y.state.isVisible?"":"none",Q.style.zIndex=""+Y.props.zIndex},y=function(e,t,n){var i;(void 0===n&&(n=!0),te.forEach((function(n){n[e]&&n[e].apply(void 0,t)})),n)&&(i=Y.props)[e].apply(i,t)},b=function(){var t=Y.props.aria;if(t.content){var n="aria-"+t.content,i=Q.id;Be(Y.props.triggerTarget||e).forEach((function(e){var t=e.getAttribute(n);if(Y.state.isVisible)e.setAttribute(n,t?t+" "+i:i);else{var r=t&&t.replace(i,"").trim();r?e.setAttribute(n,r):e.removeAttribute(n)}}))}},_=function(){!ne&&Y.props.aria.expanded&&Be(Y.props.triggerTarget||e).forEach((function(e){Y.props.interactive?e.setAttribute("aria-expanded",Y.state.isVisible&&e===p()?"true":"false"):e.removeAttribute("aria-expanded")}))},w=function(){X.removeEventListener("mousemove",K),gt=gt.filter((function(e){return e!==K}))},k=function(e){if(!(Qe.isTouch&&(U||"mousedown"===e.type)||Y.props.interactive&&Q.contains(e.target))){if(p().contains(e.target)){if(Qe.isTouch)return;if(Y.state.isVisible&&Y.props.trigger.indexOf("click")>=0)return}else y("onClickOutside",[Y,e]);!0===Y.props.hideOnClick&&(Y.clearDelayTimeouts(),Y.hide(),V=!0,setTimeout((function(){V=!1})),Y.state.isMounted||L())}},E=function(){U=!0},x=function(){U=!1},I=function(){X.addEventListener("mousedown",k,!0),X.addEventListener("touchend",k,Me),X.addEventListener("touchstart",x,Me),X.addEventListener("touchmove",E,Me)},L=function(){X.removeEventListener("mousedown",k,!0),X.removeEventListener("touchend",k,Me),X.removeEventListener("touchstart",x,Me),X.removeEventListener("touchmove",E,Me)},S=function(e,t){var n=m().box;function i(e){e.target===n&&(Ze(n,"remove",i),t())}if(0===e)return t();Ze(n,"remove",a),Ze(n,"add",i),a=i},A=function(t,n,i){void 0===i&&(i=!1),Be(Y.props.triggerTarget||e).forEach((function(e){e.addEventListener(t,n,i),z.push({node:e,eventType:t,handler:n,options:i})}))},O=function(){var e;h()&&(A("touchstart",C,{passive:!0}),A("touchend",$,{passive:!0})),(e=Y.props.trigger,e.split(/\s+/).filter(Boolean)).forEach((function(e){if("manual"!==e)switch(A(e,C),e){case"mouseenter":A("mouseleave",$);break;case"focus":A(ot?"focusout":"blur",D);break;case"focusin":A("focusout",D)}}))},T=function(){z.forEach((function(e){var t=e.node,n=e.eventType,i=e.handler,r=e.options;t.removeEventListener(n,i,r)})),z=[]},C=function(e){var t,n=!1;if(Y.state.isEnabled&&!M(e)&&!V){var i="focus"===(null==(t=s)?void 0:t.type);s=e,c=e.currentTarget,_(),!Y.state.isVisible&&ze(e)&&gt.forEach((function(t){return t(e)})),"click"===e.type&&(Y.props.trigger.indexOf("mouseenter")<0||F)&&!1!==Y.props.hideOnClick&&Y.state.isVisible?n=!0:R(e),"click"===e.type&&(F=!n),n&&!i&&B(e)}},j=function(e){var t=e.target,n=p().contains(t)||Q.contains(t);"mousemove"===e.type&&n||function(e,t){var n=t.clientX,i=t.clientY;return e.every((function(e){var t=e.popperRect,r=e.popperState,o=e.props.interactiveBorder,s=Fe(r.placement),a=r.modifiersData.offset;if(!a)return!0;var u="bottom"===s?a.top.y:0,c="top"===s?a.bottom.y:0,l="right"===s?a.left.x:0,d="left"===s?a.right.x:0,h=t.top-i+u>o,f=i-t.bottom-c>o,p=t.left-n+l>o,m=n-t.right-d>o;return h||f||p||m}))}(N().concat(Q).map((function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:H}:null})).filter(Boolean),e)&&(w(),B(e))},$=function(e){M(e)||Y.props.trigger.indexOf("click")>=0&&F||(Y.props.interactive?Y.hideWithInteractivity(e):B(e))},D=function(e){Y.props.trigger.indexOf("focusin")<0&&e.target!==p()||Y.props.interactive&&e.relatedTarget&&Q.contains(e.relatedTarget)||B(e)},M=function(e){return!!Qe.isTouch&&h()!==e.type.indexOf("touch")>=0},P=function(){q();var t=Y.props,n=t.popperOptions,i=t.placement,r=t.offset,o=t.getReferenceClientRect,s=t.moveTransition,a=f()?pt(Q).arrow:null,c=o?{getBoundingClientRect:o,contextElement:o.contextElement||p()}:e,l=[{name:"offset",options:{offset:r}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!s}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(f()){var n=m().box;["placement","reference-hidden","escaped"].forEach((function(e){"placement"===e?n.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?n.setAttribute("data-"+e,""):n.removeAttribute("data-"+e)})),t.attributes.popper={}}}}];f()&&a&&l.push({name:"arrow",options:{element:a,padding:3}}),l.push.apply(l,(null==n?void 0:n.modifiers)||[]),Y.popperInstance=Te(c,Q,Object.assign({},n,{placement:i,onFirstUpdate:u,modifiers:l}))},q=function(){Y.popperInstance&&(Y.popperInstance.destroy(),Y.popperInstance=null)},N=function(){return Ve(Q.querySelectorAll("[data-tippy-root]"))},R=function(e){Y.clearDelayTimeouts(),e&&y("onTrigger",[Y,e]),I();var t=v(!0),n=d(),r=n[0],o=n[1];Qe.isTouch&&"hold"===r&&o&&(t=o),t?i=setTimeout((function(){Y.show()}),t):Y.show()},B=function(e){if(Y.clearDelayTimeouts(),y("onUntrigger",[Y,e]),Y.state.isVisible){if(!(Y.props.trigger.indexOf("mouseenter")>=0&&Y.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&F)){var t=v(!1);t?r=setTimeout((function(){Y.state.isVisible&&Y.hide()}),t):o=requestAnimationFrame((function(){Y.hide()}))}}else L()},H=lt(e,Object.assign({},at,{},ct((n=t,Object.keys(n).reduce((function(e,t){return void 0!==n[t]&&(e[t]=n[t]),e}),{}))))),F=!1,V=!1,U=!1,W=!1,z=[],K=Re(j,H.interactiveDebounce),X=Ye(H.triggerTarget||e),G=vt++,J=(l=H.plugins).filter((function(e,t){return l.indexOf(e)===t})),Y={id:G,reference:e,popper:Ue(),popperInstance:null,props:H,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:J,clearDelayTimeouts:function(){clearTimeout(i),clearTimeout(r),cancelAnimationFrame(o)},setProps:function(t){if(!Y.state.isDestroyed){y("onBeforeUpdate",[Y,t]),T();var n=Y.props,i=lt(e,Object.assign({},Y.props,{},t,{ignoreAttributes:!0}));Y.props=i,O(),n.interactiveDebounce!==i.interactiveDebounce&&(w(),K=Re(j,i.interactiveDebounce)),n.triggerTarget&&!i.triggerTarget?Be(n.triggerTarget).forEach((function(e){e.removeAttribute("aria-expanded")})):i.triggerTarget&&e.removeAttribute("aria-expanded"),_(),g(),ee&&ee(n,i),Y.popperInstance&&(P(),N().forEach((function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)}))),y("onAfterUpdate",[Y,t])}},setContent:function(e){Y.setProps({content:e})},show:function(){var e=Y.state.isVisible,t=Y.state.isDestroyed,n=!Y.state.isEnabled,i=Qe.isTouch&&!Y.props.touch,r=Pe(Y.props.duration,0,at.duration);if(!(e||t||n||i||p().hasAttribute("disabled")||(y("onShow",[Y],!1),!1===Y.props.onShow(Y)))){if(Y.state.isVisible=!0,f()&&(Q.style.visibility="visible"),g(),I(),Y.state.isMounted||(Q.style.transition="none"),f()){var o=m();Ge([o.box,o.content],0)}var s,a,c;u=function(){if(Y.state.isVisible&&!W){if(W=!0,Q.offsetHeight,Q.style.transition=Y.props.moveTransition,f()&&Y.props.animation){var e=m(),t=e.box,n=e.content;Ge([t,n],r),Je([t,n],"visible")}b(),_(),He(yt,Y),Y.state.isMounted=!0,y("onMount",[Y]),Y.props.animation&&f()&&function(e,t){S(e,t)}(r,(function(){Y.state.isShown=!0,y("onShown",[Y])}))}},a=Y.props.appendTo,c=p(),(s=Y.props.interactive&&a===at.appendTo||"parent"===a?c.parentNode:Ne(a,[c])).contains(Q)||s.appendChild(Q),P()}},hide:function(){var e=!Y.state.isVisible,t=Y.state.isDestroyed,n=!Y.state.isEnabled,i=Pe(Y.props.duration,1,at.duration);if(!(e||t||n)&&(y("onHide",[Y],!1),!1!==Y.props.onHide(Y))){if(Y.state.isVisible=!1,Y.state.isShown=!1,W=!1,F=!1,f()&&(Q.style.visibility="hidden"),w(),L(),g(),f()){var r=m(),o=r.box,s=r.content;Y.props.animation&&(Ge([o,s],i),Je([o,s],"hidden"))}b(),_(),Y.props.animation?f()&&function(e,t){S(e,(function(){!Y.state.isVisible&&Q.parentNode&&Q.parentNode.contains(Q)&&t()}))}(i,Y.unmount):Y.unmount()}},hideWithInteractivity:function(e){X.addEventListener("mousemove",K),He(gt,K),K(e)},enable:function(){Y.state.isEnabled=!0},disable:function(){Y.hide(),Y.state.isEnabled=!1},unmount:function(){Y.state.isVisible&&Y.hide(),Y.state.isMounted&&(q(),N().forEach((function(e){e._tippy.unmount()})),Q.parentNode&&Q.parentNode.removeChild(Q),yt=yt.filter((function(e){return e!==Y})),Y.state.isMounted=!1,y("onHidden",[Y]))},destroy:function(){Y.state.isDestroyed||(Y.clearDelayTimeouts(),Y.unmount(),T(),delete e._tippy,Y.state.isDestroyed=!0,y("onDestroy",[Y]))}};if(!H.render)return Y;var Z=H.render(Y),Q=Z.popper,ee=Z.onUpdate;Q.setAttribute("data-tippy-root",""),Q.id="tippy-"+Y.id,Y.popper=Q,e._tippy=Y,Q._tippy=Y;var te=J.map((function(e){return e.fn(Y)})),ne=e.hasAttribute("aria-expanded");return O(),_(),g(),y("onCreate",[Y]),H.showOnCreate&&R(),Q.addEventListener("mouseenter",(function(){Y.props.interactive&&Y.state.isVisible&&Y.clearDelayTimeouts()})),Q.addEventListener("mouseleave",(function(e){Y.props.interactive&&Y.props.trigger.indexOf("mouseenter")>=0&&(X.addEventListener("mousemove",K),K(e))})),Y}function _t(e,t){void 0===t&&(t={});var n=at.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",tt,Me),window.addEventListener("blur",it);var i=Object.assign({},t,{plugins:n}),r=Xe(e).reduce((function(e,t){var n=t&&bt(t,i);return n&&e.push(n),e}),[]);return We(e)?r[0]:r}_t.defaultProps=at,_t.setDefaultProps=function(e){Object.keys(e).forEach((function(t){at[t]=e[t]}))},_t.currentInput=Qe;_t.setDefaultProps({render:mt});var wt=_t;
/**
 *
 *
 * @author Jerry Bendy <jerry@icewingcc.com>
 * @licence MIT
 *
 */
!function(e){var t,n=function(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,(function(e){return t[e]}))},i=function(e){return e.replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/gi,(function(e){return decodeURIComponent(e)}))},r=function(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return p&&(n[e.Symbol.iterator]=function(){return n}),n},o=function(e){var t={};if("object"==typeof e)if(a(e))for(var n=0;n<e.length;n++){var r=e[n];if(!a(r)||2!==r.length)throw new TypeError("Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements");s(t,r[0],r[1])}else for(var o in e)e.hasOwnProperty(o)&&s(t,o,e[o]);else{0===e.indexOf("?")&&(e=e.slice(1));for(var u=e.split("&"),c=0;c<u.length;c++){var l=u[c],d=l.indexOf("=");-1<d?s(t,i(l.slice(0,d)),i(l.slice(d+1))):l&&s(t,i(l),"")}}return t},s=function(e,t,n){var i="string"==typeof n?n:null!=n&&"function"==typeof n.toString?n.toString():JSON.stringify(n);u(e,t)?e[t].push(i):e[t]=[i]},a=function(e){return!!e&&"[object Array]"===Object.prototype.toString.call(e)},u=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c=function(){try{if(e.URLSearchParams&&"bar"===new e.URLSearchParams("foo=bar").get("foo"))return e.URLSearchParams}catch(e){}return null}(),l=c&&"a=1"===new c({a:1}).toString(),d=c&&"+"===new c("s=%2B").get("s"),h=!c||((t=new c).append("s"," &"),"s=+%26"===t.toString()),f=g.prototype,p=!(!e.Symbol||!e.Symbol.iterator);if(!(c&&l&&d&&h)){f.append=function(e,t){s(this.__URLSearchParams__,e,t)},f.delete=function(e){delete this.__URLSearchParams__[e]},f.get=function(e){var t=this.__URLSearchParams__;return this.has(e)?t[e][0]:null},f.getAll=function(e){var t=this.__URLSearchParams__;return this.has(e)?t[e].slice(0):[]},f.has=function(e){return u(this.__URLSearchParams__,e)},f.set=function(e,t){this.__URLSearchParams__[e]=[""+t]},f.toString=function(){var e,t,i,r,o=this.__URLSearchParams__,s=[];for(t in o)for(i=n(t),e=0,r=o[t];e<r.length;e++)s.push(i+"="+n(r[e]));return s.join("&")};var m=!!d&&c&&!l&&e.Proxy;Object.defineProperty(e,"URLSearchParams",{value:m?new Proxy(c,{construct:function(e,t){return new e(new g(t[0]).toString())}}):g});var v=e.URLSearchParams.prototype;v.polyfill=!0,v.forEach=v.forEach||function(e,t){var n=o(this.toString());Object.getOwnPropertyNames(n).forEach((function(i){n[i].forEach((function(n){e.call(t,n,i,this)}),this)}),this)},v.sort=v.sort||function(){var e,t,n,i=o(this.toString()),r=[];for(e in i)r.push(e);for(r.sort(),t=0;t<r.length;t++)this.delete(r[t]);for(t=0;t<r.length;t++){var s=r[t],a=i[s];for(n=0;n<a.length;n++)this.append(s,a[n])}},v.keys=v.keys||function(){var e=[];return this.forEach((function(t,n){e.push(n)})),r(e)},v.values=v.values||function(){var e=[];return this.forEach((function(t){e.push(t)})),r(e)},v.entries=v.entries||function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),r(e)},p&&(v[e.Symbol.iterator]=v[e.Symbol.iterator]||v.entries)}function g(e){((e=e||"")instanceof URLSearchParams||e instanceof g)&&(e=e.toString()),this.__URLSearchParams__=o(e)}}(void 0!==e?e:"undefined"!=typeof window?window:{}),function(){var e=function(e){if("string"!=typeof e&&(e=e.toString()),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()},t=function(e){return"string"!=typeof e&&(e=e.toString()),e},n=function(e){if(e.bodyUsed)return fetch.Promise.reject(new TypeError("Already read"));e.bodyUsed=!0},i=function(e){return new fetch.Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))},r=function(e){var t=new FileReader;return t.readAsArrayBuffer(e),i(t)},o=function(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(l.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(l.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else{if(e)throw new Error("unsupported BodyInit type");this._bodyText=""}},l.blob?(this.blob=function(){var e=n(this);if(e)return e;if(this._bodyBlob)return fetch.Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return fetch.Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(r)},this.text=function(){var e,t,r=n(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,(t=new FileReader).readAsText(e),i(t);if(this._bodyFormData)throw new Error("could not read FormData body as text");return fetch.Promise.resolve(this._bodyText)}):this.text=function(){var e=n(this);return e||fetch.Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(a)}),this.json=function(){return this.text().then((function(e){return JSON.parse(e)}))},this},s=function(e,t){var n,i;if(t=t||{},this.url=e,this.credentials=t.credentials||"omit",this.headers=new f(t.headers),this.method=(n=t.method||"GET",i=n.toUpperCase(),d.indexOf(i)>-1?i:n),this.mode=t.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&t.body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(t.body)},a=function(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}})),t},u=function(e){var t=new f;return e.getAllResponseHeaders().trim().split("\n").forEach((function(e){var n=e.trim().split(":"),i=n.shift().trim(),r=n.join(":").trim();t.append(i,r)})),t},c=function(e,t){t||(t={}),this._initBody(e),this.type="default",this.url=null,this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof f?t.headers:new f(t.headers),this.url=t.url||""};if(!self.fetch){f.prototype.append=function(n,i){n=e(n),i=t(i);var r=this.map[n];r||(r=[],this.map[n]=r),r.push(i)},f.prototype.delete=function(t){delete this.map[e(t)]},f.prototype.get=function(t){var n=this.map[e(t)];return n?n[0]:null},f.prototype.getAll=function(t){return this.map[e(t)]||[]},f.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},f.prototype.set=function(n,i){this.map[e(n)]=[t(i)]},f.prototype.forEach=function(e){var t=this;Object.getOwnPropertyNames(this.map).forEach((function(n){e(n,t.map[n])}))};var l={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self},d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],h=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent);o.call(s.prototype),o.call(c.prototype),self.Headers=f,self.Request=s,self.Response=c,self.fetch=function(e,t){var n;return n=s.prototype.isPrototypeOf(e)&&!t?e:new s(e,t),new fetch.Promise((function(e,t){var i=function(){if(4===r.readyState){var n=1223===r.status?204:r.status;if(n<100||n>599)t(new TypeError("Network request failed"));else{var i={status:n,statusText:r.statusText,headers:u(r),url:"responseURL"in r?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):void 0},o="response"in r?r.response:r.responseText;e(new c(o,i))}}},r=function(){return h&&!/^(get|post|head|put|delete|options)$/i.test(this.method)?(this.usingActiveXhr=!0,new ActiveXObject("Microsoft.XMLHTTP")):new XMLHttpRequest}();"cors"===n.credentials&&(r.withCredentials=!0),r.onreadystatechange=i,self.usingActiveXhr||(r.onload=i,r.onerror=function(){t(new TypeError("Network request failed"))}),r.open(n.method,n.url,!0),"responseType"in r&&l.blob&&(r.responseType="blob"),n.headers.forEach((function(e,t){t.forEach((function(t){r.setRequestHeader(e,t)}))})),r.send(void 0===n._bodyInit?null:n._bodyInit)}))},fetch.Promise=self.Promise,self.fetch.polyfill=!0}function f(e){this.map={};var t=this;e instanceof f?e.forEach((function(e,n){n.forEach((function(n){t.append(e,n)}))})):e&&Object.getOwnPropertyNames(e).forEach((function(n){t.append(n,e[n])}))}}();var kt,Et={};kt=function(){var e,t=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}},n=function(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i},i=function(e){for(var t=arguments,i=function(i){var r=null!=t[i]?t[i]:{};i%2?n(Object(r),!0).forEach((function(t){var n,i;n=e,t=r[i=t],i in n?Object.defineProperty(n,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[i]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))},r=1;r<arguments.length;r++)i(r);return e},r=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i},o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}},s=function(e,t){for(var n=document.getElementsByClassName(e.resultsList.className),i=0;i<n.length;i++)t!==n[i]&&t!==e.inputField&&n[i].parentNode.removeChild(n[i]);e.inputField.removeAttribute("aria-activedescendant"),e.inputField.setAttribute("aria-expanded",!1)},a=function(e,t,n){var r,o,s=(r=e,(o=document.createElement(r.resultsList.element)).setAttribute("id",r.resultsList.idName),o.setAttribute("aria-label",r.name),o.setAttribute("class",r.resultsList.className),o.setAttribute("role","listbox"),o.setAttribute("tabindex","-1"),r.resultsList.container&&r.resultsList.container(o),("string"==typeof r.resultsList.destination?document.querySelector(r.resultsList.destination):r.resultsList.destination()).insertAdjacentElement(r.resultsList.position,o),o);e.inputField.setAttribute("aria-expanded",!0);for(var a=function(r){var o,a,u,c,l=t.results[r];(c=(o=l,a=r,u=e,(c=document.createElement(u.resultItem.element)).setAttribute("id","".concat(u.resultItem.idName,"_").concat(a)),c.setAttribute("class",u.resultItem.className),c.setAttribute("role","option"),c.innerHTML=o.match,u.resultItem.content&&u.resultItem.content(o,c),c)).addEventListener("click",(function(o){o={event:o,matches:n,input:t.input,query:t.query,results:t.results,selection:i(i({},l),{},{index:r})},e.onSelection&&e.onSelection(o)})),s.appendChild(c)},u=0;u<t.results.length;u++)a(u);return s},u=function(e,t,n){e.dispatchEvent(new CustomEvent(n,{bubbles:!0,detail:t,cancelable:!0}))},c=function(e,t){for(var n=[],i=function(i){function r(r){var o=(r?s[r]:s).toString();o&&((o="function"==typeof e.searchEngine?e.searchEngine(t,o):function(e,t,n){var i=n.diacritics?t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):t.toLowerCase();if("loose"===n.searchEngine){e=e.replace(/ /g,"");for(var r=[],o=0,s=0;s<i.length;s++){var a=t[s];o<e.length&&i[s]===e[o]&&(a=n.highlight?'<span class="autoComplete_highlighted">'.concat(a,"</span>"):a,o++),r.push(a)}if(o===e.length)return r.join("")}else if(i.includes(e))return e=new RegExp("".concat(e),"i").exec(t),n.highlight?t.replace(e,'<span class="autoComplete_highlighted">'.concat(e,"</span>")):t}(t,o,e))&&r?n.push({key:r,index:i,match:o,value:s}):o&&!r&&n.push({index:i,match:o,value:s}))}var s=e.data.store[i];if(e.data.key){var a,u=o(e.data.key);try{for(u.s();!(a=u.n()).done;)r(a.value)}catch(e){u.e(e)}finally{u.f()}}else r()},r=0;r<e.data.store.length;r++)i(r);return e.sort?n.sort(e.sort):n};function l(e){!function(e){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}(this);var t=void 0===(S=e.name)?"Search":S,n=void 0===(_=e.selector)?"#autoComplete":_,i=void 0!==(D=e.observer)&&D,r=($=e.data).src,o=$.key,s=void 0!==(w=$.cache)&&w,a=$.store,u=$.results,c=e.query,d=void 0===(k=(A=void 0===(A=e.trigger)?{}:A).event)?["input"]:k,h=void 0!==(E=A.condition)&&E,f=void 0===(O=e.searchEngine)?"strict":O,p=void 0!==(x=e.diacritics)&&x,m=void 0===(j=e.threshold)?1:j,v=void 0===(I=e.debounce)?0:I,g=void 0===(L=(C=void 0===(C=e.resultsList)?{}:C).render)||L,y=void 0!==(T=C.container)&&T,b=C.destination,_=void 0===(S=C.position)?"afterend":S,w=void 0===(D=C.element)?"ul":D,k=void 0===($=C.idName)?"autoComplete_list":$,E=void 0===(A=C.className)?"autoComplete_list":A,x=void 0!==(O=C.navigation)&&O,I=void 0!==(j=e.sort)&&j,L=e.placeHolder,S=void 0===(T=e.maxResults)?5:T,A=void 0!==($=(D=void 0===(D=e.resultItem)?{}:D).content)&&$,O=void 0===(C=D.element)?"li":C,T=void 0===(j=D.idName)?"autoComplete_result":j,C=void 0===($=D.className)?"autoComplete_result":$,j=e.noResults,$=void 0!==(D=e.highlight)&&D,D=e.feedback;e=e.onSelection;this.name=t,this.selector=n,this.observer=i,this.data={src:r,key:o,cache:s,store:a,results:u},this.query=c,this.trigger={event:d,condition:h},this.searchEngine=f,this.diacritics=p,this.threshold=m,this.debounce=v,this.resultsList={render:g,container:y,destination:b||this.selector,position:_,element:w,idName:k,className:E,navigation:x},this.sort=I,this.placeHolder=L,this.maxResults=S,this.resultItem={content:A,element:O,idName:T,className:C},this.noResults=j,this.highlight=$,this.feedback=D,this.onSelection=e,this.inputField="string"==typeof this.selector?document.querySelector(this.selector):this.selector(),this.observer?this.preInit():this.init()}return e=[{key:"start",value:function(e,t){var n=this,r=this.data.results?this.data.results(c(this,t)):c(this,t);t={input:e,query:t,matches:r,results:r.slice(0,this.maxResults)};return u(this.inputField,t,"results"),r.length?this.resultsList.render?(r.length&&a(this,t,r),u(this.inputField,t,"rendered"),function(e,t){function n(e,n,s,a){e.preventDefault(),s?r++:r--,o(n),a.inputField.setAttribute("aria-activedescendant",n[r].id),u(e.srcElement,i(i({event:e},t),{},{selection:t.results[r]}),"navigation")}var r=-1,o=function(e){if(!e)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].removeAttribute("aria-selected"),e[t].classList.remove("autoComplete_selected")}(e),e[r=(r=r>=e.length?0:r)<0?e.length-1:r].setAttribute("aria-selected","true"),e[r].classList.add("autoComplete_selected")},a=e.resultsList.navigation||function(t){var i=document.getElementById(e.resultsList.idName);if(!i)return e.inputField.removeEventListener("keydown",a);i=i.getElementsByTagName(e.resultItem.element),27===t.keyCode?(e.inputField.value="",s(e)):40===t.keyCode||9===t.keyCode?n(t,i,!0,e):38===t.keyCode||9===t.keyCode?n(t,i,!1,e):13===t.keyCode&&(t.preventDefault(),-1<r&&i&&i[r].click())};e.inputField.autoCompleteNavigate&&e.inputField.removeEventListener("keydown",e.inputField.autoCompleteNavigate),e.inputField.autoCompleteNavigate=a,e.inputField.addEventListener("keydown",a)}(this,t),void document.addEventListener("click",(function(e){return s(n,e.target)}))):this.feedback(t):this.noResults?this.noResults(t,a):null}},{key:"dataStore",value:function(){var e=this;return new Promise((function(t,n){return e.data.cache&&e.data.store?t(null):new Promise((function(t,n){return"function"==typeof e.data.src?e.data.src().then(t,n):t(e.data.src)})).then((function(i){try{return e.data.store=i,u(e.inputField,e.data.store,"fetch"),t()}catch(e){return n(e)}}),n)}))}},{key:"compose",value:function(){var e=this;return new Promise((function(t,n){var i,r,o,a,u=function(){return t()};return a=e.inputField,o=i=(a instanceof HTMLInputElement||a instanceof HTMLTextAreaElement?a.value:a.innerHTML).toLowerCase(),r=(a=e).query&&a.query.manipulate?a.query.manipulate(o):a.diacritics?o.normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):o,a=r,((o=e).trigger.condition?o.trigger.condition(a):a.length>=o.threshold&&a.replace(/ /g,"").length)?e.dataStore().then((function(t){try{return s(e),e.start(i,r),u.call(e)}catch(e){return n(e)}}),n):(s(e),u.call(e))}))}},{key:"init",value:function(){var e,t,n,i,r=this;(e=this).inputField.setAttribute("type","text"),e.inputField.setAttribute("role","combobox"),e.inputField.setAttribute("aria-haspopup",!0),e.inputField.setAttribute("aria-expanded",!1),e.inputField.setAttribute("aria-controls",e.resultsList.idName),e.inputField.setAttribute("aria-autocomplete","both"),this.placeHolder&&this.inputField.setAttribute("placeholder",this.placeHolder),this.hook=(t=function(){r.compose()},n=this.debounce,function(){var e=this,r=arguments;clearTimeout(i),i=setTimeout((function(){return t.apply(e,r)}),n)}),this.trigger.event.forEach((function(e){r.inputField.removeEventListener(e,r.hook),r.inputField.addEventListener(e,r.hook)})),u(this.inputField,null,"init")}},{key:"preInit",value:function(){var e=this;new MutationObserver((function(t,n){var i,r=o(t);try{for(r.s();!(i=r.n()).done;)i.value,e.inputField&&(n.disconnect(),u(e.inputField,null,"connect"),e.init())}catch(e){r.e(e)}finally{r.f()}})).observe(document,{childList:!0,subtree:!0})}},{key:"unInit",value:function(){this.inputField.removeEventListener("input",this.hook),u(this.inputField,null,"unInit")}}],t(l.prototype,e),l},Et=kt();var xt,It={},Lt="object"==typeof Reflect?Reflect:null,St=Lt&&"function"==typeof Lt.apply?Lt.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};xt=Lt&&"function"==typeof Lt.ownKeys?Lt.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var At=Number.isNaN||function(e){return e!=e};function Ot(){Ot.init.call(this)}(It=Ot).once=function(e,t){return new Promise((function(n,i){var r=function(n){e.removeListener(t,o),i(n)},o=function(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))};Rt(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&Rt(e,"error",t,n)}(e,r,{once:!0})}))},Ot.EventEmitter=Ot,Ot.prototype._events=void 0,Ot.prototype._eventsCount=0,Ot.prototype._maxListeners=void 0;var Tt=10;function Ct(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+(void 0===e?"undefined":c(e)))}function jt(e){return void 0===e._maxListeners?Ot.defaultMaxListeners:e._maxListeners}function $t(e,t,n,i){var r,o,s,a;if(Ct(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(r=jt(e))>0&&s.length>r&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return e}function Dt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Mt(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=Dt.bind(i);return r.listener=n,i.wrapFn=r,r}function Pt(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):Nt(r,r.length)}function qt(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function Nt(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function Rt(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+(void 0===e?"undefined":c(e)));e.addEventListener(t,(function r(o){i.once&&e.removeEventListener(t,r),n(o)}))}}Object.defineProperty(Ot,"defaultMaxListeners",{enumerable:!0,get:function(){return Tt},set:function(e){if("number"!=typeof e||e<0||At(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Tt=e}}),Ot.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ot.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||At(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},Ot.prototype.getMaxListeners=function(){return jt(this)},Ot.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=r[e];if(void 0===a)return!1;if("function"==typeof a)St(a,this,t);else{var u=a.length,c=Nt(a,u);for(n=0;n<u;++n)St(c[n],this,t)}return!0},Ot.prototype.addListener=function(e,t){return $t(this,e,t,!1)},Ot.prototype.on=Ot.prototype.addListener,Ot.prototype.prependListener=function(e,t){return $t(this,e,t,!0)},Ot.prototype.once=function(e,t){return Ct(t),this.on(e,Mt(this,e,t)),this},Ot.prototype.prependOnceListener=function(e,t){return Ct(t),this.prependListener(e,Mt(this,e,t)),this},Ot.prototype.removeListener=function(e,t){var n,i,r,o,s;if(Ct(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},Ot.prototype.off=Ot.prototype.removeListener,Ot.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},Ot.prototype.listeners=function(e){return Pt(this,e,!0)},Ot.prototype.rawListeners=function(e){return Pt(this,e,!1)},Ot.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):qt.call(e,t)},Ot.prototype.listenerCount=qt,Ot.prototype.eventNames=function(){return this._eventsCount>0?xt(this._events):[]};var Bt={},Ht=/[\\^$.*+?()[\]{}|]/g,Ft=RegExp(Ht.source),Vt=document.createElement("div"),Ut={containerTokenfield:'<div class="tokenfield tokenfield-mode-tokens">\n      <input class="tokenfield-copy-helper"\n        style="display:none;position:fixed;top:-1000px;right:1000px;"\n        tabindex="-1"\n        type="text"\n      />\n      <div class="tokenfield-set">\n        <ul></ul>\n      </div>\n      <input class="tokenfield-input" />\n      <div class="tokenfield-suggest">\n        <ul class="tokenfield-suggest-list"></ul>\n      </div>\n    </div>',containerList:'<div class="tokenfield tokenfield-mode-list">\n      <input class="tokenfield-input" />\n      <div class="tokenfield-suggest">\n        <ul class="tokenfield-suggest-list"></ul>\n      </div>\n      <div class="tokenfield-set">\n        <ul></ul>\n      </div>\n    </div>',suggestItem:'<li class="tokenfield-suggest-item"></li>',setItem:'<li class="tokenfield-set-item">\n      <span class="item-label"></span>\n      <a href="#" class="item-remove" tabindex="-1"></a>\n      <input class="item-input" type="hidden" />\n    </li>'};function Wt(){return(65536*(1+Math.random())|0).toString(16)+(65536*(1+Math.random())|0).toString(16)}function zt(e,t){return e.indexOf(t)>=0}function Kt(e){return e.nodeName?e:"string"==typeof e?document.querySelector(e):null}function Xt(e,t){return e.nodeName?e:(e=e.replace(/(\t|\n$)/g,""),Vt.innerHTML="",Vt.innerHTML=e,!0===t?Vt.childNodes:Vt.childNodes[0])}function Gt(e){return e.key||e.keyIdentifier?e.key||String.fromCharCode(parseInt(e.keyIdentifier.substr(2),16)):null}var Jt=function(e){"use strict";p(n,e);var t=d(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,n),e=t.call(this);var s={_defaults:{focusedItem:null,cache:{},timer:null,xhr:null,suggested:!1,suggestedItems:[],setItems:[],events:{},delimiters:{}},_options:{el:null,form:!0,mode:"tokenfield",addItemOnBlur:!1,addItemsOnPaste:!1,keepItemsOrder:!0,setItems:[],items:[],newItems:!0,multiple:!0,maxItems:0,minLength:0,keys:{17:"ctrl",16:"shift",91:"meta",8:"delete",27:"esc",37:"left",38:"up",39:"right",40:"down",46:"delete",65:"select",67:"copy",88:"cut",9:"delimiter",13:"delimiter",108:"delimiter"},matchRegex:"{value}",matchFlags:"i",matchStart:!1,matchEnd:!1,delimiters:[],copyProperty:"name",copyDelimiter:", ",remote:{type:"GET",url:null,queryParam:"q",delay:300,timestampParam:"t",params:{},headers:{}},placeholder:null,inputType:"text",minChars:2,maxSuggest:10,maxSuggestWindow:10,filterSetItems:!0,filterMatchCase:!1,singleInput:!1,singleInputValue:"id",singleInputDelimiter:", ",itemLabel:"name",itemName:"items",newItemName:"items_new",itemValue:"id",newItemValue:"name",itemData:"name",validateNewItem:null}},a=s._defaults,u=s._options;e.id=Wt(),e.key="key_".concat(e.id),e._vars=Object.assign({},a),e._options=Object.assign({},u,o),e._options.keys=Object.assign({},u.keys,o.keys),e._options.remote=Object.assign({},u.remote,o.remote),e._templates=Object.assign({},Ut,o.templates),e._vars.setItems=e._prepareData(e.remapData(e._options.setItems||[])),e._focused=!1,e._input=null,e._form=!1,e._html={};var c=e._options;c.delimiters.forEach((function(t){e._vars.delimiters[t]=!0}));var l=Kt(c.el);if(!l)throw new Error("Selector: DOM Element ".concat(c.el," not found."));if(e.el=l,c.singleInput){var d=Kt(c.singleInput);e._input=d||e.el}if(e.el.tokenfield=i(e),null===c.placeholder&&(c.placeholder=c.el.placeholder||""),!c.form)throw new Error("Cannot create tokenfield without DOM Element.");var h=!1;if(c.form.nodeName)h=c.form;else if(!0===c.form)for(var f=e.el;f.parentNode;){if("FORM"===f.nodeName){h=f;break}f=f.parentNode}else if("string"==typeof h&&!(h=document.querySelector(h)))throw new Error("Selector: DOM Element ".concat(c.form," not found."));return e._form=h,Bt[e.id]=i(e),e._render(),e}return s(n,[{key:"_render",value:function(){var e=this._options,t=this._html;return"tokenfield"===e.mode?t.container=Xt(this._templates.containerTokenfield):t.container=Xt(this._templates.containerList),t.suggest=t.container.querySelector(".tokenfield-suggest"),t.suggestList=t.container.querySelector(".tokenfield-suggest-list"),t.items=t.container.querySelector(".tokenfield-set > ul"),t.input=t.container.querySelector(".tokenfield-input"),t.input.setAttribute("type",e.inputType),"tokenfield"===e.mode?t.input.placeholder=this._vars.setItems.length?"":e.placeholder:t.input.placeholder=e.placeholder,t.copyHelper=t.container.querySelector(".tokenfield-copy-helper"),e.el.style.display="none",t.suggest.style.display="none",this._renderSizer(),t.container.tokenfield=this,e.el.parentElement.insertBefore(t.container,e.el),t.container.insertBefore(e.el,t.container.firstChild),this._setEvents(),this._renderItems(),"tokenfield"===e.mode&&this._minimizeInput()._resizeInput(),this}},{key:"_renderSizer",value:function(){var e=this._html,t=this._getBounds(),n=window.getComputedStyle(e.container),i=parseInt(n.paddingLeft,10)+parseInt(n.paddingRight,10),r={width:"auto",height:"auto",overflow:"hidden",whiteSpace:"pre",maxWidth:t.width-i+"px",position:"fixed",top:"-10000px",left:"10000px",fontSize:n.fontSize,paddingLeft:n.paddingLeft,paddingRight:n.paddingRight};for(var o in e.sizer=document.createElement("div"),e.sizer.id="tokenfield-sizer-"+this.id,r)e.sizer.style[o]=r[o];e.container.appendChild(e.sizer)}},{key:"_minimizeInput",value:function(){return this._html.input.style.width="20px",this}},{key:"_refreshInput",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this._vars,n=this._html;if(e&&(n.input.value=""),"tokenfield"===this._options.mode){this._resizeInput();var i=t.setItems.length?"":this._options.placeholder;n.input.setAttribute("placeholder",i)}else"list"===this._options.mode&&n.input.setAttribute("placeholder",this._options.placeholder);return this}},{key:"_resizeInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this._html,n=this._getBounds(),i=window.getComputedStyle(t.container),r=parseInt(i.paddingRight,10)+parseInt(i.borderRightWidth,10),o=r+parseInt(i.paddingLeft,10)+parseInt(i.borderLeftWidth,10);if(t.sizer.innerHTML=e,t.sizer.style.maxWidth=n.width-r+"px",0!==n.width){t.input.style.width="20px";var s=t.sizer.getBoundingClientRect(),a=t.input.getBoundingClientRect(),u=n.width-(a.left-n.left)-r;s.width>u?t.input.style.width=n.width-o-1+"px":t.input.style.width=u-1+"px"}else t.input.style.width="100%"}},{key:"_fetchData",value:function(e){var t=this,n=this._vars,i=this._options,r=i.remote,o=Object.assign({},i.params);for(var s in r.params)o[s]=r.params[s];r.limit&&(o[r.limit]=i.remote.limit),o[r.queryParam]=e,o[r.timestampParam]=Math.round((new Date).getTime()/1e3),n.xhr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=new XMLHttpRequest,r=t.url,o=[];for(var s in e)o.push("".concat(s,"=").concat(encodeURIComponent(e[s])));var a=o.join("&");for(var u in"get"===t.type.toLowerCase()&&(r+="?"+a),i.open(t.type,r,!0),t.headers){var c=t.headers[u];"function"==typeof c&&(c=c(e,t)),i.setRequestHeader(u,c)}return n&&(i.onreadystatechange=n),i.send(e),i}(o,i.remote,(function(){if(n.xhr&&4==n.xhr.readyState){if(200==n.xhr.status){var r=JSON.parse(n.xhr.responseText);n.cache[e]=r;var o=t._prepareData(t.remapData(r)),s=t._filterData(e,o);n.suggestedItems=i.filterSetItems?t._filterSetItems(s):s,t.showSuggestions()}else if(n.xhr.status>0)throw new Error("Error while loading remote data.");t._abortXhr()}}))}},{key:"remapData",value:function(e){return e}},{key:"_prepareData",value:function(e){var t=this;return e.map((function(e){return Object.assign({},e,h({},t.key,Wt()))}))}},{key:"_filterData",value:function(e,t){var n,i=this._options,r=i.matchRegex.replace("{value}",(n=function(e){if("string"==typeof e)return e;if(null===e)return"";var t=e+"";return"0"===t&&1/e==-1/0?"-0":t}(n=e))&&Ft.test(n)?n.replace(Ht,"\\$&"):n);i.matchStart?r="^"+r:i.matchEnd&&(r+="$");var o=new RegExp(r,i.matchFlags);return t.filter((function(e){return o.test(e[i.itemData])}))}},{key:"_abortXhr",value:function(){var e=this._vars;null!==e.xhr&&(e.xhr.abort(),e.xhr=null)}},{key:"_filterSetItems",value:function(e){var t=this._options.itemValue,n=this._vars;if(!n.setItems.length)return e;var i=n.setItems.map((function(e){return e[t]}));return e.filter((function(e){return-1===i.indexOf(e[t])}))}},{key:"_setEvents",value:function(){var e=this._vars,t=this._html;e.events.onClick=this._onClick.bind(this),e.events.onMouseDown=this._onMouseDown.bind(this),e.events.onMouseOver=this._onMouseOver.bind(this),e.events.onFocus=this._onFocus.bind(this),e.events.onResize=this._onResize.bind(this),e.events.onReset=this._onReset.bind(this),e.events.onKeyDown=this._onKeyDown.bind(this),e.events.onFocusOut=this._onFocusOut.bind(this),t.container.addEventListener("click",e.events.onClick),1===Object.keys(Bt).length&&(document.addEventListener("mousedown",e.events.onMouseDown),window.addEventListener("resize",e.events.onResize)),this._form&&this._form.nodeName&&this._form.addEventListener("reset",e.events.onReset),t.suggestList.addEventListener("mouseover",e.events.onMouseOver),t.input.addEventListener("focus",e.events.onFocus)}},{key:"_onMouseOver",value:function(e){var t=e.target;t.classList.contains("tokenfield-suggest-item")&&([].slice.call(this._html.suggestList.querySelectorAll(".selected")).forEach((function(e){e!==t&&e.classList.remove("selected")})),t.classList.add("selected"),this._selectItem(t.key,!1),this._refreshItemsSelection())}},{key:"_onReset",value:function(){this.setItems(this._options.setItems)}},{key:"_onFocus",value:function(){var e=this._vars,t=this._html,n=this._options;t.input.removeEventListener("keydown",e.events.onKeyDown),t.input.addEventListener("keydown",e.events.onKeyDown),t.input.addEventListener("focusout",e.events.onFocusOut),n.addItemsOnPaste&&(e.events.onPaste=this._onPaste.bind(this),t.input.addEventListener("paste",e.events.onPaste)),this._focused=!0,this._html.container.classList.add("focused"),this._resizeInput(),t.input.value.trim().length>=n.minChars&&this.showSuggestions()}},{key:"_onFocusOut",value:function(e){var t=this._vars,n=this._options,i=this._html;if(i.input.removeEventListener("keydown",t.events.onKeyDown),i.input.removeEventListener("focusout",t.events.onFocusOut),void 0!==t.events.onPaste&&i.input.removeEventListener("paste",t.events.onPaste),!e.relatedTarget||e.relatedTarget!==i.copyHelper){var r=n.multiple&&!n.maxItems||!n.multiple&&!t.setItems.length||n.multiple&&n.maxItems&&t.setItems.length<n.maxItems;this._focused&&n.addItemOnBlur&&r&&this._newItem(i.input.value)?this._renderItems()._refreshInput():this._defocusItems()._renderItems(),this._focused=!1,this._html.container.classList.remove("focused")}}},{key:"_onMouseDown",value:function(e){var t=null;for(var n in Bt)if(Bt[n]._html.container.contains(e.target)){t=Bt[n];break}if(t){for(var i in Bt)i!==t.id&&(Bt[i].hideSuggestions(),Bt[i].blur());e.target!==t._html.input&&e.preventDefault()}else for(var r in Bt)Bt[r].hideSuggestions(),Bt[r].blur()}},{key:"_onResize",value:function(){for(var e in Bt)Bt[e]._resizeInput(Bt[e]._html.input.value)}},{key:"_onPaste",value:function(e){var t=this,n=this._vars,i=this._options,r=e.clipboardData.getData("text"),o=[r];if(i.delimiters.length){var s=i.delimiters.join("|"),a=new RegExp("(".concat(s,")"),"ig");o=r.split(a)}if(o.map((function(e){return e.trim()})).filter((function(e){return e.length>0&&e.length>=i.minLength&&void 0===n.delimiters[e]})).map((function(e){return t._newItem(e)})).length){var u=this;setTimeout((function(){u._renderItems()._refreshInput()._deselectItems().hideSuggestions()}),1),e.preventDefault()}}},{key:"_onKeyDown",value:function(e){var t=this,n=this._vars,i=this._options,r=this._html;i.maxItems&&n.setItems.length>=i.maxItems&&e.preventDefault(),"tokenfield"===i.mode&&setTimeout((function(){t._resizeInput(r.input.value)}),1);var o=Gt(e);if(void 0!==i.keys[e.keyCode]||zt(i.delimiters,o)){if(this._keyAction(e))return!0}else this._defocusItems()._refreshItems();clearTimeout(n.timer),this._abortXhr(),(!i.maxItems||n.setItems.length<i.maxItems)&&setTimeout((function(){t._keyInput(e)}),1)}},{key:"_keyAction",value:function(e){this.key;var t=null,n=this._vars,i=this._options,r=this._html,o=i.keys[e.keyCode],s=r.input.value.trim(),a=Gt(e);zt(i.delimiters,a)&&void 0===o&&(o="delimiter");var u=this._getSelectedItems();switch(u.length&&(t=u[0]),o){case"esc":this._deselectItems()._defocusItems()._renderItems().hideSuggestions();break;case"up":this._vars.suggested&&(this._selectPrevItem()._refreshItemsSelection(),e.preventDefault()),this._defocusItems()._renderItems();break;case"down":this._vars.suggested&&(this._selectNextItem()._refreshItemsSelection(),e.preventDefault()),this._defocusItems()._renderItems();break;case"left":(this.getFocusedItems().length||!r.input.selectionStart&&!r.input.selectionEnd)&&(this._focusPrevItem(e.shiftKey),e.preventDefault());break;case"right":(this.getFocusedItems().length||r.input.selectionStart===s.length)&&(this._focusNextItem(e.shiftKey),e.preventDefault());break;case"delimiter":if(this._abortXhr(),this._defocusItems(),!i.multiple&&n.setItems.length>=1)return!1;s=this.onInput(s,e),t?this._addItem(t):s.length&&(t=this._newItem(s)),t&&this._minimizeInput()._renderItems().focus()._refreshInput()._refreshSuggestions()._deselectItems(),e.preventDefault();break;case"select":if(s.length||!e.ctrlKey&&!e.metaKey)return!1;this._vars.setItems.forEach((function(e){e.focused=!0})),this._refreshItems();break;case"cut":if(!this.getFocusedItems().length||!e.ctrlKey&&!e.metaKey)return!1;this._copy()._delete(e);break;case"copy":if(!this.getFocusedItems().length||!e.ctrlKey&&!e.metaKey)return!1;this._copy();break;case"delete":var c=this;this._abortXhr();var l=this.getFocusedItems();!r.input.selectionEnd&&8===e.keyCode||r.input.selectionStart===s.length&&46===e.keyCode||l.length?this._delete(e):n.timer=setTimeout((function(){c._keyInput(e)}),i.delay)}return!0}},{key:"_copy",value:function(){var e=this._options,t=this._html,n=this.getFocusedItems().map((function(t){return t[e.copyProperty]})).join(e.copyDelimiter);return t.copyHelper.style.display="block",t.copyHelper.value=n,t.copyHelper.focus(),t.copyHelper.select(),document.execCommand("copy"),t.copyHelper.style.display="none",t.copyHelper.value="",t.input.focus(),this}},{key:"_delete",value:function(e){var t=this._vars,n=this._options,i=this.key,r=this._html,o=this.getFocusedItems();if("tokenfield"===n.mode&&t.setItems.length)if(o.length){var s=this;o.forEach((function(e){s._removeItem(e[i])})),this._refreshSuggestions()._keyInput(e)}else r.input.selectionStart||this._focusItem(t.setItems[t.setItems.length-1][i]);else if(o.length){var a=this;o.forEach((function(e){a._removeItem(e[i])})),this._refreshSuggestions()._keyInput(e)}return this._minimizeInput()._renderItems()._refreshInput(!1),this}},{key:"_keyInput",value:function(e){var t=this._vars,n=this._options,i=this._html;this._defocusItems()._refreshItems();var r=this.onInput(i.input.value.trim(),e);if("keydown"===e.type&&this.emit("input",this,r,e),r.length<n.minChars)return this.hideSuggestions(),!1;if(!n.multiple&&t.setItems.length>=1)return!1;if(void 0===t.cache[r]){var o=this;if(n.remote.url)t.timer=setTimeout((function(){o._fetchData(r)}),n.delay);else if(!n.remote.url&&n.items.length){var s=this._prepareData(n.items),a=this._filterData(r,s);t.suggestedItems=n.filterSetItems?this._filterSetItems(a):a,this.showSuggestions()}}else{var u=this._prepareData(this.remapData(t.cache[r])),c=this._filterData(r,u);t.suggestedItems=n.filterSetItems?this._filterSetItems(c):c,this.showSuggestions()}return this}},{key:"_onClick",value:function(e){var t=e.target;if(t.classList.contains("item-remove"))e.preventDefault(),this._removeItem(t.key)._defocusItems()._minimizeInput()._renderItems()._refreshInput(!1)._keyInput(e);else if(t.classList.contains("tokenfield-suggest-item")){var n=this._getSuggestedItem(t.key);this._addItem(n)._minimizeInput()._renderItems()._refreshInput()._refreshSuggestions()}else{var i=function(e){for(var t=[e];e.parentNode;)e=e.parentNode,t.push(e);return t}(t).filter((function(e){return e.classList&&e.classList.contains("tokenfield-set-item")}))[0];i?(this._focusItem(i.key,e.shiftKey,e.ctrlKey||e.metaKey,!0),this._refreshItems()):this._keyInput(e)}this.focus()}},{key:"_selectPrevItem",value:function(){var e=this.key,t=this._options,n=this._vars.suggestedItems,i=this._getSelectedItemIndex();return n.length?(null!==i?0===i?t.newItems?this._deselectItems():this._selectItem(n[n.length-1][e]):this._selectItem(n[i-1][e]):this._selectItem(n[n.length-1][e]),this):this}},{key:"_selectNextItem",value:function(){var e=this.key,t=this._options,n=this._vars.suggestedItems,i=this._getSelectedItemIndex();return n.length?(null!==i?i===n.length-1?t.newItems?this._deselectItems():this._selectItem(n[0][e]):this._selectItem(n[i+1][e]):this._selectItem(n[0][e]),this):this}},{key:"_focusPrevItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.key,n=this._vars.setItems,i=this._getFocusedItemIndex();if(!n.length)return this;if(null!==i)if(0!==i||e)if(0===i&&e){var r=this._getFocusedItemIndex(!0);this._defocusItem(n[r][t])}else this._focusItem(n[i-1][t],e,!1,!0);else this._defocusItems();else this._focusItem(n[n.length-1][t],!1,!1,!0);return this._refreshItems(),this}},{key:"_focusNextItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.key,n=this._vars.setItems,i=this._getFocusedItemIndex(!0);return n.length?(null!==i?i!==n.length-1||e?i===n.length-1&&e?this._focusItem(n[0][t],e):this._focusItem(n[i+1][t],e):this._defocusItems():this._focusItem(n[0][t],!1),this._refreshItems(),this):this}},{key:"_getSelectedItems",value:function(){var e=this.key,t=this._vars.setItems.map((function(t){return t[e]}));return this._vars.suggestedItems.filter((function(n){return n.selected&&t.indexOf(n[e])<0}))}},{key:"_selectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;this._vars.suggestedItems.forEach((function(i){if(i.selected=i[n.key]===e,i.selected&&t){var r=parseInt(n._html.suggest.style.maxHeight,10);if(r){var o=n._html.suggestList.getBoundingClientRect(),s=i.el.getBoundingClientRect(),a=s.top-o.top,u=a+s.height;u>=r+n._html.suggest.scrollTop?n._html.suggest.scrollTop=u-r:a<n._html.suggest.scrollTop&&(n._html.suggest.scrollTop=a)}}}))}},{key:"_deselectItem",value:function(e){var t=this;return this._vars.suggestedItems.every((function(n){return n[t.key]!==e||(n.selected=!1,!1)})),this}},{key:"_deselectItems",value:function(){return this._vars.suggestedItems.forEach((function(e){e.selected=!1})),this}},{key:"_refreshItemsSelection",value:function(){this._vars.suggestedItems.forEach((function(e){e.selected&&e.el?e.el.classList.add("selected"):e.el&&e.el.classList.remove("selected")}))}},{key:"_getSelectedItemIndex",value:function(){var e=null;return this._vars.suggestedItems.every((function(t,n){return!t.selected||(e=n,!1)})),e}},{key:"_getFocusedItemIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null;return this._vars.setItems.every((function(n,i){return!(n.focused&&(t=i,!e))})),t}},{key:"_getItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t&&(t=this.key);var n=this._filterItems(this._vars.setItems,e,t);return n.length?n[0]:null}},{key:"_getSuggestedItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t&&(t=this.key);var n=this._filterItems(this._vars.suggestedItems,e,t);return n.length?n[0]:null}},{key:"_getAvailableItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t&&(t=this.key);var n=this._filterItems(this._options.items,e,t);return n.length?n[0]:null}},{key:"_filterItems",value:function(e,t,n){var i=this._options.filterMatchCase;return e.filter((function(e){return"string"==typeof e[n]&&"string"==typeof t?i?e[n]===t:e[n].toLowerCase()==t.toLowerCase():e[n]==t}))}},{key:"_removeItem",value:function(e){var t=this;return this._vars.setItems.every((function(n,i){return n[t.key]!==e||(t.emit("removeToken",t,n),t._vars.setItems.splice(i,1),t.emit("removedToken",t,n),t.emit("change",t),!1)})),this}},{key:"_addItem",value:function(e){e.focused=!1;var t=this._options;if((e.isNew&&!this._getItem(e[t.itemData],t.itemData)||!this._getItem(e[t.itemValue],t.itemValue))&&(this.emit("addToken",this,e),!this._options.maxItems||this._options.maxItems&&this._vars.setItems.length<this._options.maxItems)){e.selected=!1;var n=Object.assign({},e);this._vars.setItems.push(n),this.emit("addedToken",this,n),this.emit("change",this)}return this}},{key:"getFocusedItem",value:function(){var e=this._vars.setItems.filter((function(e){return e.focused}))[0];return e.length?e[0]:null}},{key:"getFocusedItems",value:function(){return this._vars.setItems.filter((function(e){return e.focused}))}},{key:"_focusItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this;if(t){var o=this,s=null,a=null,u=null,c=this._vars.setItems.length;if(this._vars.setItems.forEach((function(t,n){t[o.key]===e&&(u=n),null===s&&t.focused&&(s=n),t.focused&&(a=n)})),(0===u||u===c-1)&&null===s&&null===a)return;null===s&&null===a?this._vars.setItems[u].focused=!0:0!==u||a!==c-1||i?(s=Math.min(u,s),a=Math.max(u,a),this._vars.setItems.forEach((function(e,t){e.focused=u===t||t>=s&&t<=a}))):this._vars.setItems[s].focused=!1}else this._vars.setItems.forEach((function(t){t.focused=n?t[r.key]===e?!t.focused:t.focused:t[r.key]===e}));return this}},{key:"_defocusItem",value:function(e){var t=this;return this._vars.setItems.filter((function(n){n[t.key]===e&&(n.focused=!1)}))}},{key:"_defocusItems",value:function(){return this._vars.setItems.forEach((function(e){e.focused=!1})),this}},{key:"_newItem",value:function(e){var t=this._options;if("string"==typeof e&&(!e.length||e.length<t.minLength))return null;var n=this._getItem(e,t.itemData)||this._getSuggestedItem(e,t.itemData)||this._getAvailableItem(e,t.itemData);if(!n&&t.newItems){if("function"==typeof t.validateNewItem&&!t.validateNewItem(e))return null;var i;h(i={isNew:!0},this.key,Wt()),h(i,t.itemData,e),n=i,this.emit("newToken",this,n)}return n?(this._addItem(n),n):null}},{key:"_buildEl",value:function(e){return Xt(e)}},{key:"_getBounds",value:function(){return this._html.container.getBoundingClientRect()}},{key:"_renderItems",value:function(){var e=this,t=this._vars,n=this._options,i=this._html;return i.items.innerHTML="",t.setItems.forEach((function(t,n){var r=e._renderItem(t,n);i.items.appendChild(r),t.el=r,t.focused?t.el.classList.add("focused"):t.el.classList.remove("focused")})),t.setItems.length>1&&"tokenfield"===n.mode?i.input.setAttribute("placeholder",""):"list"===n.mode&&i.input.setAttribute("placeholder",n.placeholder),this._input&&(this._input.value=t.setItems.map((function(e){return e[n.singleInputValue]})).join(n.singleInputDelimiter)),this}},{key:"_refreshItems",value:function(){this._vars.setItems.forEach((function(e){e.el&&(e.focused?e.el.classList.add("focused"):e.el.classList.remove("focused"))}))}},{key:"_renderItem",value:function(e,t){var n=this._options,i=this.renderSetItemHtml(e),r=i.querySelector(".item-label"),o=i.querySelector(".item-input"),s=i.querySelector(".item-remove"),a=n.keepItemsOrder?"[".concat(t,"]"):"[]";return i.key=e[this.key],s.key=e[this.key],o.setAttribute("name",(e.isNew?n.newItemName:n.itemName)+a),o.value=e[e.isNew?n.newItemValue:n.itemValue]||null,r.textContent=this.renderSetItemLabel(e),e.focused&&i.classList.add("focused"),i}},{key:"onInput",value:function(e,t){return e}},{key:"renderSetItemHtml",value:function(){return this._buildEl(this._templates.setItem)}},{key:"renderSetItemLabel",value:function(e){return e[this._options.itemLabel]}},{key:"renderSuggestions",value:function(e){var t=this,n=this._vars,i=this._options,r=this._html,o=this._getSelectedItemIndex();if(!e.length)return this;if(0===i.maxSuggestWindow&&(r.suggest.style.maxHeight=null),!n.suggestedItems.length)return this;i.newItems||null!==o||(e[0].selected=!0);var s=0;e.every((function(e,n){if(n>=i.maxSuggest)return!1;var o=r.suggestList.childNodes[n],a=e.el=t.renderSuggestedItem(e);return o?o.itemValue===e[i.itemValue]?(o.key=e[t.key],e.el=o):r.suggestList.replaceChild(a,o):o||r.suggestList.appendChild(a),i.maxSuggestWindow>0&&n<i.maxSuggestWindow&&(s+=r.suggestList.childNodes[n].getBoundingClientRect().height),i.maxSuggestWindow>0&&n===i.maxSuggestWindow&&(r.suggest.style.maxHeight=s+"px"),!0}));var a=r.suggestList.childElementCount-e.length;if(a>0)for(var u=a-1;u>=0;u--)r.suggestList.removeChild(r.suggestList.childNodes[e.length+u]);return this}},{key:"renderSuggestedItem",value:function(e){var t=this._options,n=this._buildEl(this._templates.suggestItem);(n.key=e[this.key],n.itemValue=e[t.itemValue],n.innerHTML=this.renderSuggestedItemContent(e),n.setAttribute("title",e[t.itemData]),e.selected&&n.classList.add("selected"),t.filterSetItems)||(this._getItem(e[t.itemValue],t.itemValue)||this._getItem(e[t.itemData],t.itemData))&&n.classList.add("set");return n}},{key:"renderSuggestedItemContent",value:function(e){return e[this._options.itemData]}},{key:"_refreshSuggestions",value:function(){var e=this._vars,t=this._options;if(this._html.input.value.length<t.minChars)return this.hideSuggestions(),this;var n=this._prepareData(t.items),i=this._filterData(this._html.input.value,n);return e.suggestedItems=t.filterSetItems?this._filterSetItems(i):i,e.suggestedItems.length&&(!t.maxItems||t.maxItems&&e.setItems.length<t.maxItems)?(this.renderSuggestions(e.suggestedItems),this):(this.hideSuggestions(),this)}},{key:"showSuggestions",value:function(){var e=this._vars,t=this._options;return e.suggestedItems.length?(this.emit("showSuggestions",this),(!t.maxItems||t.maxItems&&e.setItems.length<t.maxItems)&&(this._html.suggest.style.display="block",e.suggested=!0,this.renderSuggestions(e.suggestedItems)),this.emit("shownSuggestions",this)):this.hideSuggestions(),this}},{key:"hideSuggestions",value:function(){return this.emit("hideSuggestions",this),this._vars.suggested=!1,this._html.suggest.style.display="none",this._html.suggestList.innerHTML="",this.emit("hiddenSuggestions",this),this}},{key:"setSuggestedItems",value:function(e){if(!Array.isArray(e))throw new Error("Argument must be an array of objects.");this._options.items=e,this._refreshSuggestions()}},{key:"getItems",value:function(){var e=this;return this._vars.setItems.map((function(t){var n=Object.assign({},t);return delete n[e.key],delete n.focused,delete n.selected,delete n.el,n}))}},{key:"setItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this._vars.setItems=[],this.addItems(e),this}},{key:"addItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this,n=this._options.itemValue;return Array.isArray(e)||(e=[e]),this._prepareData(e).forEach((function(e){(e.isNew||void 0!==e[n])&&t._addItem(e)})),this._minimizeInput()._renderItems()._refreshInput().hideSuggestions(),this}},{key:"sortItems",value:function(){var e=this,t=[];y(this._html.items.childNodes).forEach((function(n){var i=e._getItem(n.key);i&&t.push(i)})),this.setItems(t)}},{key:"removeItem",value:function(e){var t=this._options;"object"==typeof e&&(e[t.itemValue]||e[t.newItemValue])&&(e=e[t.itemValue]||e[t.newItemValue]);var n=this._getItem(e,t.itemValue)||this._getItem(e,t.newItemValue);return n?(this._removeItem(n[this.key])._renderItems(),this):this}},{key:"emptyItems",value:function(){return this._vars.setItems=[],this._renderItems()._refreshInput().hideSuggestions(),this.emit("change",this),this}},{key:"getSuggestedItems",value:function(){return this._vars.suggestedItems.map((function(e){return Object.assign({},e)}))}},{key:"focus",value:function(){return this._html.container.classList.add("focused"),this._focused||this._html.input.focus(),this}},{key:"blur",value:function(){return this._html.container.classList.remove("focused"),this._focused&&this._html.input.blur(),this}},{key:"remove",value:function(){var e=this._html;e.container.parentElement.insertBefore(this.el,e.container),e.container.remove(),this.el.style.display="block",1===Object.keys(Bt).length&&(document.removeEventListener("mousedown",this._vars.events.onMouseDown),window.removeEventListener("resize",this._vars.events.onResize)),this._form&&this._form.nodeName&&this._form.removeEventListener("reset",this._vars.events.onReset),delete Bt[this.id],delete this.el.tokenfield}}]),n}(t(It)),Yt=function(e){"use strict";p(n,e);var t=d(n);function n(){var e;return r(this,n),h(i(e=t.apply(this,arguments)),"_renderItem",(function(e,t){var n=this._options,i=this.renderSetItemHtml(e),r=i.querySelector(".item-label"),o=i.querySelector(".item-input"),s=i.querySelector(".item-remove");return i.key=e[this.key],s.key=e[this.key],o.setAttribute("name",e.isNew?n.newItemName:n.itemName),o.value=e[e.isNew?n.newItemValue:n.itemValue]||null,r.textContent=this.renderSetItemLabel(e),e.focused&&i.classList.add("focused"),i})),e}return n}(Jt),Zt=window.TokenField=Yt;var Qt=function(e){return e.forEach((function(e,t){t>2&&e.classList.add("app-hidden--force")}))},en=function(){document.querySelectorAll(".destinations__list").forEach((function(e){var t=e.querySelectorAll("li");if(!(t.length<=3)){Qt(t);var n=!0,i=e.parentElement,r=document.createElement("button");r.className="lite-button--link",r.innerText="View all (".concat(t.length,")"),i.appendChild(r),r.addEventListener("click",(function(e){e.preventDefault(),n?(t.forEach((function(e){return e.classList.remove("app-hidden--force")})),n=!1,r.innerText="View less"):(Qt(t),n=!0,r.innerText="View all (".concat(t.length,")"))}))}}))},tn={},nn=[],rn=function(){document.querySelector("#control_list_entries .tokenfield-set").querySelectorAll("li").forEach((function(e){e.remove()}))},on=function(){document.querySelector("#control_list_entries .tokenfield-input").style.removeProperty("display"),rn()},sn=function(){var e=document.querySelector("#control_list_entries .tokenfield-input"),t=document.querySelector("#control_list_entries .tokenfield-set ul"),n=document.createElement("li");n.classList.add("tokenfield-set-item");var i=document.createElement("span");i.classList.add("item-label"),i.innerText="None";var r=document.createElement("a");r.classList.add("item-remove"),r.tabIndex=-1,r.innerText="",r.addEventListener("click",(function(){document.querySelector("#div_id_does_not_have_control_list_entries input").checked=!1,on()})),n.append(i,r),rn(),e.style.display="none",t.appendChild(n)},an=function(e){for(var t=e.filter((function(e,t,n){return n.findIndex((function(t){return Object.values(t)[0]==Object.values(e)[0]}))==t})),n=document.querySelector(".tau__cle-suggestions");n.firstChild;)n.removeChild(n.lastChild);t.forEach((function(e){var t=Object.values(e)[0],i=document.createElement("button");i.classList.add("lite-button--link","control-list__list"),i.innerText="Select exporter suggestion ".concat(t),i.addEventListener("click",(function(e){e.preventDefault(),function(e){var t=document.querySelector("#control_list_entries .tokenfield-input");t.value=e,t.click(),document.querySelector("#control_list_entries .tokenfield-suggest-item").click()}(t)})),n.append(i)}))},un=function(e,t,n){var i=e.checked,r=e.value;if(i){if(!t[r])return;return t[r].forEach((function(e){var t=new Object;t[r]=e,n.push(t)})),void an(n)}for(var o=0;o<n.length;o++)Object.keys(n[o])[0]===r&&(n.splice(o,1),o--);an(n)},cn=function(){if(document.querySelector(".tau")){var e=document.querySelectorAll(".tau__list [id^='id_goods_']"),t=document.querySelector("#div_id_does_not_have_control_list_entries input");document.querySelectorAll(".tau__cle-suggestion-buttons .tau__cle-object").forEach((function(e){var t=JSON.parse(e.querySelector("#tau-cle-rating").textContent),n=JSON.parse(e.querySelector("#tau-cle-item-id").textContent);tn[n]?tn[n].push(t):tn[n]=[t]})),e.forEach((function(e){e.checked&&un(e,tn,nn),e.addEventListener("click",(function(){un(e,tn,nn)}))})),t&&(t.checked&&sn(),t.addEventListener("click",(function(e){e.currentTarget.checked?sn():on()})))}},ln="Select all",dn="Deselect all",hn="Show all",fn=function(e,t){var n;return t.number>1?"Assessing ".concat(t.number," products"):"Assessing ".concat(null===(n=e.find((function(e){return e.checked})))||void 0===n?void 0:n.dataset.productName)},pn=function(){if(document.querySelector(".tau")){var e=document.querySelectorAll(".tau__list [id^='id_goods_']"),t=Array.from(e),n=document.querySelector(".tau__headline"),i=document.querySelector(".tau__second-column"),r=document.querySelector("#tau-form .govuk-error-message"),o={number:0,max:e.length};!function(e,t,n,i){var r=document.querySelector(".tau__first-column #div_id_goods"),o=document.createElement("div");o.classList.add("tau__first-column--options"),r&&r.insertBefore(o,r.firstElementChild.nextElementSibling);var s=document.createElement("button");s.innerText=ln,s.classList.add("lite-button--link","tau__select-all");var a=document.createElement("button");a.innerText=hn,a.classList.add("lite-button--link"),o.append(s,a),s.addEventListener("click",(function(r){r.preventDefault();var o=r.target.innerText;o===ln&&(e.forEach((function(e){e.checked=!0,un(e,tn,nn)})),t.number=t.max,n.innerText="Assessing ".concat(t.number," products"),i.classList.remove("tau__second-column--hide"),r.target.innerText=dn),o===dn&&(e.forEach((function(e){e.checked=!1,un(e,tn,nn)})),t.number=0,i.classList.add("tau__second-column--hide"),r.target.innerText=ln)})),a.addEventListener("click",(function(e){e.preventDefault();var t=e.target.innerText,n=document.querySelector(".tau__list").querySelectorAll(".govuk-details");t===hn?(n.forEach((function(e){return e.setAttribute("open","")})),e.target.innerText="Hide all"):(n.forEach((function(e){return e.removeAttribute("open")})),e.target.innerText=hn)}))}(e,o,n,i),r&&(i.classList.remove("tau__second-column--hide"),o.number=t.filter((function(e){return e.checked})).length,n.innerText=fn(t,o));var s=document.querySelector(".tau__select-all");e.forEach((function(e){return e.addEventListener("click",(function(){e.checked?o.number+=1:o.number-=1,0===o.number?(i.classList.add("tau__second-column--hide"),s.innerText=ln):(i.classList.remove("tau__second-column--hide"),n.innerText=fn(t,o),o.number===o.max&&(s.innerText=dn))}))}))}},mn=function(){"use strict";function e(t){r(this,e),h(this,"TEXTAREA_FOCUSED_CLASS","case-note__textarea--focused"),this.$el=t,this.$isVisibleForExporterCheckbox=this.$el.querySelector("[name=is-visible-to-exporter]"),this.$cancelButton=this.$el.querySelector(".case-note__cancel-button"),this.$submitButton=this.$el.querySelector("[type=submit]"),this.$textarea=this.$el.querySelector("[name=text]")}return s(e,[{key:"init",value:function(){var e=this;this.$el.addEventListener("submit",(function(t){return e.handleSubmit(t)})),this.$cancelButton.addEventListener("click",(function(t){return e.handleCancelButtonClick(t)})),this.$textarea.addEventListener("focus",(function(t){return e.handleTextareaFocus(t)})),this.$textarea.addEventListener("input",(function(t){return e.handleTextareaInput(t)})),this.$textarea.addEventListener("propertychange",(function(t){return e.handleTextareaInput(t)})),this.$textarea.addEventListener("paste",(function(t){return e.handleTextareaInput(t)})),this.$textarea.addEventListener("blur",(function(t){return e.handleTextareaBlur(t)})),this.toggleSubmitButtonEnabled()}},{key:"isMarkedAsVisibleForExporter",value:function(){return this.$isVisibleForExporterCheckbox.checked}},{key:"handleSubmit",value:function(e){this.isMarkedAsVisibleForExporter()&&(confirm("This note will be visible to the exporter, are you sure you wish to continue?")||e.preventDefault())}},{key:"handleCancelButtonClick",value:function(e){e.preventDefault(),this.$textarea.value="",this.$textarea.dispatchEvent(new Event("blur")),this.$textarea.dispatchEvent(new Event("input")),this.$isVisibleForExporterCheckbox.checked=!1}},{key:"handleTextareaFocus",value:function(){this.$textarea.classList.add(this.TEXTAREA_FOCUSED_CLASS)}},{key:"hasText",value:function(){return Boolean(this.$textarea.value)}},{key:"shouldShrinkTextarea",value:function(){return!this.hasText()}},{key:"handleTextareaBlur",value:function(){this.shouldShrinkTextarea()&&this.$textarea.classList.remove(this.TEXTAREA_FOCUSED_CLASS)}},{key:"toggleSubmitButtonEnabled",value:function(){this.$submitButton.disabled=!this.hasText()}},{key:"handleTextareaInput",value:function(){this.toggleSubmitButtonEnabled()}}]),e}(),vn=function(){document.querySelectorAll("[data-module=case-note]").forEach((function(e){return new mn(e).init()}))};$(document).ready((function(){var e,i;n.initAll(),function(){$("#link-menu").removeAttr("href");var e=document.getElementById("lite-menu");e&&(e.style.display="block",wt("#link-menu",{content:e,allowHTML:!0,interactive:!0,animation:"scale-subtle",trigger:"click",theme:"light",placement:"bottom"}),wt("*[data-tooltip]",{content:function(e){return e.getAttribute("data-tooltip")},allowHTML:!0,animation:"scale-subtle"}),wt(".app-flag--label",{content:function(e){return e.getAttribute("data-label")}}))}(),function(){$("#filter-queues").on("input",(function(){var e=$("#filter-queues").val(),t=!1;$("#queues a").hide(),$("#queues > span").hide(),$("#queues a").each((function(){-1!=$(this).text().toUpperCase().indexOf(e.toUpperCase())&&($(this).show(),t=!0)})),t||$("#queues > span").show()})),$("#link-queue").removeAttr("href");var e=document.getElementById("queues");e&&(e.style.display="block",wt("#link-queue",{content:e,allowHTML:!0,interactive:!0,animation:"scale-subtle",trigger:"click",theme:"light",placement:"bottom-start",arrow:null,onShown:function(e){$("#filter-queues").val(""),$("#filter-queues").focus()}}))}(),e=$(".app-flags--list"),i=$("#js-chevron-svg").html(),e.each((function(){var e=$(this).find(".app-flag");if(e.each((function(e){e>2&&$(this).addClass("app-hidden--force").attr("aria-hidden",!0)})),e.length>3){var t=$("<button></button>"),n=$("<span>3 of ".concat(e.length,"</span>"));t.attr({class:"app-flags__expander",type:"button","aria-label":"Show more"}).append(i).append(n),$(this).parent().append(t)}})),$(".app-flags__expander").on("click keypress",(function(e){$(this).prev().find(".app-hidden--force").removeClass("app-hidden--force").attr("aria-hidden",!1).addClass("app-flag--animate"),$(this).attr("aria-hidden",!0).hide()})),function(){var e=function(e){e.parentElement.classList.add("tokenfield-container");for(var t=[],n=[],i=0;i<e.options.length;i++){var r=e.options.item(i),o={id:r.value,name:r.value,classes:[]};r.selected&&n.push(o),t.push(o)}var s=new Zt({el:e,items:t,newItems:!1,addItemOnBlur:!0,filterSetItems:!1,addItemsOnPaste:!0,minChars:1,itemName:e.name,setItems:n,keepItemsOrder:!1});return s._renderItems(),s._html.container.id=e.id,e.remove(),s},n="report_summary",i=document.getElementById(n);i&&new(t(Et))({trigger:{event:["input"]},data:{src:function(){var e=i.value.toLowerCase();return fetch("/team/picklists/.json?type=report_summary&name="+e).then((function(e){return e.json().then((function(e){return e.results.map((function(e){return{value:e.name,text:e.text}}))}))}))},key:["value"],cache:!1},selector:"#report_summary",threshold:1,debounce:300,resultsList:{render:!0,element:"table",container:function(e){e.setAttribute("id","autoComplete_list"),i.addEventListener("autoComplete",(function(e){document.addEventListener("click",(function e(){for(var t=document.getElementById("autoComplete_list");t.firstChild;)t.removeChild(t.firstChild);document.removeEventListener("click",e)}))}))}},resultItem:{content:function(e,t){t.innerHTML='<td><div class="govuk-heading-s govuk-!-margin-0">'+e.value.value+'</div><div class="govuk-caption-xs govuk-!-margin-0">'+e.value.text+"</div></td>"},element:"tr"},searchEngine:function(e,t){return t},onSelection:function(e){i.value=e.selection.value.text},maxResults:15});var r=document.getElementById("control_list_entries"),o=document.getElementById("control_rating");if(r||o){o&&(o.style.display="none",e(o));var s=document.createElement("div");r.parentElement.appendChild(s),e(r).on("change",(function(e){var t=e.getItems().filter((function(e){return null!==e.name.match(/[a-zA-Z]$/)})).map((function(e){return"<div>"+e.name+" may need an alternative control list entry because of its destination</div>"}));t.length>0?s.innerHTML="<div class='govuk-inset-text'>"+t.join("")+"</div>":s.innerHTML=""}))}}(),E("app-cookie-banner","js-accept-cookie"),en(),cn(),pn(),vn()}))}();
//# sourceMappingURL=main.js.map
