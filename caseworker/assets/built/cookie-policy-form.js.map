{"mappings":"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","sources":["node_modules/@swc/helpers/src/_create_class.js","node_modules/@swc/helpers/src/_iterable_to_array.js","node_modules/@swc/helpers/src/_array_like_to_array.js","node_modules/@swc/helpers/src/_unsupported_iterable_to_array.js","node_modules/@swc/helpers/src/_sliced_to_array.js","node_modules/@swc/helpers/src/_array_with_holes.js","node_modules/@swc/helpers/src/_non_iterable_rest.js","core/assets/javascripts/cookies/consts.js","core/assets/javascripts/cookies/utils.js","core/assets/javascripts/cookies/preferences.js","node_modules/@swc/helpers/src/_class_call_check.js","caseworker/assets/javascripts/cookie-policy-form.js"],"sourcesContent":["function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\n","import _arrayLikeToArray from './_array_like_to_array';\n\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))\n    return _arrayLikeToArray(o, minLen);\n}\n","import arrayWithHoles from './_array_with_holes';\nimport iterableToArrayLimit from './_iterable_to_array';\nimport nonIterableRest from './_non_iterable_rest';\nimport unsupportedIterableToArray from './_unsupported_iterable_to_array';\n\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n","const POLICY_COOKIE_NAME = \"cookies_policy\";\nconst POLICY_COOKIE_DURATION_DAYS = 365;\n\nconst PREFERENCES_COOKIE_NAME = \"cookie_preferences_set\";\nconst PREFERENCES_COOKIE_DURATION_DAYS = 365;\n\nexport {\n  POLICY_COOKIE_NAME,\n  POLICY_COOKIE_DURATION_DAYS,\n  PREFERENCES_COOKIE_NAME,\n  PREFERENCES_COOKIE_DURATION_DAYS,\n};\n","import {\n  PREFERENCES_COOKIE_NAME,\n  PREFERENCES_COOKIE_DURATION_DAYS,\n  POLICY_COOKIE_NAME,\n  POLICY_COOKIE_DURATION_DAYS,\n} from \"./consts\";\n\nconst getCookie = (name) => {\n  const nameEQ = name + \"=\";\n  const cookies = document.cookie.split(\";\");\n  for (let i = 0, len = cookies.length; i < len; i++) {\n    let cookie = cookies[i];\n    while (cookie.charAt(0) === \" \") {\n      cookie = cookie.substring(1, cookie.length);\n    }\n    if (cookie.indexOf(nameEQ) === 0) {\n      return decodeURIComponent(cookie.substring(nameEQ.length));\n    }\n  }\n  return null;\n};\n\nconst setCookie = (name, value, options) => {\n  if (typeof options === \"undefined\") {\n    options = {};\n  }\n  let cookieString = name + \"=\" + value + \"; path=/\";\n  if (options.days) {\n    let date = new Date();\n    date.setTime(date.getTime() + options.days * 24 * 60 * 60 * 1000);\n    cookieString = cookieString + \"; expires=\" + date.toGMTString();\n  }\n  if (document.location.protocol === \"https:\") {\n    cookieString = cookieString + \"; Secure\";\n  }\n  document.cookie = cookieString;\n};\n\nconst getDefaultPolicy = () => ({\n  essential: true,\n  settings: false,\n  usage: false,\n  campaigns: false,\n});\n\nconst setPoliciesCookie = (settings, usage, campaigns) => {\n  const policy = getDefaultPolicy();\n  policy.settings = settings || false;\n  policy.usage = usage || false;\n  policy.campaigns = campaigns || false;\n\n  const json = JSON.stringify(policy);\n  setCookie(POLICY_COOKIE_NAME, json, { days: POLICY_COOKIE_DURATION_DAYS });\n\n  return policy;\n};\n\nconst setPreferencesCookie = () => {\n  setCookie(PREFERENCES_COOKIE_NAME, \"true\", {\n    days: PREFERENCES_COOKIE_DURATION_DAYS,\n  });\n};\n\nexport {\n  getCookie,\n  setCookie,\n  getDefaultPolicy,\n  setPoliciesCookie,\n  setPreferencesCookie,\n};\n","import { POLICY_COOKIE_NAME } from \"./consts\";\nimport {\n  getCookie,\n  getDefaultPolicy,\n  setPoliciesCookie,\n  setPreferencesCookie,\n} from \"./utils\";\n\nclass CookiePreferences {\n  constructor(formSelector, confirmationSelector, radioButtons) {\n    this.formSelector = formSelector;\n    this.confirmationSelector = confirmationSelector;\n    this.radioButtons = radioButtons;\n\n    this.form = document.querySelector(this.formSelector);\n  }\n\n  boolToValue(b) {\n    return b ? \"on\" : \"off\";\n  }\n\n  valueToBool(value) {\n    return value === \"on\";\n  }\n\n  getPolicyOrDefault() {\n    const cookie = getCookie(POLICY_COOKIE_NAME);\n    const policy = getDefaultPolicy();\n\n    if (!cookie) return policy;\n\n    try {\n      const parsed = JSON.parse(cookie);\n\n      policy.campaigns = parsed.campaigns || false;\n      policy.usage = parsed.usage || false;\n      policy.settings = parsed.settings || false;\n    } catch (e) {\n      return policy;\n    }\n\n    return policy;\n  }\n\n  initFormValues() {\n    const policy = this.getPolicyOrDefault();\n\n    Object.entries(this.radioButtons).forEach(([cookieKey, inputName]) => {\n      this.form[inputName].value = this.boolToValue(policy[cookieKey]);\n    });\n  }\n\n  setPoliciesCookie() {\n    const policy = {\n      settings: false,\n      usage: false,\n      campaigns: false,\n    };\n\n    Object.entries(this.radioButtons).forEach(([cookieKey, inputName]) => {\n      policy[cookieKey] = this.valueToBool(this.form[inputName].value);\n    });\n\n    setPoliciesCookie(policy.settings, policy.usage, policy.campaigns);\n  }\n\n  displayConfirmation() {\n    const confirmationEl = document.querySelector(this.confirmationSelector);\n\n    confirmationEl.style.display = \"block\";\n  }\n\n  bindForm() {\n    this.form.addEventListener(\"submit\", (evt) => {\n      evt.preventDefault();\n\n      this.setPoliciesCookie();\n      setPreferencesCookie();\n      this.displayConfirmation();\n\n      window.scrollTo(0, 0);\n\n      return false;\n    });\n  }\n}\n\nconst initCookiePreferences = (\n  formSelector,\n  confirmationSelector,\n  radioButtons\n) => {\n  const cookiePreferences = new CookiePreferences(\n    formSelector,\n    confirmationSelector,\n    radioButtons\n  );\n\n  cookiePreferences.initFormValues();\n  cookiePreferences.bindForm();\n};\n\nexport default initCookiePreferences;\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import initCookiePreferences from \"../../../core/assets/javascripts/cookies/preferences.js\";\n\ninitCookiePreferences(\n  \"#cookie-preferences-form\",\n  \".cookie-settings__confirmation\",\n  {\n    usage: \"cookies-usage\",\n  }\n);\n"],"names":["$04bf43472e4725ae$var$_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","$bdc152bf6018edeb$export$2e2bcd8739ae039","iter","Symbol","iterator","Array","from","$bbb23453b54d9d12$export$2e2bcd8739ae039","arr","len","arr2","$382d4a26ff91836d$export$2e2bcd8739ae039","o","minLen","n","prototype","toString","call","slice","constructor","name","test","$dc187e613156a21f$export$2e2bcd8739ae039","isArray","$673e34569eddad27$export$2e2bcd8739ae039","TypeError","$9ceebec9c95761fa$export$2e2bcd8739ae039","$931f469a9cb13576$export$885d3f877b02ad5e","$ef65029f6ae99ed4$export$110700823644f4a6","value","options","cookieString","days","date","Date","setTime","getTime","toGMTString","document","location","protocol","cookie","$1b7d90e37d6479f4$var$CookiePreferences","formSelector","confirmationSelector","radioButtons","instance","Constructor","this","form","querySelector","protoProps","staticProps","b","nameEQ","cookies","split","charAt","substring","indexOf","decodeURIComponent","$ef65029f6ae99ed4$export$4be65e66cfa2648a","policy","essential","settings","usage","campaigns","parsed","JSON","parse","e","getPolicyOrDefault","entries","forEach","param","cookieKey","_param","inputName","_this","boolToValue","valueToBool","json","stringify","$ef65029f6ae99ed4$export$5d0c102c5d7f343d","style","display","addEventListener","evt","preventDefault","setPoliciesCookie","displayConfirmation","window","scrollTo","cookiePreferences","initFormValues","bindForm","$1b7d90e37d6479f4$export$2e2bcd8739ae039"],"version":3,"file":"cookie-policy-form.js.map"}