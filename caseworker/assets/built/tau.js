!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e){return s(e)}function u(e){return e&&e.constructor===Symbol?"symbol":typeof e}function l(e,n){return!n||"object"!==u(n)&&"function"!=typeof n?t(e):n}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=o(e);if(t){var i=o(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function f(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||f(e)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){return function(e){if(Array.isArray(e))return p(e)}(e)||f(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var g="Select all",_=function(){"use strict";function e(t,r){n(this,e),this.$selectAllButton=t,this.$checkboxes=r,this.isAllSelected=!1}return i(e,[{key:"init",value:function(){var e=this;this.$selectAllButton.addEventListener("click",(function(t){return e.handleSelectAllButtonClick(t)}));var t=!0,n=!1,r=void 0;try{for(var i,s=this.$checkboxes[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){i.value.addEventListener("input",(function(){return e.setSelectAll()}))}}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}this.setSelectAll()}},{key:"handleSelectAllButtonClick",value:function(e){e.preventDefault(),this.setCheckboxesChecked(!this.isAllSelected)}},{key:"setCheckboxesChecked",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,s=this.$checkboxes[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var o=i.value;o.checked=e,o.dispatchEvent(new Event("input"))}}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}}},{key:"getNumChecked",value:function(){var e=0,t=!0,n=!1,r=void 0;try{for(var i,s=this.$checkboxes[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){e+=i.value.checked?1:0}}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}return e}},{key:"setSelectAll",value:function(){this.getNumChecked()===this.$checkboxes.length?(this.$selectAllButton.textContent="Deselect all",this.isAllSelected=!0):(this.$selectAllButton.textContent=g,this.isAllSelected=!1)}}]),e}(),b="Show all",I=function(){"use strict";function e(t,r){n(this,e),this.$expandAllButton=t,this.$details=r,this.isAllExpanded=!1}return i(e,[{key:"init",value:function(){var e=this;this.$expandAllButton.addEventListener("click",(function(t){return e.handleExpandAllButtonClick(t)}));var t=!0,n=!1,r=void 0;try{for(var i,s=this.$details[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){i.value.addEventListener("toggle",(function(){return e.setExpandAll()}))}}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}this.setExpandAll()}},{key:"handleExpandAllButtonClick",value:function(e){e.preventDefault(),this.setDetailsOpen(!this.isAllExpanded)}},{key:"setDetailsOpen",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,s=this.$details[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var o=i.value;o.open=e,o.dispatchEvent(new Event("toggle"))}}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}}},{key:"getNumOpened",value:function(){var e=0,t=!0,n=!1,r=void 0;try{for(var i,s=this.$details[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){e+=i.value.open?1:0}}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}return e}},{key:"setExpandAll",value:function(){this.getNumOpened()===this.$details.length?(this.$expandAllButton.textContent="Hide all",this.isAllExpanded=!0):(this.$expandAllButton.textContent=b,this.isAllExpanded=!1)}}]),e}(),k=function(){"use strict";function e(t,r,i){n(this,e),this.$checkboxes=t,this.$elementToToggleClass=r,this.toggleClass=i}return i(e,[{key:"init",value:function(){var e=this,t=!0,n=!1,r=void 0;try{for(var i,s=this.$checkboxes[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){i.value.addEventListener("input",(function(t){return e.handleCheckboxInput(t)}))}}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}this.setClass()}},{key:"handleCheckboxInput",value:function(){this.setClass()}},{key:"getNumChecked",value:function(){var e=0,t=!0,n=!1,r=void 0;try{for(var i,s=this.$checkboxes[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){e+=i.value.checked?1:0}}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}return e}},{key:"setClass",value:function(){var e=0===this.getNumChecked();this.$elementToToggleClass.classList.toggle(this.toggleClass,e)}}]),e}(),w=function(){"use strict";function e(t){n(this,e),this.$button=t}return i(e,[{key:"init",value:function(){var e=this;this.$button.addEventListener("click",(function(t){return e.handleClick(t)}))}},{key:"handleClick",value:function(){var e=this;setTimeout((function(){return e.$button.disabled=!0}),0)}}]),e}(),x=function(){"use strict";function e(t){n(this,e),this.$headline=t}return i(e,[{key:"getText",value:function(e){if(1===e.length){var t=e[0].name;return"Assessing ".concat(t)}return"Assessing ".concat(e.length," products")}},{key:"setProducts",value:function(e){this.$headline.textContent=this.getText(e)}}]),e}(),S=function(){"use strict";function e(t,r,i){n(this,e),this.$checkboxes=t,this.onSelectProducts=i,this.products={};var s=!0,o=!1,u=void 0;try{for(var l,a=r[Symbol.iterator]();!(s=(l=a.next()).done);s=!0){var c=l.value;this.products[c.id]=c}}catch(e){o=!0,u=e}finally{try{s||null==a.return||a.return()}finally{if(o)throw u}}}return i(e,[{key:"init",value:function(){var e=this,t=!0,n=!1,r=void 0;try{for(var i,s=this.$checkboxes[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){i.value.addEventListener("input",(function(){e.onSelectProducts(e.getSelectedProducts())}))}}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}this.onSelectProducts(this.getSelectedProducts())}},{key:"getSelectedProducts",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,s=this.$checkboxes[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var o=i.value;o.checked&&e.push(this.products[o.value])}}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}return e}}]),e}(),E=function(){"use strict";function e(){n(this,e),this.suggestions=[],this.seenExporterSuggestions=new Set,this.seenAssessedSuggestions=new Set}return i(e,[{key:"getSuggestionKey",value:function(e){return e.sort().join("|")}},{key:"addSuggestion",value:function(e,t,n){var r=this.getSuggestionKey(t);e.has(r)||(e.add(r),this.suggestions.push([t,n]))}},{key:"addExporterSuggestion",value:function(e,t){this.addSuggestion(this.seenExporterSuggestions,e,t)}},{key:"addAssessedSuggestion",value:function(e,t){this.addSuggestion(this.seenAssessedSuggestions,e,t)}}]),e}(),C=function(){"use strict";function e(t,r){n(this,e),this.$suggestionsContainer=t,this.onSelectSuggestions=r}return i(e,[{key:"getSuggestionButton",value:function(e){var t=document.createElement("button");return t.classList.add("lite-button--link"),t.textContent=e,t}},{key:"getSuggestionText",value:function(e){return e.join(", ")}},{key:"getExporterSuggestionText",value:function(e){var t=this.getSuggestionText(e);return"Select exporter suggestion ".concat(t)}},{key:"getAssessedSuggestionText",value:function(e){var t=this.getSuggestionText(e);return"Copy previous assessment ".concat(t)}},{key:"getSuggestions",value:function(e){var t=new E,n=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var u=s.value.controlListEntries,l=u.exporter,a=u.precedents;l&&l.length>0&&t.addExporterSuggestion(l,this.getExporterSuggestionText(l));var c=!0,h=!1,d=void 0;if(a)try{for(var f,p=a[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var m=f.value;m.length&&t.addAssessedSuggestion(m,this.getAssessedSuggestionText(m))}}catch(e){h=!0,d=e}finally{try{c||null==p.return||p.return()}finally{if(h)throw d}}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t.suggestions}},{key:"setProducts",value:function(e){this.$suggestionsContainer.innerHTML="";var t=this.getSuggestions(e),n=!0,r=!1,i=void 0;try{for(var s,o=this,u=function(e,t){var n=v(t.value,2),r=n[0],i=n[1],s=o,u=o.getSuggestionButton(i);u.addEventListener("click",(function(e){return s.handleSuggestionButtonClick(e,r)})),o.$suggestionsContainer.append(u)},l=t[Symbol.iterator]();!(n=(s=l.next()).done);n=!0)u(0,s)}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}}},{key:"handleSuggestionButtonClick",value:function(e,t){e.preventDefault(),this.onSelectSuggestions(t)}}]),e}(),L=function(){"use strict";function e(t){n(this,e),this.controlListEntriesSelector=t}return i(e,[{key:"setSuggestions",value:function(e){document.querySelector(this.controlListEntriesSelector).tokenfield.addItems(e.map((function(e){return{id:e,name:e}})))}}]),e}(),O=function(){"use strict";function e(t,r){n(this,e),this.controlListEntriesSelector=t,this.$noControlListCheckbox=r}return i(e,[{key:"init",value:function(){var e=this;this.$noControlListCheckbox.addEventListener("input",(function(t){return e.handleNoControlListCheckboxInput(t)}))}},{key:"emptyTokenField",value:function(){document.querySelector(this.controlListEntriesSelector).tokenfield.emptyItems()}},{key:"displayNoCLEEntry",value:function(){var e=this,t=document.querySelector(this.controlListEntriesSelector);t.querySelector(".tokenfield-input").style.display="none";var n=t.querySelector(".tokenfield-set ul"),r=document.createElement("li");r.classList.add("tokenfield-set-item","tau-none-item");var i=document.createElement("span");i.classList.add("item-label"),i.textContent="None";var s=document.createElement("a");s.classList.add("item-remove"),s.tabIndex=-1,s.textContent="×",s.addEventListener("click",(function(){e.setCheckbox(!1)})),r.append(i,s),n.appendChild(r)}},{key:"removeNoCLEEntry",value:function(){var e=document.querySelector(this.controlListEntriesSelector);e.querySelector(".tokenfield-input").style.removeProperty("display");var t=e.querySelector(".tokenfield-set .tau-none-item");null==t||t.remove()}},{key:"handleNoControlListCheckboxInput",value:function(){this.$noControlListCheckbox.checked?(this.emptyTokenField(),this.displayNoCLEEntry()):this.removeNoCLEEntry()}},{key:"setCheckbox",value:function(e){this.$noControlListCheckbox.checked=e,this.$noControlListCheckbox.dispatchEvent(new Event("input"))}},{key:"reset",value:function(){this.setCheckbox(!1)}}]),e}();!function(){var e=function(e){if("string"!=typeof e&&(e=e.toString()),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()},t=function(e){return"string"!=typeof e&&(e=e.toString()),e},n=function(e){if(e.bodyUsed)return fetch.Promise.reject(new TypeError("Already read"));e.bodyUsed=!0},r=function(e){return new fetch.Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))},i=function(e){var t=new FileReader;return t.readAsArrayBuffer(e),r(t)},s=function(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(c.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(c.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else{if(e)throw new Error("unsupported BodyInit type");this._bodyText=""}},c.blob?(this.blob=function(){var e=n(this);if(e)return e;if(this._bodyBlob)return fetch.Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return fetch.Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(i)},this.text=function(){var e,t,i=n(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,(t=new FileReader).readAsText(e),r(t);if(this._bodyFormData)throw new Error("could not read FormData body as text");return fetch.Promise.resolve(this._bodyText)}):this.text=function(){var e=n(this);return e||fetch.Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(u)}),this.json=function(){return this.text().then((function(e){return JSON.parse(e)}))},this},o=function(e,t){var n,r;if(t=t||{},this.url=e,this.credentials=t.credentials||"omit",this.headers=new f(t.headers),this.method=(n=t.method||"GET",r=n.toUpperCase(),h.indexOf(r)>-1?r:n),this.mode=t.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&t.body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(t.body)},u=function(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t},l=function(e){var t=new f;return e.getAllResponseHeaders().trim().split("\n").forEach((function(e){var n=e.trim().split(":"),r=n.shift().trim(),i=n.join(":").trim();t.append(r,i)})),t},a=function(e,t){t||(t={}),this._initBody(e),this.type="default",this.url=null,this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof f?t.headers:new f(t.headers),this.url=t.url||""};if(!self.fetch){f.prototype.append=function(n,r){n=e(n),r=t(r);var i=this.map[n];i||(i=[],this.map[n]=i),i.push(r)},f.prototype.delete=function(t){delete this.map[e(t)]},f.prototype.get=function(t){var n=this.map[e(t)];return n?n[0]:null},f.prototype.getAll=function(t){return this.map[e(t)]||[]},f.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},f.prototype.set=function(n,r){this.map[e(n)]=[t(r)]},f.prototype.forEach=function(e){var t=this;Object.getOwnPropertyNames(this.map).forEach((function(n){e(n,t.map[n])}))};var c={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self},h=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],d=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent);s.call(o.prototype),s.call(a.prototype),self.Headers=f,self.Request=o,self.Response=a,self.fetch=function(e,t){var n;return n=o.prototype.isPrototypeOf(e)&&!t?e:new o(e,t),new fetch.Promise((function(e,t){var r=function(){if(4===i.readyState){var n=1223===i.status?204:i.status;if(n<100||n>599)t(new TypeError("Network request failed"));else{var r={status:n,statusText:i.statusText,headers:l(i),url:"responseURL"in i?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):void 0},s="response"in i?i.response:i.responseText;e(new a(s,r))}}},i=function(){return d&&!/^(get|post|head|put|delete|options)$/i.test(this.method)?(this.usingActiveXhr=!0,new ActiveXObject("Microsoft.XMLHTTP")):new XMLHttpRequest}();"cors"===n.credentials&&(i.withCredentials=!0),i.onreadystatechange=r,self.usingActiveXhr||(i.onload=r,i.onerror=function(){t(new TypeError("Network request failed"))}),i.open(n.method,n.url,!0),"responseType"in i&&c.blob&&(i.responseType="blob"),n.headers.forEach((function(e,t){t.forEach((function(t){i.setRequestHeader(e,t)}))})),i.send(void 0===n._bodyInit?null:n._bodyInit)}))},fetch.Promise=self.Promise,self.fetch.polyfill=!0}function f(e){this.map={};var t=this;e instanceof f?e.forEach((function(e,n){n.forEach((function(n){t.append(e,n)}))})):e&&Object.getOwnPropertyNames(e).forEach((function(n){t.append(n,e[n])}))}}();var A,N={};window,A=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=37)}([function(e,t,n){var r=n(1),i=n(6),s=n(7),o=n(16),u=n(18),l="prototype",a=function(e,t,n){var c,h,d,f,p=e&a.F,m=e&a.G,v=e&a.S,y=e&a.P,g=e&a.B,_=m?r:v?r[t]||(r[t]={}):(r[t]||{})[l],b=m?i:i[t]||(i[t]={}),I=b[l]||(b[l]={});for(c in m&&(n=t),n)d=((h=!p&&_&&void 0!==_[c])?_:n)[c],f=g&&h?u(d,r):y&&"function"==typeof d?u(Function.call,d):d,_&&o(_,c,d,e&a.U),b[c]!=d&&s(b,c,f),y&&I[c]!=d&&(I[c]=d)};r.core=i,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,e.exports=a},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(4)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";var r=function(e,t){var n,r,i,s,o=x;for(s=arguments.length;2<s--;)w.push(arguments[s]);for(t&&null!=t.children&&(w.length||w.push(t.children),delete t.children);w.length;)if((r=w.pop())&&void 0!==r.pop)for(s=r.length;s--;)w.push(r[s]);else"boolean"==typeof r&&(r=null),(i="function"!=typeof e)&&(null==r?r="":"number"==typeof r?r=String(r):"string"!=typeof r&&(i=!1)),i&&n?o[o.length-1]+=r:o===x?o=[r]:o.push(r),n=i;var u=new I;return u.nodeName=e,u.children=o,u.attributes=null==t?void 0:t,u.key=null==t?void 0:t.key,void 0!==k.vnode&&k.vnode(u),u},i=function(e,t){for(var n in t)e[n]=t[n];return e},s=function(e,t){return r(e.nodeName,i(i({},e.attributes),t),2<arguments.length?[].slice.call(arguments,2):e.children)},o=function(e){!e._dirty&&(e._dirty=!0)&&1==C.push(e)&&(k.debounceRendering||S)(u)},u=function(){var e,t=C;for(C=[];e=t.pop();)e._dirty&&P(e)},l=function(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()},a=function(e){var t=i({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t},c=function(e){var t=e.parentNode;t&&t.removeChild(e)},h=function(e,t,n,r,i){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),r&&r(e);else if("class"!==t||i)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var s in n)s in r||(e.style[s]="");for(var s in r)e.style[s]="number"==typeof r[s]&&!1===E.test(s)?r[s]+"px":r[s]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var o=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,d,o):e.removeEventListener(t,d,o),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!i&&t in e){try{e[t]=null==r?"":r}catch(e){}null!=r&&!1!==r||"spellcheck"==t||e.removeAttribute(t)}else{var u=i&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?u?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(u?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""},d=function(e){return this._listeners[e.type](k.event&&k.event(e)||e)},f=function(){for(var e;e=L.pop();)k.afterMount&&k.afterMount(e),e.componentDidMount&&e.componentDidMount()},p=function(e,t){var n=e._component;n?M(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||c(e),m(e))},m=function(e){for(e=e.lastChild;e;){var t=e.previousSibling;p(e,!0),e=t}},v=function(e,t,n){var r,i=D.length;for(e.prototype&&e.prototype.render?(r=new e(t,n),_.call(r,t,n)):((r=new _(t,n)).constructor=e,r.render=y);i--;)if(D[i].constructor===e)return r.nextBase=D[i].nextBase,D.splice(i,1),r;return r},y=function(e,t,n){return this.constructor(e,n)},g=function(e,t,n,r,i){e._disable||(e._disable=!0,e.__ref=t.ref,e.__key=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r)),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===k.syncComponentUpdates&&e.base?o(e):P(e,1,i)),e.__ref&&e.__ref(e))},_=function(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{},this._renderCallbacks=[]},b=function(e,t,n){return function(e,t,n,r,i,s){O++||(A=null!=i&&void 0!==i.ownerSVGElement,N=null!=e&&!("__preactattr_"in e));var o=T(e,t,n,r,s);return i&&o.parentNode!==i&&i.appendChild(o),--O||(N=!1,s||f()),o}(n,e,{},!1,t,!1)};n.r(t),n.d(t,"h",(function(){return r})),n.d(t,"createElement",(function(){return r})),n.d(t,"cloneElement",(function(){return s})),n.d(t,"Component",(function(){return _})),n.d(t,"render",(function(){return b})),n.d(t,"rerender",(function(){return u})),n.d(t,"options",(function(){return k}));var I=function(){},k={},w=[],x=[],S="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,E=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,C=[],L=[],O=0,A=!1,N=!1;function T(e,t,n,r,i){var s=e,o=A;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||i)?e.nodeValue!=t&&(e.nodeValue=t):(s=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(s,e),p(e,!0))),s.__preactattr_=!0,s;var u,d,f=t.nodeName;if("function"==typeof f)return function(e,t,n,r){for(var i=e&&e._component,s=i,o=e,u=i&&e._componentConstructor===t.nodeName,l=u,c=a(t);i&&!l&&(i=i._parentComponent);)l=i.constructor===t.nodeName;return i&&l&&(!r||i._component)?(g(i,c,3,n,r),e=i.base):(s&&!u&&(M(s),e=o=null),i=v(t.nodeName,c,n),e&&!i.nextBase&&(i.nextBase=e,o=null),g(i,c,1,n,r),e=i.base,o&&e!==o&&(o._component=null,p(o,!1))),e}(e,t,n,r);if(A="svg"===f||"foreignObject"!==f&&A,f=String(f),(!e||!l(e,f))&&(u=f,(d=A?document.createElementNS("http://www.w3.org/2000/svg",u):document.createElement(u)).normalizedNodeName=u,s=d,e)){for(;e.firstChild;)s.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(s,e),p(e,!0)}var m=s.firstChild,y=s.__preactattr_,_=t.children;if(null==y){y=s.__preactattr_={};for(var b=s.attributes,I=b.length;I--;)y[b[I].name]=b[I].value}return!N&&_&&1===_.length&&"string"==typeof _[0]&&null!=m&&void 0!==m.splitText&&null==m.nextSibling?m.nodeValue!=_[0]&&(m.nodeValue=_[0]):(_&&_.length||null!=m)&&function(e,t,n,r,i){var s,o,u,a,h,d,f,m,v=e.childNodes,y=[],g={},_=0,b=0,I=v.length,k=0,w=t?t.length:0;if(0!==I)for(var x=0;x<I;x++){var S=v[x],E=S.__preactattr_;null!=(C=w&&E?S._component?S._component.__key:E.key:null)?(_++,g[C]=S):(E||(void 0!==S.splitText?!i||S.nodeValue.trim():i))&&(y[k++]=S)}if(0!==w)for(x=0;x<w;x++){var C;if(h=null,null!=(C=(a=t[x]).key))_&&void 0!==g[C]&&(h=g[C],g[C]=void 0,_--);else if(b<k)for(s=b;s<k;s++)if(void 0!==y[s]&&(d=o=y[s],m=i,"string"==typeof(f=a)||"number"==typeof f?void 0!==d.splitText:"string"==typeof f.nodeName?!d._componentConstructor&&l(d,f.nodeName):m||d._componentConstructor===f.nodeName)){h=o,y[s]=void 0,s===k-1&&k--,s===b&&b++;break}h=T(h,a,n,r),u=v[x],h&&h!==e&&h!==u&&(null==u?e.appendChild(h):h===u.nextSibling?c(u):e.insertBefore(h,u))}if(_)for(var x in g)void 0!==g[x]&&p(g[x],!1);for(;b<=k;)void 0!==(h=y[k--])&&p(h,!1)}(s,_,n,r,N||null!=y.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||h(e,r,n[r],n[r]=void 0,A);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||h(e,r,n[r],n[r]=t[r],A)}(s,t.attributes,y),A=o,s}var D=[];function P(e,t,n,r){if(!e._disable){var s,o,u,l=e.props,c=e.state,h=e.context,d=e.prevProps||l,m=e.prevState||c,y=e.prevContext||h,_=e.base,b=e.nextBase,I=_||b,w=e._component,x=!1,S=y;if(e.constructor.getDerivedStateFromProps&&(c=i(i({},c),e.constructor.getDerivedStateFromProps(l,c)),e.state=c),_&&(e.props=d,e.state=m,e.context=y,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(l,c,h)?x=!0:e.componentWillUpdate&&e.componentWillUpdate(l,c,h),e.props=l,e.state=c,e.context=h),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!x){s=e.render(l,c,h),e.getChildContext&&(h=i(i({},h),e.getChildContext())),_&&e.getSnapshotBeforeUpdate&&(S=e.getSnapshotBeforeUpdate(d,m));var E,C,D=s&&s.nodeName;if("function"==typeof D){var j=a(s);(o=w)&&o.constructor===D&&j.key==o.__key?g(o,j,1,h,!1):(E=o,e._component=o=v(D,j,h),o.nextBase=o.nextBase||b,o._parentComponent=e,g(o,j,0,h,!1),P(o,1,n,!0)),C=o.base}else u=I,(E=w)&&(u=e._component=null),(I||1===t)&&(u&&(u._component=null),C=function(e,t,n,r,i,s){O++||(A=null!=i&&void 0!==i.ownerSVGElement,N=null!=e&&!("__preactattr_"in e));var o=T(e,t,n,r,s);return i&&o.parentNode!==i&&i.appendChild(o),--O||(N=!1,s||f()),o}(u,s,h,n||!_,I&&I.parentNode,!0));if(I&&C!==I&&o!==w){var R=I.parentNode;R&&C!==R&&(R.replaceChild(C,I),E||(I._component=null,p(I,!1)))}if(E&&M(E),(e.base=C)&&!r){for(var B=e,F=e;F=F._parentComponent;)(B=F).base=C;C._component=B,C._componentConstructor=B.constructor}}for(!_||n?L.unshift(e):x||(e.componentDidUpdate&&e.componentDidUpdate(d,m,S),k.afterUpdate&&k.afterUpdate(e));e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);O||r||f()}}function M(e){k.beforeUnmount&&k.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?M(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),c(e.nextBase=t),D.push(e),m(t)),e.__ref&&e.__ref(null)}i(_.prototype,{setState:function(e,t){this.prevState||(this.prevState=this.state),this.state=i(i({},this.state),"function"==typeof e?e(this.state,this.props):e),t&&this._renderCallbacks.push(t),o(this)},forceUpdate:function(e){e&&this._renderCallbacks.push(e),P(this,2)},render:function(){}});var j={h:r,createElement:r,cloneElement:s,Component:_,render:b,rerender:u,options:k};t.default=j},function(e,t){var n=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(8),i=n(40);e.exports=n(3)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(9),i=n(38),s=n(39),o=Object.defineProperty;t.f=n(3)?Object.defineProperty:function(e,t,n){if(r(e),t=s(t,!0),r(n),i)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(2);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(22);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";var r=n(4);e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,n){var r=n(0);r(r.S+r.F,"Object",{assign:n(41)})},function(e,t,n){var r=n(2),i=n(1).document,s=r(i)&&r(i.createElement);e.exports=function(e){return s?i.createElement(e):{}}},function(e,t,n){var r=n(1),i=n(7),s=n(17),o=n(10)("src"),u="toString",l=Function[u],a=(""+l).split(u);n(6).inspectSource=function(e){return l.call(e)},(e.exports=function(e,t,n,u){var l="function"==typeof n;l&&(s(n,"name")||i(n,"name",t)),e[t]!==n&&(l&&(s(n,o)||i(n,o,e[t]?""+e[t]:a.join(String(t)))),e===r?e[t]=n:u?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,u,(function(){return"function"==typeof this&&this[o]||l.call(this)}))},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(19);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(42),i=n(28);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(11),i=n(12);e.exports=function(e){return r(i(e))}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(21),i=n(24),s=n(43);e.exports=function(e){return function(t,n,o){var u,l=r(t),a=i(l.length),c=s(o,a);if(e&&n!=n){for(;c<a;)if((u=l[c++])!=u)return!0}else for(;c<a;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var r=n(25),i=Math.min;e.exports=function(e){return 0<e?i(r(e),9007199254740991):0}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?r:n)(e)}},function(e,t,n){var r=n(27)("keys"),i=n(10);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(6),i=n(1),s="__core-js_shared__",o=i[s]||(i[s]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(44)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(12);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(8).f,i=Function.prototype,s=/^\s*function ([^ (]*)/;"name"in i||n(3)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(0),i=n(32)(1);r(r.P+r.F*!n(13)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(18),i=n(11),s=n(29),o=n(24),u=n(47);e.exports=function(e,t){var n=1==e,l=2==e,a=3==e,c=4==e,h=6==e,d=5==e||h,f=t||u;return function(t,u,p){for(var m,v,y=s(t),g=i(y),_=r(u,p,3),b=o(g.length),I=0,k=n?f(t,b):l?f(t,0):void 0;I<b;I++)if((d||I in g)&&(v=_(m=g[I],I,y),e))if(n)k[I]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return I;case 2:k.push(m)}else if(c)return!1;return h?-1:a||c?c:k}}},function(e,t,n){var r=n(22);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(27)("wks"),i=n(10),s=n(1).Symbol,o="function"==typeof s;(e.exports=function(e){return r[e]||(r[e]=o&&s[e]||(o?s:i)("Symbol."+e))}).store=r},function(e,t,n){"use strict";var r=n(0),i=n(23)(!1),s=[].indexOf,o=!!s&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(o||!n(13)(s)),"Array",{indexOf:function(e){return o?s.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,n){var r=n(0);r(r.S,"Object",{create:n(52)})},function(e,t,n){"use strict";var r=function(e){if(!e.element)throw new Error("element is not defined");if(!e.id)throw new Error("id is not defined");if(!e.source)throw new Error("source is not defined");Array.isArray(e.source)&&(e.source=u(e.source)),(0,s.render)((0,s.createElement)(o.default,e),e.element)};t.__esModule=!0,t.default=void 0,n(14),n(30),n(31),n(35),n(49),n(50);var i,s=n(5),o=(i=n(51))&&i.__esModule?i:{default:i},u=function(e){return function(t,n){n(e.filter((function(e){return-1!==e.toLowerCase().indexOf(t.toLowerCase())})))}};r.enhanceSelectElement=function(e){if(!e.selectElement)throw new Error("selectElement is not defined");if(!e.source){var t=[].filter.call(e.selectElement.options,(function(t){return t.value||e.preserveNullOptions}));e.source=t.map((function(e){return e.textContent||e.innerText}))}if(e.onConfirm=e.onConfirm||function(t){var n=[].filter.call(e.selectElement.options,(function(e){return(e.textContent||e.innerText)===t}))[0];n&&(n.selected=!0)},e.selectElement.value||void 0===e.defaultValue){var n=e.selectElement.options[e.selectElement.options.selectedIndex];e.defaultValue=n.textContent||n.innerText}void 0===e.name&&(e.name=""),void 0===e.id&&(void 0===e.selectElement.id?e.id="":e.id=e.selectElement.id),void 0===e.autoselect&&(e.autoselect=!0);var i=document.createElement("div");e.selectElement.parentNode.insertBefore(i,e.selectElement),r(Object.assign({},e,{element:i})),e.selectElement.style.display="none",e.selectElement.id=e.selectElement.id+"-select"};var l=r;t.default=l},function(e,t,n){e.exports=!n(3)&&!n(4)((function(){return 7!=Object.defineProperty(n(15)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(2);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";var r=n(20),i=n(45),s=n(46),o=n(29),u=n(11),l=Object.assign;e.exports=!l||n(4)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r}))?function(e,t){for(var n=o(e),l=arguments.length,a=1,c=i.f,h=s.f;a<l;)for(var d,f=u(arguments[a++]),p=c?r(f).concat(c(f)):r(f),m=p.length,v=0;v<m;)h.call(f,d=p[v++])&&(n[d]=f[d]);return n}:l},function(e,t,n){var r=n(17),i=n(21),s=n(23)(!1),o=n(26)("IE_PROTO");e.exports=function(e,t){var n,u=i(e),l=0,a=[];for(n in u)n!=o&&r(u,n)&&a.push(n);for(;t.length>l;)r(u,n=t[l++])&&(~s(a,n)||a.push(n));return a}},function(e,t,n){var r=n(25),i=Math.max,s=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):s(e,t)}},function(e,t){e.exports=!1},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(48);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(2),i=n(33),s=n(34)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[s])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(0),i=n(32)(2);r(r.P+r.F*!n(13)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(0);r(r.S,"Array",{isArray:n(33)})},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}},i=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},s=function(){return"undefined"!=typeof navigator&&!(!navigator.userAgent.match(/(iPod|iPhone|iPad)/g)||!navigator.userAgent.match(/AppleWebKit/g))};t.__esModule=!0,t.default=void 0,n(14),n(36),n(30),n(31),n(35),n(55),n(58);var o=n(5),u=r(n(60)),l=r(n(61));function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c={13:"enter",27:"escape",32:"space",38:"up",40:"down"},h=function(e){var t,n,r=function(t){var n;return(n=e.call(this,t)||this).elementReferences={},n.state={focused:null,hovered:null,menuOpen:!1,options:t.defaultValue?[t.defaultValue]:[],query:t.defaultValue,validChoiceMade:!1,selected:null,ariaHint:!0},n.handleComponentBlur=n.handleComponentBlur.bind(i(i(n))),n.handleKeyDown=n.handleKeyDown.bind(i(i(n))),n.handleUpArrow=n.handleUpArrow.bind(i(i(n))),n.handleDownArrow=n.handleDownArrow.bind(i(i(n))),n.handleEnter=n.handleEnter.bind(i(i(n))),n.handlePrintableKey=n.handlePrintableKey.bind(i(i(n))),n.handleListMouseLeave=n.handleListMouseLeave.bind(i(i(n))),n.handleOptionBlur=n.handleOptionBlur.bind(i(i(n))),n.handleOptionClick=n.handleOptionClick.bind(i(i(n))),n.handleOptionFocus=n.handleOptionFocus.bind(i(i(n))),n.handleOptionMouseDown=n.handleOptionMouseDown.bind(i(i(n))),n.handleOptionMouseEnter=n.handleOptionMouseEnter.bind(i(i(n))),n.handleInputBlur=n.handleInputBlur.bind(i(i(n))),n.handleInputChange=n.handleInputChange.bind(i(i(n))),n.handleInputFocus=n.handleInputFocus.bind(i(i(n))),n.pollInputElement=n.pollInputElement.bind(i(i(n))),n.getDirectInputChanges=n.getDirectInputChanges.bind(i(i(n))),n};n=e,(t=r).prototype=Object.create(n.prototype),(t.prototype.constructor=t).__proto__=n;var l=r.prototype;return l.isQueryAnOption=function(e,t){var n=this;return-1!==t.map((function(e){return n.templateInputValue(e).toLowerCase()})).indexOf(e.toLowerCase())},l.componentDidMount=function(){this.pollInputElement()},l.componentWillUnmount=function(){clearTimeout(this.$pollInput)},l.pollInputElement=function(){var e=this;this.getDirectInputChanges(),this.$pollInput=setTimeout((function(){e.pollInputElement()}),100)},l.getDirectInputChanges=function(){var e=this.elementReferences[-1];e&&e.value!==this.state.query&&this.handleInputChange({target:{value:e.value}})},l.componentDidUpdate=function(e,t){var n=this.state.focused,r=null===n,i=t.focused!==n;i&&!r&&this.elementReferences[n].focus();var s=-1===n,o=i&&null===t.focused;if(s&&o){var u=this.elementReferences[n];u.setSelectionRange(0,u.value.length)}},l.hasAutoselect=function(){return!s()&&this.props.autoselect},l.templateInputValue=function(e){var t=this.props.templates&&this.props.templates.inputValue;return t?t(e):e},l.templateSuggestion=function(e){var t=this.props.templates&&this.props.templates.suggestion;return t?t(e):e},l.handleComponentBlur=function(e){var t,n=this.state,r=n.options,i=n.query,s=n.selected;this.props.confirmOnBlur?(t=e.query||i,this.props.onConfirm(r[s])):t=i,this.setState({focused:null,menuOpen:e.menuOpen||!1,query:t,selected:null,validChoiceMade:this.isQueryAnOption(t,r)})},l.handleListMouseLeave=function(e){this.setState({hovered:null})},l.handleOptionBlur=function(e,t){var n=this.state,r=n.focused,i=n.menuOpen,o=n.options,u=n.selected,l=null===e.relatedTarget,a=e.relatedTarget===this.elementReferences[-1],c=r!==t&&-1!==r;if(!c&&l||!c&&!a){var h=i&&s();this.handleComponentBlur({menuOpen:h,query:this.templateInputValue(o[u])})}},l.handleInputBlur=function(e){var t=this.state,n=t.focused,r=t.menuOpen,i=t.options,o=t.query,u=t.selected;if(-1===n){var l=r&&s(),a=s()?o:this.templateInputValue(i[u]);this.handleComponentBlur({menuOpen:l,query:a})}},l.handleInputChange=function(e){var t=this,n=this.props,r=n.minLength,i=n.source,s=n.showAllValues,o=this.hasAutoselect(),u=e.target.value,l=0===u.length,a=this.state.query.length!==u.length,c=u.length>=r;this.setState({query:u,ariaHint:l}),s||!l&&a&&c?i(u,(function(e){var n=0<e.length;t.setState({menuOpen:n,options:e,selected:o&&n?0:-1,validChoiceMade:!1})})):!l&&c||this.setState({menuOpen:!1,options:[]})},l.handleInputClick=function(e){this.handleInputChange(e)},l.handleInputFocus=function(e){var t=this.state,n=t.query,r=t.validChoiceMade,i=t.options,s=this.props.minLength,o=!r&&n.length>=s&&0<i.length;o?this.setState((function(e){var t=e.menuOpen;return{focused:-1,menuOpen:o||t,selected:-1}})):this.setState({focused:-1})},l.handleOptionFocus=function(e){this.setState({focused:e,hovered:null,selected:e})},l.handleOptionMouseEnter=function(e,t){s()||this.setState({hovered:t})},l.handleOptionClick=function(e,t){var n=this.state.options[t],r=this.templateInputValue(n);this.props.onConfirm(n),this.setState({focused:-1,hovered:null,menuOpen:!1,query:r,selected:-1,validChoiceMade:!0}),this.forceUpdate()},l.handleOptionMouseDown=function(e){e.preventDefault()},l.handleUpArrow=function(e){e.preventDefault();var t=this.state,n=t.menuOpen,r=t.selected;-1!==r&&n&&this.handleOptionFocus(r-1)},l.handleDownArrow=function(e){var t=this;if(e.preventDefault(),this.props.showAllValues&&!1===this.state.menuOpen)e.preventDefault(),this.props.source("",(function(e){t.setState({menuOpen:!0,options:e,selected:0,focused:0,hovered:null})}));else if(!0===this.state.menuOpen){var n=this.state,r=n.menuOpen,i=n.options,s=n.selected;s!==i.length-1&&r&&this.handleOptionFocus(s+1)}},l.handleSpace=function(e){var t=this;this.props.showAllValues&&!1===this.state.menuOpen&&""===this.state.query&&(e.preventDefault(),this.props.source("",(function(e){t.setState({menuOpen:!0,options:e})}))),-1!==this.state.focused&&(e.preventDefault(),this.handleOptionClick(e,this.state.focused))},l.handleEnter=function(e){this.state.menuOpen&&(e.preventDefault(),0<=this.state.selected&&this.handleOptionClick(e,this.state.selected))},l.handlePrintableKey=function(e){var t=this.elementReferences[-1];e.target===t||t.focus()},l.handleKeyDown=function(e){switch(c[e.keyCode]){case"up":this.handleUpArrow(e);break;case"down":this.handleDownArrow(e);break;case"space":this.handleSpace(e);break;case"enter":this.handleEnter(e);break;case"escape":this.handleComponentBlur({query:this.state.query});break;default:(function(e){return 47<e&&e<58||32===e||8===e||64<e&&e<91||95<e&&e<112||185<e&&e<193||218<e&&e<223})(e.keyCode)&&this.handlePrintableKey(e)}},l.render=function(){var e,t=this,n=this.props,r=n.cssNamespace,i=n.displayMenu,l=n.id,c=n.minLength,h=n.name,d=n.placeholder,f=n.required,p=n.showAllValues,m=n.tNoResults,v=n.tStatusQueryTooShort,y=n.tStatusNoResults,g=n.tStatusSelectedOption,_=n.tStatusResults,b=n.tAssistiveHint,I=n.dropdownArrow,k=this.state,w=k.focused,x=k.hovered,S=k.menuOpen,E=k.options,C=k.query,L=k.selected,O=k.ariaHint,A=k.validChoiceMade,N=this.hasAutoselect(),T=-1===w,D=0===E.length,P=0!==C.length,M=C.length>=c,j=this.props.showNoOptionsFound&&T&&D&&P&&M,R=r+"__wrapper",B=r+"__input",F=null!==w?" "+B+"--focused":"",q=this.props.showAllValues?" "+B+"--show-all-values":" "+B+"--default",V=r+"__dropdown-arrow-down",$=-1!==w&&null!==w,H=r+"__menu",U=H+"--"+i,z=H+"--"+(S||j?"visible":"hidden"),K=r+"__option",W=r+"__hint",X=this.templateInputValue(E[L]),G=X&&0===X.toLowerCase().indexOf(C.toLowerCase())&&N?C+X.substr(C.length):"",Q=l+"__assistiveHint",J=O?{"aria-describedby":Q}:null;return p&&"string"==typeof(e=I({className:V}))&&(e=(0,o.createElement)("div",{className:r+"__dropdown-arrow-down-wrapper",dangerouslySetInnerHTML:{__html:e}})),(0,o.createElement)("div",{className:R,onKeyDown:this.handleKeyDown},(0,o.createElement)(u.default,{id:l,length:E.length,queryLength:C.length,minQueryLength:c,selectedOption:this.templateInputValue(E[L]),selectedOptionIndex:L,validChoiceMade:A,isInFocus:null!==this.state.focused,tQueryTooShort:v,tNoResults:y,tSelectedOption:g,tResults:_}),G&&(0,o.createElement)("span",null,(0,o.createElement)("input",{className:W,readonly:!0,tabIndex:"-1",value:G})),(0,o.createElement)("input",a({"aria-expanded":S?"true":"false","aria-activedescendant":!!$&&l+"__option--"+w,"aria-owns":l+"__listbox","aria-autocomplete":this.hasAutoselect()?"both":"list"},J,{autoComplete:"off",className:""+B+F+q,id:l,onClick:function(e){return t.handleInputClick(e)},onBlur:this.handleInputBlur},function(e){return{onInput:e}}(this.handleInputChange),{onFocus:this.handleInputFocus,name:h,placeholder:d,ref:function(e){t.elementReferences[-1]=e},type:"text",role:"combobox",required:f,value:C})),e,(0,o.createElement)("ul",{className:H+" "+U+" "+z,onMouseLeave:function(e){return t.handleListMouseLeave(e)},id:l+"__listbox",role:"listbox"},E.map((function(e,n){var r=(-1===w?L===n:w===n)&&null===x?" "+K+"--focused":"",i=n%2?" "+K+"--odd":"",u=s()?"<span id="+l+"__option-suffix--"+n+' style="border:0;clip:rect(0 0 0 0);height:1px;marginBottom:-1px;marginRight:-1px;overflow:hidden;padding:0;position:absolute;whiteSpace:nowrap;width:1px"> '+(n+1)+" of "+E.length+"</span>":"";return(0,o.createElement)("li",{"aria-selected":w===n?"true":"false",className:""+K+r+i,dangerouslySetInnerHTML:{__html:t.templateSuggestion(e)+u},id:l+"__option--"+n,key:n,onBlur:function(e){return t.handleOptionBlur(e,n)},onClick:function(e){return t.handleOptionClick(e,n)},onMouseDown:t.handleOptionMouseDown,onMouseEnter:function(e){return t.handleOptionMouseEnter(e,n)},ref:function(e){t.elementReferences[n]=e},role:"option",tabIndex:"-1","aria-posinset":n+1,"aria-setsize":E.length})})),j&&(0,o.createElement)("li",{className:K+" "+K+"--no-results"},m())),(0,o.createElement)("span",{id:Q,style:{display:"none"}},b()))},r}(o.Component);(t.default=h).defaultProps={autoselect:!1,cssNamespace:"autocomplete",defaultValue:"",displayMenu:"inline",minLength:0,name:"input-autocomplete",placeholder:"",onConfirm:function(){},confirmOnBlur:!0,showNoOptionsFound:!0,showAllValues:!1,required:!1,tNoResults:function(){return"No results found"},tAssistiveHint:function(){return"When autocomplete results are available use up and down arrows to review and enter to select.  Touch device users, explore by touch or with swipe gestures."},dropdownArrow:l.default}},function(e,t,n){var r=n(9),i=n(53),s=n(28),o=n(26)("IE_PROTO"),u=function(){},l="prototype",a=function(){var e,t=n(15)("iframe"),r=s.length;for(t.style.display="none",n(54).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),a=e.F;r--;)delete a[l][s[r]];return a()};e.exports=Object.create||function(e,t){var n;return null!==e?(u[l]=r(e),n=new u,u[l]=null,n[o]=e):n=a(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(8),i=n(9),s=n(20);e.exports=n(3)?Object.defineProperties:function(e,t){i(e);for(var n,o=s(t),u=o.length,l=0;l<u;)r.f(e,n=o[l++],t[n]);return e}},function(e,t,n){var r=n(1).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(0);r(r.P,"Function",{bind:n(56)})},function(e,t,n){"use strict";var r=n(19),i=n(2),s=n(57),o=[].slice,u={};e.exports=Function.bind||function(e){var t=r(this),n=o.call(arguments,1),l=function(){var r=n.concat(o.call(arguments));return this instanceof l?function(e,t,n){if(!(t in u)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";u[t]=Function("F,a","return new F("+r.join(",")+")")}return u[t](e,n)}(t,r.length,r):s(t,r,e)};return i(t.prototype)&&(l.prototype=t.prototype),l}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){n(59)("match",1,(function(e,t,n){return[function(n){var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},n]}))},function(e,t,n){"use strict";var r=n(7),i=n(16),s=n(4),o=n(12),u=n(34);e.exports=function(e,t,n){var l=u(e),a=n(o,l,""[e]),c=a[0],h=a[1];s((function(){var t={};return t[l]=function(){return 7},7!=""[e](t)}))&&(i(String.prototype,e,c),r(RegExp.prototype,l,2==t?function(e,t){return h.call(e,this,t)}:function(e){return h.call(e,this)}))}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,n(36);var r=n(5),i=function(e){var t=function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={bump:!1,debounced:!1},t};!function(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}(t,e);var n=t.prototype;return n.componentWillMount=function(){var e=this;this.debounceStatusUpdate=function(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,n||e.apply(i,s)},u=n&&!r;clearTimeout(r),r=setTimeout(o,t),u&&e.apply(i,s)}}((function(){if(!e.state.debounced){var t=!e.props.isInFocus||e.props.validChoiceMade;e.setState((function(e){return{bump:!e.bump,debounced:!0,silenced:t}}))}}),1400)},n.componentWillReceiveProps=function(e){e.queryLength,this.setState({debounced:!1})},n.render=function(){var e,t=this.props,n=t.id,i=t.length,s=t.queryLength,o=t.minQueryLength,u=t.selectedOption,l=t.selectedOptionIndex,a=t.tQueryTooShort,c=t.tNoResults,h=t.tSelectedOption,d=t.tResults,f=this.state,p=f.bump,m=f.debounced,v=f.silenced,y=s<o,g=0===i,_=u?h(u,i,l):"";return e=y?a(o):g?c():d(i,_),this.debounceStatusUpdate(),(0,r.createElement)("div",{style:{border:"0",clip:"rect(0 0 0 0)",height:"1px",marginBottom:"-1px",marginRight:"-1px",overflow:"hidden",padding:"0",position:"absolute",whiteSpace:"nowrap",width:"1px"}},(0,r.createElement)("div",{id:n+"__status--A",role:"status","aria-atomic":"true","aria-live":"polite"},!v&&m&&p?e:""),(0,r.createElement)("div",{id:n+"__status--B",role:"status","aria-atomic":"true","aria-live":"polite"},v||!m||p?"":e))},t}(r.Component);(t.default=i).defaultProps={tQueryTooShort:function(e){return"Type in "+e+" or more characters for results"},tNoResults:function(){return"No search results"},tSelectedOption:function(e,t,n){return e+" "+(n+1)+" of "+t+" is highlighted"},tResults:function(e,t){return e+" "+(1===e?"result":"results")+" "+(1===e?"is":"are")+" available. "+t}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(5);t.default=function(e){var t=e.className;return(0,r.createElement)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:t,focusable:"false"},(0,r.createElement)("g",{stroke:"none",fill:"none","fill-rule":"evenodd"},(0,r.createElement)("polygon",{fill:"#000000",points:"0 0 22 0 11 17"})))}}]).default},N=A();var T,D=function(){var t,n=document.querySelector("#report_summary"),r=document.createElement("div");r.id="report_summary_container",n.parentElement.appendChild(r),n.remove(),e(N)({element:document.querySelector("#report_summary_container"),id:"report_summary",source:function(e,t){fetch("/team/picklists/.json?type=report_summary&name=".concat(e)).then((function(e){return e.json()})).then((function(e){return e.results})).then((function(e){return t(e)}))},cssNamespace:"lite-autocomplete",name:"report_summary",templates:{inputValue:function(e){return null!==(t=null==e?void 0:e.name)&&void 0!==t?t:""},suggestion:function(e){return"string"==typeof e?e:'\n          <div class="govuk-body govuk-!-margin-bottom-0">\n            '.concat(e.name,"\n          </div>\n        ")}},defaultValue:n.value,showNoOptionsFound:!1})},P={},M="object"==typeof Reflect?Reflect:null,j=M&&"function"==typeof M.apply?M.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};T=M&&"function"==typeof M.ownKeys?M.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var R=Number.isNaN||function(e){return e!=e};function B(){B.init.call(this)}(P=B).once=function(e,t){return new Promise((function(n,r){var i=function(n){e.removeListener(t,s),r(n)},s=function(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))};X(e,t,s,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&X(e,"error",t,n)}(e,i,{once:!0})}))},B.EventEmitter=B,B.prototype._events=void 0,B.prototype._eventsCount=0,B.prototype._maxListeners=void 0;var F=10;function q(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+(void 0===e?"undefined":u(e)))}function V(e){return void 0===e._maxListeners?B.defaultMaxListeners:e._maxListeners}function $(e,t,n,r){var i,s,o,u;if(q(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]),void 0===o)o=s[t]=n,++e._eventsCount;else if("function"==typeof o?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=V(e))>0&&o.length>i&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,u=l,console&&console.warn&&console.warn(u)}return e}function H(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function U(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=H.bind(r);return i.listener=n,r.wrapFn=i,i}function z(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):W(i,i.length)}function K(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function W(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function X(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+(void 0===e?"undefined":u(e)));e.addEventListener(t,(function i(s){r.once&&e.removeEventListener(t,i),n(s)}))}}Object.defineProperty(B,"defaultMaxListeners",{enumerable:!0,get:function(){return F},set:function(e){if("number"!=typeof e||e<0||R(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");F=e}}),B.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},B.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||R(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},B.prototype.getMaxListeners=function(){return V(this)},B.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)j(u,this,t);else{var l=u.length,a=W(u,l);for(n=0;n<l;++n)j(a[n],this,t)}return!0},B.prototype.addListener=function(e,t){return $(this,e,t,!1)},B.prototype.on=B.prototype.addListener,B.prototype.prependListener=function(e,t){return $(this,e,t,!0)},B.prototype.once=function(e,t){return q(t),this.on(e,U(this,e,t)),this},B.prototype.prependOnceListener=function(e,t){return q(t),this.prependListener(e,U(this,e,t)),this},B.prototype.removeListener=function(e,t){var n,r,i,s,o;if(q(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},B.prototype.off=B.prototype.removeListener,B.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},B.prototype.listeners=function(e){return z(this,e,!0)},B.prototype.rawListeners=function(e){return z(this,e,!1)},B.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):K.call(e,t)},B.prototype.listenerCount=K,B.prototype.eventNames=function(){return this._eventsCount>0?T(this._events):[]};var G={},Q=/[\\^$.*+?()[\]{}|]/g,J=RegExp(Q.source),Y=document.createElement("div"),Z={containerTokenfield:'<div class="tokenfield tokenfield-mode-tokens">\n      <input class="tokenfield-copy-helper"\n        style="display:none;position:fixed;top:-1000px;right:1000px;"\n        tabindex="-1"\n        type="text"\n      />\n      <div class="tokenfield-set">\n        <ul></ul>\n      </div>\n      <input class="tokenfield-input" />\n      <div class="tokenfield-suggest">\n        <ul class="tokenfield-suggest-list"></ul>\n      </div>\n    </div>',containerList:'<div class="tokenfield tokenfield-mode-list">\n      <input class="tokenfield-input" />\n      <div class="tokenfield-suggest">\n        <ul class="tokenfield-suggest-list"></ul>\n      </div>\n      <div class="tokenfield-set">\n        <ul></ul>\n      </div>\n    </div>',suggestItem:'<li class="tokenfield-suggest-item"></li>',setItem:'<li class="tokenfield-set-item">\n      <span class="item-label"></span>\n      <a href="#" class="item-remove" tabindex="-1">×</a>\n      <input class="item-input" type="hidden" />\n    </li>'};function ee(){return(65536*(1+Math.random())|0).toString(16)+(65536*(1+Math.random())|0).toString(16)}function te(e,t){return e.indexOf(t)>=0}function ne(e){return e.nodeName?e:"string"==typeof e?document.querySelector(e):null}function re(e,t){return e.nodeName?e:(e=e.replace(/(\t|\n$)/g,""),Y.innerHTML="",Y.innerHTML=e,!0===t?Y.childNodes:Y.childNodes[0])}function ie(e){return e.key||e.keyIdentifier?e.key||String.fromCharCode(parseInt(e.keyIdentifier.substr(2),16)):null}var se,oe=function(e){"use strict";d(s,e);var r=a(s);function s(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,s),e=r.call(this);var o={_defaults:{focusedItem:null,cache:{},timer:null,xhr:null,suggested:!1,suggestedItems:[],setItems:[],events:{},delimiters:{}},_options:{el:null,form:!0,mode:"tokenfield",addItemOnBlur:!1,addItemsOnPaste:!1,keepItemsOrder:!0,setItems:[],items:[],newItems:!0,multiple:!0,maxItems:0,minLength:0,keys:{17:"ctrl",16:"shift",91:"meta",8:"delete",27:"esc",37:"left",38:"up",39:"right",40:"down",46:"delete",65:"select",67:"copy",88:"cut",9:"delimiter",13:"delimiter",108:"delimiter"},matchRegex:"{value}",matchFlags:"i",matchStart:!1,matchEnd:!1,delimiters:[],copyProperty:"name",copyDelimiter:", ",remote:{type:"GET",url:null,queryParam:"q",delay:300,timestampParam:"t",params:{},headers:{}},placeholder:null,inputType:"text",minChars:2,maxSuggest:10,maxSuggestWindow:10,filterSetItems:!0,filterMatchCase:!1,singleInput:!1,singleInputValue:"id",singleInputDelimiter:", ",itemLabel:"name",itemName:"items",newItemName:"items_new",itemValue:"id",newItemValue:"name",itemData:"name",validateNewItem:null}},u=o._defaults,l=o._options;e.id=ee(),e.key="key_".concat(e.id),e._vars=Object.assign({},u),e._options=Object.assign({},l,i),e._options.keys=Object.assign({},l.keys,i.keys),e._options.remote=Object.assign({},l.remote,i.remote),e._templates=Object.assign({},Z,i.templates),e._vars.setItems=e._prepareData(e.remapData(e._options.setItems||[])),e._focused=!1,e._input=null,e._form=!1,e._html={};var a=e._options;a.delimiters.forEach((function(t){e._vars.delimiters[t]=!0}));var c=ne(a.el);if(!c)throw new Error("Selector: DOM Element ".concat(a.el," not found."));if(e.el=c,a.singleInput){var h=ne(a.singleInput);e._input=h||e.el}if(e.el.tokenfield=t(e),null===a.placeholder&&(a.placeholder=a.el.placeholder||""),!a.form)throw new Error("Cannot create tokenfield without DOM Element.");var d=!1;if(a.form.nodeName)d=a.form;else if(!0===a.form)for(var f=e.el;f.parentNode;){if("FORM"===f.nodeName){d=f;break}f=f.parentNode}else if("string"==typeof d&&!(d=document.querySelector(d)))throw new Error("Selector: DOM Element ".concat(a.form," not found."));return e._form=d,G[e.id]=t(e),e._render(),e}return i(s,[{key:"_render",value:function(){var e=this._options,t=this._html;return"tokenfield"===e.mode?t.container=re(this._templates.containerTokenfield):t.container=re(this._templates.containerList),t.suggest=t.container.querySelector(".tokenfield-suggest"),t.suggestList=t.container.querySelector(".tokenfield-suggest-list"),t.items=t.container.querySelector(".tokenfield-set > ul"),t.input=t.container.querySelector(".tokenfield-input"),t.input.setAttribute("type",e.inputType),"tokenfield"===e.mode?t.input.placeholder=this._vars.setItems.length?"":e.placeholder:t.input.placeholder=e.placeholder,t.copyHelper=t.container.querySelector(".tokenfield-copy-helper"),e.el.style.display="none",t.suggest.style.display="none",this._renderSizer(),t.container.tokenfield=this,e.el.parentElement.insertBefore(t.container,e.el),t.container.insertBefore(e.el,t.container.firstChild),this._setEvents(),this._renderItems(),"tokenfield"===e.mode&&this._minimizeInput()._resizeInput(),this}},{key:"_renderSizer",value:function(){var e=this._html,t=this._getBounds(),n=window.getComputedStyle(e.container),r=parseInt(n.paddingLeft,10)+parseInt(n.paddingRight,10),i={width:"auto",height:"auto",overflow:"hidden",whiteSpace:"pre",maxWidth:t.width-r+"px",position:"fixed",top:"-10000px",left:"10000px",fontSize:n.fontSize,paddingLeft:n.paddingLeft,paddingRight:n.paddingRight};for(var s in e.sizer=document.createElement("div"),e.sizer.id="tokenfield-sizer-"+this.id,i)e.sizer.style[s]=i[s];e.container.appendChild(e.sizer)}},{key:"_minimizeInput",value:function(){return this._html.input.style.width="20px",this}},{key:"_refreshInput",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this._vars,n=this._html;if(e&&(n.input.value=""),"tokenfield"===this._options.mode){this._resizeInput();var r=t.setItems.length?"":this._options.placeholder;n.input.setAttribute("placeholder",r)}else"list"===this._options.mode&&n.input.setAttribute("placeholder",this._options.placeholder);return this}},{key:"_resizeInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this._html,n=this._getBounds(),r=window.getComputedStyle(t.container),i=parseInt(r.paddingRight,10)+parseInt(r.borderRightWidth,10),s=i+parseInt(r.paddingLeft,10)+parseInt(r.borderLeftWidth,10);if(t.sizer.innerHTML=e,t.sizer.style.maxWidth=n.width-i+"px",0!==n.width){t.input.style.width="20px";var o=t.sizer.getBoundingClientRect(),u=t.input.getBoundingClientRect(),l=n.width-(u.left-n.left)-i;o.width>l?t.input.style.width=n.width-s-1+"px":t.input.style.width=l-1+"px"}else t.input.style.width="100%"}},{key:"_fetchData",value:function(e){var t=this,n=this._vars,r=this._options,i=r.remote,s=Object.assign({},r.params);for(var o in i.params)s[o]=i.params[o];i.limit&&(s[i.limit]=r.remote.limit),s[i.queryParam]=e,s[i.timestampParam]=Math.round((new Date).getTime()/1e3),n.xhr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=new XMLHttpRequest,i=t.url,s=[];for(var o in e)s.push("".concat(o,"=").concat(encodeURIComponent(e[o])));var u=s.join("&");for(var l in"get"===t.type.toLowerCase()&&(i+="?"+u),r.open(t.type,i,!0),t.headers){var a=t.headers[l];"function"==typeof a&&(a=a(e,t)),r.setRequestHeader(l,a)}return n&&(r.onreadystatechange=n),r.send(e),r}(s,r.remote,(function(){if(n.xhr&&4==n.xhr.readyState){if(200==n.xhr.status){var i=JSON.parse(n.xhr.responseText);n.cache[e]=i;var s=t._prepareData(t.remapData(i)),o=t._filterData(e,s);n.suggestedItems=r.filterSetItems?t._filterSetItems(o):o,t.showSuggestions()}else if(n.xhr.status>0)throw new Error("Error while loading remote data.");t._abortXhr()}}))}},{key:"remapData",value:function(e){return e}},{key:"_prepareData",value:function(e){var t=this;return e.map((function(e){return Object.assign({},e,c({},t.key,ee()))}))}},{key:"_filterData",value:function(e,t){var n,r=this._options,i=r.matchRegex.replace("{value}",(n=function(e){if("string"==typeof e)return e;if(null===e)return"";var t=e+"";return"0"===t&&1/e==-1/0?"-0":t}(n=e))&&J.test(n)?n.replace(Q,"\\$&"):n);r.matchStart?i="^"+i:r.matchEnd&&(i+="$");var s=new RegExp(i,r.matchFlags);return t.filter((function(e){return s.test(e[r.itemData])}))}},{key:"_abortXhr",value:function(){var e=this._vars;null!==e.xhr&&(e.xhr.abort(),e.xhr=null)}},{key:"_filterSetItems",value:function(e){var t=this._options.itemValue,n=this._vars;if(!n.setItems.length)return e;var r=n.setItems.map((function(e){return e[t]}));return e.filter((function(e){return-1===r.indexOf(e[t])}))}},{key:"_setEvents",value:function(){var e=this._vars,t=this._html;e.events.onClick=this._onClick.bind(this),e.events.onMouseDown=this._onMouseDown.bind(this),e.events.onMouseOver=this._onMouseOver.bind(this),e.events.onFocus=this._onFocus.bind(this),e.events.onResize=this._onResize.bind(this),e.events.onReset=this._onReset.bind(this),e.events.onKeyDown=this._onKeyDown.bind(this),e.events.onFocusOut=this._onFocusOut.bind(this),t.container.addEventListener("click",e.events.onClick),1===Object.keys(G).length&&(document.addEventListener("mousedown",e.events.onMouseDown),window.addEventListener("resize",e.events.onResize)),this._form&&this._form.nodeName&&this._form.addEventListener("reset",e.events.onReset),t.suggestList.addEventListener("mouseover",e.events.onMouseOver),t.input.addEventListener("focus",e.events.onFocus)}},{key:"_onMouseOver",value:function(e){var t=e.target;t.classList.contains("tokenfield-suggest-item")&&([].slice.call(this._html.suggestList.querySelectorAll(".selected")).forEach((function(e){e!==t&&e.classList.remove("selected")})),t.classList.add("selected"),this._selectItem(t.key,!1),this._refreshItemsSelection())}},{key:"_onReset",value:function(){this.setItems(this._options.setItems)}},{key:"_onFocus",value:function(){var e=this._vars,t=this._html,n=this._options;t.input.removeEventListener("keydown",e.events.onKeyDown),t.input.addEventListener("keydown",e.events.onKeyDown),t.input.addEventListener("focusout",e.events.onFocusOut),n.addItemsOnPaste&&(e.events.onPaste=this._onPaste.bind(this),t.input.addEventListener("paste",e.events.onPaste)),this._focused=!0,this._html.container.classList.add("focused"),this._resizeInput(),t.input.value.trim().length>=n.minChars&&this.showSuggestions()}},{key:"_onFocusOut",value:function(e){var t=this._vars,n=this._options,r=this._html;if(r.input.removeEventListener("keydown",t.events.onKeyDown),r.input.removeEventListener("focusout",t.events.onFocusOut),void 0!==t.events.onPaste&&r.input.removeEventListener("paste",t.events.onPaste),!e.relatedTarget||e.relatedTarget!==r.copyHelper){var i=n.multiple&&!n.maxItems||!n.multiple&&!t.setItems.length||n.multiple&&n.maxItems&&t.setItems.length<n.maxItems;this._focused&&n.addItemOnBlur&&i&&this._newItem(r.input.value)?this._renderItems()._refreshInput():this._defocusItems()._renderItems(),this._focused=!1,this._html.container.classList.remove("focused")}}},{key:"_onMouseDown",value:function(e){var t=null;for(var n in G)if(G[n]._html.container.contains(e.target)){t=G[n];break}if(t){for(var r in G)r!==t.id&&(G[r].hideSuggestions(),G[r].blur());e.target!==t._html.input&&e.preventDefault()}else for(var i in G)G[i].hideSuggestions(),G[i].blur()}},{key:"_onResize",value:function(){for(var e in G)G[e]._resizeInput(G[e]._html.input.value)}},{key:"_onPaste",value:function(e){var t=this,n=this._vars,r=this._options,i=e.clipboardData.getData("text"),s=[i];if(r.delimiters.length){var o=r.delimiters.join("|"),u=new RegExp("(".concat(o,")"),"ig");s=i.split(u)}if(s.map((function(e){return e.trim()})).filter((function(e){return e.length>0&&e.length>=r.minLength&&void 0===n.delimiters[e]})).map((function(e){return t._newItem(e)})).length){var l=this;setTimeout((function(){l._renderItems()._refreshInput()._deselectItems().hideSuggestions()}),1),e.preventDefault()}}},{key:"_onKeyDown",value:function(e){var t=this,n=this._vars,r=this._options,i=this._html;r.maxItems&&n.setItems.length>=r.maxItems&&e.preventDefault(),"tokenfield"===r.mode&&setTimeout((function(){t._resizeInput(i.input.value)}),1);var s=ie(e);if(void 0!==r.keys[e.keyCode]||te(r.delimiters,s)){if(this._keyAction(e))return!0}else this._defocusItems()._refreshItems();clearTimeout(n.timer),this._abortXhr(),(!r.maxItems||n.setItems.length<r.maxItems)&&setTimeout((function(){t._keyInput(e)}),1)}},{key:"_keyAction",value:function(e){this.key;var t=null,n=this._vars,r=this._options,i=this._html,s=r.keys[e.keyCode],o=i.input.value.trim(),u=ie(e);te(r.delimiters,u)&&void 0===s&&(s="delimiter");var l=this._getSelectedItems();switch(l.length&&(t=l[0]),s){case"esc":this._deselectItems()._defocusItems()._renderItems().hideSuggestions();break;case"up":this._vars.suggested&&(this._selectPrevItem()._refreshItemsSelection(),e.preventDefault()),this._defocusItems()._renderItems();break;case"down":this._vars.suggested&&(this._selectNextItem()._refreshItemsSelection(),e.preventDefault()),this._defocusItems()._renderItems();break;case"left":(this.getFocusedItems().length||!i.input.selectionStart&&!i.input.selectionEnd)&&(this._focusPrevItem(e.shiftKey),e.preventDefault());break;case"right":(this.getFocusedItems().length||i.input.selectionStart===o.length)&&(this._focusNextItem(e.shiftKey),e.preventDefault());break;case"delimiter":if(this._abortXhr(),this._defocusItems(),!r.multiple&&n.setItems.length>=1)return!1;o=this.onInput(o,e),t?this._addItem(t):o.length&&(t=this._newItem(o)),t&&this._minimizeInput()._renderItems().focus()._refreshInput()._refreshSuggestions()._deselectItems(),e.preventDefault();break;case"select":if(o.length||!e.ctrlKey&&!e.metaKey)return!1;this._vars.setItems.forEach((function(e){e.focused=!0})),this._refreshItems();break;case"cut":if(!this.getFocusedItems().length||!e.ctrlKey&&!e.metaKey)return!1;this._copy()._delete(e);break;case"copy":if(!this.getFocusedItems().length||!e.ctrlKey&&!e.metaKey)return!1;this._copy();break;case"delete":var a=this;this._abortXhr();var c=this.getFocusedItems();!i.input.selectionEnd&&8===e.keyCode||i.input.selectionStart===o.length&&46===e.keyCode||c.length?this._delete(e):n.timer=setTimeout((function(){a._keyInput(e)}),r.delay)}return!0}},{key:"_copy",value:function(){var e=this._options,t=this._html,n=this.getFocusedItems().map((function(t){return t[e.copyProperty]})).join(e.copyDelimiter);return t.copyHelper.style.display="block",t.copyHelper.value=n,t.copyHelper.focus(),t.copyHelper.select(),document.execCommand("copy"),t.copyHelper.style.display="none",t.copyHelper.value="",t.input.focus(),this}},{key:"_delete",value:function(e){var t=this._vars,n=this._options,r=this.key,i=this._html,s=this.getFocusedItems();if("tokenfield"===n.mode&&t.setItems.length)if(s.length){var o=this;s.forEach((function(e){o._removeItem(e[r])})),this._refreshSuggestions()._keyInput(e)}else i.input.selectionStart||this._focusItem(t.setItems[t.setItems.length-1][r]);else if(s.length){var u=this;s.forEach((function(e){u._removeItem(e[r])})),this._refreshSuggestions()._keyInput(e)}return this._minimizeInput()._renderItems()._refreshInput(!1),this}},{key:"_keyInput",value:function(e){var t=this._vars,n=this._options,r=this._html;this._defocusItems()._refreshItems();var i=this.onInput(r.input.value.trim(),e);if("keydown"===e.type&&this.emit("input",this,i,e),i.length<n.minChars)return this.hideSuggestions(),!1;if(!n.multiple&&t.setItems.length>=1)return!1;if(void 0===t.cache[i]){var s=this;if(n.remote.url)t.timer=setTimeout((function(){s._fetchData(i)}),n.delay);else if(!n.remote.url&&n.items.length){var o=this._prepareData(n.items),u=this._filterData(i,o);t.suggestedItems=n.filterSetItems?this._filterSetItems(u):u,this.showSuggestions()}}else{var l=this._prepareData(this.remapData(t.cache[i])),a=this._filterData(i,l);t.suggestedItems=n.filterSetItems?this._filterSetItems(a):a,this.showSuggestions()}return this}},{key:"_onClick",value:function(e){var t=e.target;if(t.classList.contains("item-remove"))e.preventDefault(),this._removeItem(t.key)._defocusItems()._minimizeInput()._renderItems()._refreshInput(!1)._keyInput(e);else if(t.classList.contains("tokenfield-suggest-item")){var n=this._getSuggestedItem(t.key);this._addItem(n)._minimizeInput()._renderItems()._refreshInput()._refreshSuggestions()}else{var r=function(e){for(var t=[e];e.parentNode;)e=e.parentNode,t.push(e);return t}(t).filter((function(e){return e.classList&&e.classList.contains("tokenfield-set-item")}))[0];r?(this._focusItem(r.key,e.shiftKey,e.ctrlKey||e.metaKey,!0),this._refreshItems()):this._keyInput(e)}this.focus()}},{key:"_selectPrevItem",value:function(){var e=this.key,t=this._options,n=this._vars.suggestedItems,r=this._getSelectedItemIndex();return n.length?(null!==r?0===r?t.newItems?this._deselectItems():this._selectItem(n[n.length-1][e]):this._selectItem(n[r-1][e]):this._selectItem(n[n.length-1][e]),this):this}},{key:"_selectNextItem",value:function(){var e=this.key,t=this._options,n=this._vars.suggestedItems,r=this._getSelectedItemIndex();return n.length?(null!==r?r===n.length-1?t.newItems?this._deselectItems():this._selectItem(n[0][e]):this._selectItem(n[r+1][e]):this._selectItem(n[0][e]),this):this}},{key:"_focusPrevItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.key,n=this._vars.setItems,r=this._getFocusedItemIndex();if(!n.length)return this;if(null!==r)if(0!==r||e)if(0===r&&e){var i=this._getFocusedItemIndex(!0);this._defocusItem(n[i][t])}else this._focusItem(n[r-1][t],e,!1,!0);else this._defocusItems();else this._focusItem(n[n.length-1][t],!1,!1,!0);return this._refreshItems(),this}},{key:"_focusNextItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.key,n=this._vars.setItems,r=this._getFocusedItemIndex(!0);return n.length?(null!==r?r!==n.length-1||e?r===n.length-1&&e?this._focusItem(n[0][t],e):this._focusItem(n[r+1][t],e):this._defocusItems():this._focusItem(n[0][t],!1),this._refreshItems(),this):this}},{key:"_getSelectedItems",value:function(){var e=this.key,t=this._vars.setItems.map((function(t){return t[e]}));return this._vars.suggestedItems.filter((function(n){return n.selected&&t.indexOf(n[e])<0}))}},{key:"_selectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;this._vars.suggestedItems.forEach((function(r){if(r.selected=r[n.key]===e,r.selected&&t){var i=parseInt(n._html.suggest.style.maxHeight,10);if(i){var s=n._html.suggestList.getBoundingClientRect(),o=r.el.getBoundingClientRect(),u=o.top-s.top,l=u+o.height;l>=i+n._html.suggest.scrollTop?n._html.suggest.scrollTop=l-i:u<n._html.suggest.scrollTop&&(n._html.suggest.scrollTop=u)}}}))}},{key:"_deselectItem",value:function(e){var t=this;return this._vars.suggestedItems.every((function(n){return n[t.key]!==e||(n.selected=!1,!1)})),this}},{key:"_deselectItems",value:function(){return this._vars.suggestedItems.forEach((function(e){e.selected=!1})),this}},{key:"_refreshItemsSelection",value:function(){this._vars.suggestedItems.forEach((function(e){e.selected&&e.el?e.el.classList.add("selected"):e.el&&e.el.classList.remove("selected")}))}},{key:"_getSelectedItemIndex",value:function(){var e=null;return this._vars.suggestedItems.every((function(t,n){return!t.selected||(e=n,!1)})),e}},{key:"_getFocusedItemIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null;return this._vars.setItems.every((function(n,r){return!(n.focused&&(t=r,!e))})),t}},{key:"_getItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t&&(t=this.key);var n=this._filterItems(this._vars.setItems,e,t);return n.length?n[0]:null}},{key:"_getSuggestedItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t&&(t=this.key);var n=this._filterItems(this._vars.suggestedItems,e,t);return n.length?n[0]:null}},{key:"_getAvailableItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t&&(t=this.key);var n=this._filterItems(this._options.items,e,t);return n.length?n[0]:null}},{key:"_filterItems",value:function(e,t,n){var r=this._options.filterMatchCase;return e.filter((function(e){return"string"==typeof e[n]&&"string"==typeof t?r?e[n]===t:e[n].toLowerCase()==t.toLowerCase():e[n]==t}))}},{key:"_removeItem",value:function(e){var t=this;return this._vars.setItems.every((function(n,r){return n[t.key]!==e||(t.emit("removeToken",t,n),t._vars.setItems.splice(r,1),t.emit("removedToken",t,n),t.emit("change",t),!1)})),this}},{key:"_addItem",value:function(e){e.focused=!1;var t=this._options;if((e.isNew&&!this._getItem(e[t.itemData],t.itemData)||!this._getItem(e[t.itemValue],t.itemValue))&&(this.emit("addToken",this,e),!this._options.maxItems||this._options.maxItems&&this._vars.setItems.length<this._options.maxItems)){e.selected=!1;var n=Object.assign({},e);this._vars.setItems.push(n),this.emit("addedToken",this,n),this.emit("change",this)}return this}},{key:"getFocusedItem",value:function(){var e=this._vars.setItems.filter((function(e){return e.focused}))[0];return e.length?e[0]:null}},{key:"getFocusedItems",value:function(){return this._vars.setItems.filter((function(e){return e.focused}))}},{key:"_focusItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this;if(t){var s=this,o=null,u=null,l=null,a=this._vars.setItems.length;if(this._vars.setItems.forEach((function(t,n){t[s.key]===e&&(l=n),null===o&&t.focused&&(o=n),t.focused&&(u=n)})),(0===l||l===a-1)&&null===o&&null===u)return;null===o&&null===u?this._vars.setItems[l].focused=!0:0!==l||u!==a-1||r?(o=Math.min(l,o),u=Math.max(l,u),this._vars.setItems.forEach((function(e,t){e.focused=l===t||t>=o&&t<=u}))):this._vars.setItems[o].focused=!1}else this._vars.setItems.forEach((function(t){t.focused=n?t[i.key]===e?!t.focused:t.focused:t[i.key]===e}));return this}},{key:"_defocusItem",value:function(e){var t=this;return this._vars.setItems.filter((function(n){n[t.key]===e&&(n.focused=!1)}))}},{key:"_defocusItems",value:function(){return this._vars.setItems.forEach((function(e){e.focused=!1})),this}},{key:"_newItem",value:function(e){var t=this._options;if("string"==typeof e&&(!e.length||e.length<t.minLength))return null;var n=this._getItem(e,t.itemData)||this._getSuggestedItem(e,t.itemData)||this._getAvailableItem(e,t.itemData);if(!n&&t.newItems){if("function"==typeof t.validateNewItem&&!t.validateNewItem(e))return null;var r;c(r={isNew:!0},this.key,ee()),c(r,t.itemData,e),n=r,this.emit("newToken",this,n)}return n?(this._addItem(n),n):null}},{key:"_buildEl",value:function(e){return re(e)}},{key:"_getBounds",value:function(){return this._html.container.getBoundingClientRect()}},{key:"_renderItems",value:function(){var e=this,t=this._vars,n=this._options,r=this._html;return r.items.innerHTML="",t.setItems.forEach((function(t,n){var i=e._renderItem(t,n);r.items.appendChild(i),t.el=i,t.focused?t.el.classList.add("focused"):t.el.classList.remove("focused")})),t.setItems.length>1&&"tokenfield"===n.mode?r.input.setAttribute("placeholder",""):"list"===n.mode&&r.input.setAttribute("placeholder",n.placeholder),this._input&&(this._input.value=t.setItems.map((function(e){return e[n.singleInputValue]})).join(n.singleInputDelimiter)),this}},{key:"_refreshItems",value:function(){this._vars.setItems.forEach((function(e){e.el&&(e.focused?e.el.classList.add("focused"):e.el.classList.remove("focused"))}))}},{key:"_renderItem",value:function(e,t){var n=this._options,r=this.renderSetItemHtml(e),i=r.querySelector(".item-label"),s=r.querySelector(".item-input"),o=r.querySelector(".item-remove"),u=n.keepItemsOrder?"[".concat(t,"]"):"[]";return r.key=e[this.key],o.key=e[this.key],s.setAttribute("name",(e.isNew?n.newItemName:n.itemName)+u),s.value=e[e.isNew?n.newItemValue:n.itemValue]||null,i.textContent=this.renderSetItemLabel(e),e.focused&&r.classList.add("focused"),r}},{key:"onInput",value:function(e,t){return e}},{key:"renderSetItemHtml",value:function(){return this._buildEl(this._templates.setItem)}},{key:"renderSetItemLabel",value:function(e){return e[this._options.itemLabel]}},{key:"renderSuggestions",value:function(e){var t=this,n=this._vars,r=this._options,i=this._html,s=this._getSelectedItemIndex();if(!e.length)return this;if(0===r.maxSuggestWindow&&(i.suggest.style.maxHeight=null),!n.suggestedItems.length)return this;r.newItems||null!==s||(e[0].selected=!0);var o=0;e.every((function(e,n){if(n>=r.maxSuggest)return!1;var s=i.suggestList.childNodes[n],u=e.el=t.renderSuggestedItem(e);return s?s.itemValue===e[r.itemValue]?(s.key=e[t.key],e.el=s):i.suggestList.replaceChild(u,s):s||i.suggestList.appendChild(u),r.maxSuggestWindow>0&&n<r.maxSuggestWindow&&(o+=i.suggestList.childNodes[n].getBoundingClientRect().height),r.maxSuggestWindow>0&&n===r.maxSuggestWindow&&(i.suggest.style.maxHeight=o+"px"),!0}));var u=i.suggestList.childElementCount-e.length;if(u>0)for(var l=u-1;l>=0;l--)i.suggestList.removeChild(i.suggestList.childNodes[e.length+l]);return this}},{key:"renderSuggestedItem",value:function(e){var t=this._options,n=this._buildEl(this._templates.suggestItem);(n.key=e[this.key],n.itemValue=e[t.itemValue],n.innerHTML=this.renderSuggestedItemContent(e),n.setAttribute("title",e[t.itemData]),e.selected&&n.classList.add("selected"),t.filterSetItems)||(this._getItem(e[t.itemValue],t.itemValue)||this._getItem(e[t.itemData],t.itemData))&&n.classList.add("set");return n}},{key:"renderSuggestedItemContent",value:function(e){return e[this._options.itemData]}},{key:"_refreshSuggestions",value:function(){var e=this._vars,t=this._options;if(this._html.input.value.length<t.minChars)return this.hideSuggestions(),this;var n=this._prepareData(t.items),r=this._filterData(this._html.input.value,n);return e.suggestedItems=t.filterSetItems?this._filterSetItems(r):r,e.suggestedItems.length&&(!t.maxItems||t.maxItems&&e.setItems.length<t.maxItems)?(this.renderSuggestions(e.suggestedItems),this):(this.hideSuggestions(),this)}},{key:"showSuggestions",value:function(){var e=this._vars,t=this._options;return e.suggestedItems.length?(this.emit("showSuggestions",this),(!t.maxItems||t.maxItems&&e.setItems.length<t.maxItems)&&(this._html.suggest.style.display="block",e.suggested=!0,this.renderSuggestions(e.suggestedItems)),this.emit("shownSuggestions",this)):this.hideSuggestions(),this}},{key:"hideSuggestions",value:function(){return this.emit("hideSuggestions",this),this._vars.suggested=!1,this._html.suggest.style.display="none",this._html.suggestList.innerHTML="",this.emit("hiddenSuggestions",this),this}},{key:"setSuggestedItems",value:function(e){if(!Array.isArray(e))throw new Error("Argument must be an array of objects.");this._options.items=e,this._refreshSuggestions()}},{key:"getItems",value:function(){var e=this;return this._vars.setItems.map((function(t){var n=Object.assign({},t);return delete n[e.key],delete n.focused,delete n.selected,delete n.el,n}))}},{key:"setItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this._vars.setItems=[],this.addItems(e),this}},{key:"addItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this,n=this._options.itemValue;return Array.isArray(e)||(e=[e]),this._prepareData(e).forEach((function(e){(e.isNew||void 0!==e[n])&&t._addItem(e)})),this._minimizeInput()._renderItems()._refreshInput().hideSuggestions(),this}},{key:"sortItems",value:function(){var e=this,t=[];y(this._html.items.childNodes).forEach((function(n){var r=e._getItem(n.key);r&&t.push(r)})),this.setItems(t)}},{key:"removeItem",value:function(e){var t=this._options;"object"==typeof e&&(e[t.itemValue]||e[t.newItemValue])&&(e=e[t.itemValue]||e[t.newItemValue]);var n=this._getItem(e,t.itemValue)||this._getItem(e,t.newItemValue);return n?(this._removeItem(n[this.key])._renderItems(),this):this}},{key:"emptyItems",value:function(){return this._vars.setItems=[],this._renderItems()._refreshInput().hideSuggestions(),this.emit("change",this),this}},{key:"getSuggestedItems",value:function(){return this._vars.suggestedItems.map((function(e){return Object.assign({},e)}))}},{key:"focus",value:function(){return this._html.container.classList.add("focused"),this._focused||this._html.input.focus(),this}},{key:"blur",value:function(){return this._html.container.classList.remove("focused"),this._focused&&this._html.input.blur(),this}},{key:"remove",value:function(){var e=this._html;e.container.parentElement.insertBefore(this.el,e.container),e.container.remove(),this.el.style.display="block",1===Object.keys(G).length&&(document.removeEventListener("mousedown",this._vars.events.onMouseDown),window.removeEventListener("resize",this._vars.events.onResize)),this._form&&this._form.nodeName&&this._form.removeEventListener("reset",this._vars.events.onReset),delete G[this.id],delete this.el.tokenfield}}]),s}(e(P)),ue=function(e){"use strict";d(i,e);var r=a(i);function i(){var e;return n(this,i),c(t(e=r.apply(this,arguments)),"_renderItem",(function(e,t){var n=this._options,r=this.renderSetItemHtml(e),i=r.querySelector(".item-label"),s=r.querySelector(".item-input"),o=r.querySelector(".item-remove");return r.key=e[this.key],o.key=e[this.key],s.setAttribute("name",e.isNew?n.newItemName:n.itemName),s.value=e[e.isNew?n.newItemValue:n.itemValue]||null,i.textContent=this.renderSetItemLabel(e),e.focused&&r.classList.add("focused"),r})),e}return i}(oe),le=window.TokenField=ue,ae=function(e){return{id:e.value,name:e.value,classes:[]}},ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae;e.parentElement.classList.add("tokenfield-container");for(var n=[],r=[],i=0;i<e.options.length;i++){var s=e.options.item(i),o=t(s);s.selected&&r.push(o),n.push(o)}var u=new le({el:e,items:n,newItems:!1,addItemOnBlur:!0,filterSetItems:!1,addItemsOnPaste:!0,minChars:1,itemName:e.name,setItems:r,keepItemsOrder:!1});return u._renderItems(),u._html.container.id=e.id,e.remove(),u},he=function(){var e=document.querySelectorAll("[data-module=regimes-multi-select]"),t=!0,n=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var o=i.value;ce(o,(function(e){return{id:e.value,name:e.label,classes:[]}}))}}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}};!function(){var e=document.querySelector("#div_id_goods");if(e){var t=function(e){var t=document.createElement("div");return t.classList.add("assessment-form__first-column--options"),e.insertBefore(t,e.firstElementChild.nextElementSibling),t}(e),n=function(e){var t=document.createElement("button");t.innerText=g,t.classList.add("lite-button--link","assessment-form__select-all");var n=e.querySelectorAll("[name=goods]");return new _(t,n).init(),t}(e),r=function(e){var t=document.createElement("button");t.innerText=b,t.classList.add("lite-button--link");var n=e.querySelectorAll(".govuk-details");return new I(t,n).init(),t}(e);t.append(n,r)}}(),function(){var e=document.querySelector("#div_id_goods");if(e){var t=e.querySelectorAll("[name=goods]"),n=document.querySelector(".assessment-form__second-column");new k(t,n,"assessment-form__second-column--hide").init()}}(),function(){var e=document.querySelector(".assessment-form__headline"),t=new x(e),n=document.querySelector("[name=does_not_have_control_list_entries]"),r=new O("#control_list_entries",n);r.init();var i=new L("#control_list_entries"),s=document.createElement("div");s.classList.add("tau-assessment-form__cle-suggestions");var o=document.querySelector("[for=control_list_entries]");o.parentNode.insertBefore(s,o.nextSibling);var u=new C(s,(function(e){i.setSuggestions(e),r.reset()})),l=document.querySelector("#div_id_goods").querySelectorAll("[name=goods]"),a=JSON.parse(document.querySelector("#cle-suggestions-json").textContent);new S(l,a,(function(e){t.setProducts(e),u.setProducts(e)})).init()}(),se=document.querySelector("#submit-id-submit"),new w(se).init(),D(),he()}();
//# sourceMappingURL=tau.js.map
