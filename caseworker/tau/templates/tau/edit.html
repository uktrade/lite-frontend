{% extends 'layouts/case.html' %}

{% load advice_tags crispy_forms_tags custom_tags rules static tau_tags %}

{% block body %}
<div class="govuk-width-container tau">
    <h1 class="govuk-heading-l govuk-!-margin-top-6">Product assessment</h1>
    <p id="subtitle" class="govuk-body">Editing assessment for <strong>{{ good.good.name }}</strong> going from <strong>{{ case.data.goods_starting_point|verbose_goods_starting_point }}</strong> to <strong>{{ case|get_destinations|humanise_list }}</strong></p>
    <main class="govuk-main-wrapper">
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">
                <div>
                    <h3 class="govuk-heading-m">{{ good.line_number }}. {{ good.good.name }}</h3>
                    <div>
                      {% include "goods/includes/good_table.html" with good=good summary=summary %}
                      {% include "goods/includes/precedent_table.html" with precedents=good.precedents %}
                    </div>
                </div>
            </div>
            <div class="govuk-grid-column-one-third">
                {{ cle_suggestions_json|json_script:"cle-suggestions-json" }}
                <form id="tau-form" method="POST">
                    <h1 class="govuk-heading-m tau__headline">Assessing {{good.good.name}}</h1>
                    {% crispy form %}
                    {% test_rule 'can_user_assess_products' current_user case as can_user_assess_products %}
                    {% if can_user_assess_products %}
                        <input type="submit" name="submit" value="Save" class="govuk-button" id="submit-id-submit" />
                    {% endif %}
                </form>
            </div>
        </div>
    </main>
</div>
{% endblock %}

{% block javascript %}
    {{ block.super }}
    <script src="{% static 'tau-edit.js' %}" type="text/javascript"></script>
{% endblock %}
