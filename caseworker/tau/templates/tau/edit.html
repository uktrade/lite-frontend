{% extends 'layouts/case.html' %}
{% load static custom_tags crispy_forms_tags advice_tags tau_tags %}
{% block body %}
<div class="govuk-width-container tau">
    <h1 class="govuk-heading-l govuk-!-margin-top-6">Product assessment</h1>
    <p id="subtitle" class="govuk-body">Editing assessment for <strong>{{ good.good.name }}</strong> going from <strong>{{ case.data.goods_starting_point|verbose_goods_starting_point }}</strong> to <strong>{{ case|get_destinations|humanise_list }}</strong></p>
    <main class="govuk-main-wrapper">
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">
                <div>
                    <h3 class="govuk-heading-m">{{ good.line_number }}. {{ good.good.name }}</h3>
                    <div>
                      {% include "tau/good_table.html" with good=good summary=summary %}
                      {% include "tau/precedent_table.html" with precedents=good.precedents %}
                    </div>
                </div>
            </div>
            <div class="govuk-grid-column-one-third">
                {{ cle_suggestions_json|json_script:"cle-suggestions-json" }}
                <form id="tau-form" method="POST">
                    {% csrf_token %}
                    <h1 class="govuk-heading-m tau__headline">Assessing {{good.good.name}}</h1>
                    <label for="control_list_entries" class="govuk-label">Add a control list entry or end-use control</label>
                    <div class="tau__cle-suggestion-buttons">
                        <div class="tau__cle-suggestions"></div>
                    </div>
                    <div class="govuk-hint">Or type for suggestions</div>
                    {% for field in form %}
                        {% if field.name == "does_not_have_control_list_entries" %}
                            <p class="govuk-body-m">Or</p>
                        {% endif %}
                        {{ field | as_crispy_field }}
                    {% endfor %}
                    <div class="form-actions">
                        <input type="submit" name="submit" value="Save and continue" class="govuk-button" id="submit-id-submit">
                    </div>
                </form>
            </div>
        </div>
    </main>
</div>
{% endblock %}

{% block javascript %}
    {{ block.super }}
    <script src="{% static 'tau-edit.js' %}" type="text/javascript"></script>
{% endblock %}
